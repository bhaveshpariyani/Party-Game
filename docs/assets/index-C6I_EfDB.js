(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var zp={exports:{}},wu={};var RT;function RI(){if(RT)return wu;RT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return wu.Fragment=e,wu.jsx=n,wu.jsxs=n,wu}var CT;function CI(){return CT||(CT=1,zp.exports=RI()),zp.exports}var v=CI(),Bp={exports:{}},Ve={};var IT;function II(){if(IT)return Ve;IT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,I={};function P(U,Z,le){this.props=U,this.context=Z,this.refs=I,this.updater=le||V}P.prototype.isReactComponent={},P.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},P.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function z(){}z.prototype=P.prototype;function F(U,Z,le){this.props=U,this.context=Z,this.refs=I,this.updater=le||V}var ue=F.prototype=new z;ue.constructor=F,O(ue,P.prototype),ue.isPureReactComponent=!0;var Y=Array.isArray;function ae(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(U,Z,le){var me=le.ref;return{$$typeof:t,type:U,key:Z,ref:me!==void 0?me:null,props:le}}function L(U,Z){return N(U.type,Z,U.props)}function j(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function H(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return Z[le]})}var D=/\/+/g;function _e(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?H(""+U.key):Z.toString(36)}function Ne(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ae,ae):(U.status="pending",U.then(function(Z){U.status==="pending"&&(U.status="fulfilled",U.value=Z)},function(Z){U.status==="pending"&&(U.status="rejected",U.reason=Z)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function J(U,Z,le,me,ce){var he=typeof U;(he==="undefined"||he==="boolean")&&(U=null);var Ee=!1;if(U===null)Ee=!0;else switch(he){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(U.$$typeof){case t:case e:Ee=!0;break;case y:return Ee=U._init,J(Ee(U._payload),Z,le,me,ce)}}if(Ee)return ce=ce(U),Ee=me===""?"."+_e(U,0):me,Y(ce)?(le="",Ee!=null&&(le=Ee.replace(D,"$&/")+"/"),J(ce,Z,le,"",function(de){return de})):ce!=null&&(j(ce)&&(ce=L(ce,le+(ce.key==null||U&&U.key===ce.key?"":(""+ce.key).replace(D,"$&/")+"/")+Ee)),Z.push(ce)),1;Ee=0;var Ae=me===""?".":me+":";if(Y(U))for(var Ie=0;Ie<U.length;Ie++)me=U[Ie],he=Ae+_e(me,Ie),Ee+=J(me,Z,le,he,ce);else if(Ie=w(U),typeof Ie=="function")for(U=Ie.call(U),Ie=0;!(me=U.next()).done;)me=me.value,he=Ae+_e(me,Ie++),Ee+=J(me,Z,le,he,ce);else if(he==="object"){if(typeof U.then=="function")return J(Ne(U),Z,le,me,ce);throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function oe(U,Z,le){if(U==null)return U;var me=[],ce=0;return J(U,me,"","",function(he){return Z.call(le,he,ce++)}),me}function ne(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Te={map:oe,forEach:function(U,Z,le){oe(U,function(){Z.apply(this,arguments)},le)},count:function(U){var Z=0;return oe(U,function(){Z++}),Z},toArray:function(U){return oe(U,function(Z){return Z})||[]},only:function(U){if(!j(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Ve.Activity=T,Ve.Children=Te,Ve.Component=P,Ve.Fragment=n,Ve.Profiler=a,Ve.PureComponent=F,Ve.StrictMode=s,Ve.Suspense=d,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},Ve.cache=function(U){return function(){return U.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(U,Z,le){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var me=O({},U.props),ce=U.key;if(Z!=null)for(he in Z.key!==void 0&&(ce=""+Z.key),Z)!A.call(Z,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&Z.ref===void 0||(me[he]=Z[he]);var he=arguments.length-2;if(he===1)me.children=le;else if(1<he){for(var Ee=Array(he),Ae=0;Ae<he;Ae++)Ee[Ae]=arguments[Ae+2];me.children=Ee}return N(U.type,ce,me)},Ve.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Ve.createElement=function(U,Z,le){var me,ce={},he=null;if(Z!=null)for(me in Z.key!==void 0&&(he=""+Z.key),Z)A.call(Z,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ce[me]=Z[me]);var Ee=arguments.length-2;if(Ee===1)ce.children=le;else if(1<Ee){for(var Ae=Array(Ee),Ie=0;Ie<Ee;Ie++)Ae[Ie]=arguments[Ie+2];ce.children=Ae}if(U&&U.defaultProps)for(me in Ee=U.defaultProps,Ee)ce[me]===void 0&&(ce[me]=Ee[me]);return N(U,he,ce)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(U){return{$$typeof:f,render:U}},Ve.isValidElement=j,Ve.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:ne}},Ve.memo=function(U,Z){return{$$typeof:p,type:U,compare:Z===void 0?null:Z}},Ve.startTransition=function(U){var Z=C.T,le={};C.T=le;try{var me=U(),ce=C.S;ce!==null&&ce(le,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ae,ye)}catch(he){ye(he)}finally{Z!==null&&le.types!==null&&(Z.types=le.types),C.T=Z}},Ve.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ve.use=function(U){return C.H.use(U)},Ve.useActionState=function(U,Z,le){return C.H.useActionState(U,Z,le)},Ve.useCallback=function(U,Z){return C.H.useCallback(U,Z)},Ve.useContext=function(U){return C.H.useContext(U)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(U,Z){return C.H.useDeferredValue(U,Z)},Ve.useEffect=function(U,Z){return C.H.useEffect(U,Z)},Ve.useEffectEvent=function(U){return C.H.useEffectEvent(U)},Ve.useId=function(){return C.H.useId()},Ve.useImperativeHandle=function(U,Z,le){return C.H.useImperativeHandle(U,Z,le)},Ve.useInsertionEffect=function(U,Z){return C.H.useInsertionEffect(U,Z)},Ve.useLayoutEffect=function(U,Z){return C.H.useLayoutEffect(U,Z)},Ve.useMemo=function(U,Z){return C.H.useMemo(U,Z)},Ve.useOptimistic=function(U,Z){return C.H.useOptimistic(U,Z)},Ve.useReducer=function(U,Z,le){return C.H.useReducer(U,Z,le)},Ve.useRef=function(U){return C.H.useRef(U)},Ve.useState=function(U){return C.H.useState(U)},Ve.useSyncExternalStore=function(U,Z,le){return C.H.useSyncExternalStore(U,Z,le)},Ve.useTransition=function(){return C.H.useTransition()},Ve.version="19.2.3",Ve}var DT;function wy(){return DT||(DT=1,Bp.exports=II()),Bp.exports}var M=wy(),Fp={exports:{}},Au={},Hp={exports:{}},qp={};var MT;function DI(){return MT||(MT=1,(function(t){function e(J,oe){var ne=J.length;J.push(oe);e:for(;0<ne;){var ye=ne-1>>>1,Te=J[ye];if(0<a(Te,oe))J[ye]=oe,J[ne]=Te,ne=ye;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var oe=J[0],ne=J.pop();if(ne!==oe){J[0]=ne;e:for(var ye=0,Te=J.length,U=Te>>>1;ye<U;){var Z=2*(ye+1)-1,le=J[Z],me=Z+1,ce=J[me];if(0>a(le,ne))me<Te&&0>a(ce,le)?(J[ye]=ce,J[me]=ne,ye=me):(J[ye]=le,J[Z]=ne,ye=Z);else if(me<Te&&0>a(ce,ne))J[ye]=ce,J[me]=ne,ye=me;else break e}}return oe}function a(J,oe){var ne=J.sortIndex-oe.sortIndex;return ne!==0?ne:J.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var d=[],p=[],y=1,T=null,E=3,w=!1,V=!1,O=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ue(J){for(var oe=n(p);oe!==null;){if(oe.callback===null)s(p);else if(oe.startTime<=J)s(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=n(p)}}function Y(J){if(O=!1,ue(J),!V)if(n(d)!==null)V=!0,ae||(ae=!0,H());else{var oe=n(p);oe!==null&&Ne(Y,oe.startTime-J)}}var ae=!1,C=-1,A=5,N=-1;function L(){return I?!0:!(t.unstable_now()-N<A)}function j(){if(I=!1,ae){var J=t.unstable_now();N=J;var oe=!0;try{e:{V=!1,O&&(O=!1,z(C),C=-1),w=!0;var ne=E;try{t:{for(ue(J),T=n(d);T!==null&&!(T.expirationTime>J&&L());){var ye=T.callback;if(typeof ye=="function"){T.callback=null,E=T.priorityLevel;var Te=ye(T.expirationTime<=J);if(J=t.unstable_now(),typeof Te=="function"){T.callback=Te,ue(J),oe=!0;break t}T===n(d)&&s(d),ue(J)}else s(d);T=n(d)}if(T!==null)oe=!0;else{var U=n(p);U!==null&&Ne(Y,U.startTime-J),oe=!1}}break e}finally{T=null,E=ne,w=!1}oe=void 0}}finally{oe?H():ae=!1}}}var H;if(typeof F=="function")H=function(){F(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,_e=D.port2;D.port1.onmessage=j,H=function(){_e.postMessage(null)}}else H=function(){P(j,0)};function Ne(J,oe){C=P(function(){J(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(J){switch(E){case 1:case 2:case 3:var oe=3;break;default:oe=E}var ne=E;E=oe;try{return J()}finally{E=ne}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ne=E;E=J;try{return oe()}finally{E=ne}},t.unstable_scheduleCallback=function(J,oe,ne){var ye=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ye+ne:ye):ne=ye,J){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ne+Te,J={id:y++,callback:oe,priorityLevel:J,startTime:ne,expirationTime:Te,sortIndex:-1},ne>ye?(J.sortIndex=ne,e(p,J),n(d)===null&&J===n(p)&&(O?(z(C),C=-1):O=!0,Ne(Y,ne-ye))):(J.sortIndex=Te,e(d,J),V||w||(V=!0,ae||(ae=!0,H()))),J},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(J){var oe=E;return function(){var ne=E;E=oe;try{return J.apply(this,arguments)}finally{E=ne}}}})(qp)),qp}var NT;function MI(){return NT||(NT=1,Hp.exports=DI()),Hp.exports}var Gp={exports:{}},pn={};var VT;function NI(){if(VT)return pn;VT=1;var t=wy();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:d,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,pn.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,y)},pn.flushSync=function(d){var p=c.T,y=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=p,s.p=y,s.d.f()}},pn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},pn.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},pn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,T=f(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:w}):y==="script"&&s.d.X(d,{crossOrigin:T,integrity:E,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},pn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},pn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,T=f(y,p.crossOrigin);s.d.L(d,y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},pn.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=f(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},pn.requestFormReset=function(d){s.d.r(d)},pn.unstable_batchedUpdates=function(d,p){return d(p)},pn.useFormState=function(d,p,y){return c.H.useFormState(d,p,y)},pn.useFormStatus=function(){return c.H.useHostTransitionStatus()},pn.version="19.2.3",pn}var OT;function VI(){if(OT)return Gp.exports;OT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gp.exports=NI(),Gp.exports}var PT;function OI(){if(PT)return Au;PT=1;var t=MI(),e=wy(),n=VI();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),i;if(g===u)return d(m),r;g=g.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=g;else{for(var b=!1,x=m.child;x;){if(x===o){b=!0,o=m,u=g;break}if(x===u){b=!0,u=m,o=g;break}x=x.sibling}if(!b){for(x=g.child;x;){if(x===o){b=!0,o=g,u=m;break}if(x===u){b=!0,u=g,o=m;break}x=x.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=j&&i[j]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function _e(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case P:return"Profiler";case I:return"StrictMode";case Y:return"Suspense";case ae:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case V:return"Portal";case F:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case ue:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return r=i.displayName||null,r!==null?r:_e(i.type)||"Memo";case A:r=i._payload,i=i._init;try{return _e(i(r))}catch{}}return null}var Ne=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ye=[],Te=-1;function U(i){return{current:i}}function Z(i){0>Te||(i.current=ye[Te],ye[Te]=null,Te--)}function le(i,r){Te++,ye[Te]=i.current,i.current=r}var me=U(null),ce=U(null),he=U(null),Ee=U(null);function Ae(i,r){switch(le(he,r),le(ce,i),le(me,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?X1(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=X1(r),i=W1(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(me),le(me,i)}function Ie(){Z(me),Z(ce),Z(he)}function de(i){i.memoizedState!==null&&le(Ee,i);var r=me.current,o=W1(r,i.type);r!==o&&(le(ce,i),le(me,o))}function Le(i){ce.current===i&&(Z(me),Z(ce)),Ee.current===i&&(Z(Ee),bu._currentValue=ne)}var it,tn;function Gt(i){if(it===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);it=r&&r[1]||"",tn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+i+tn}var wn=!1;function nn(i,r){if(!i||wn)return"";wn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var Q=W}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(W){Q=W}i.call(ie.prototype)}}else{try{throw Error()}catch(W){Q=W}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),b=g[0],x=g[1];if(b&&x){var k=b.split(`
`),K=x.split(`
`);for(m=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;if(u===k.length||m===K.length)for(u=k.length-1,m=K.length-1;1<=u&&0<=m&&k[u]!==K[m];)m--;for(;1<=u&&0<=m;u--,m--)if(k[u]!==K[m]){if(u!==1||m!==1)do if(u--,m--,0>m||k[u]!==K[m]){var ee=`
`+k[u].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=u&&0<=m);break}}}finally{wn=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Gt(o):""}function Ks(i,r){switch(i.tag){case 26:case 27:case 5:return Gt(i.type);case 16:return Gt("Lazy");case 13:return i.child!==r&&r!==null?Gt("Suspense Fallback"):Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return nn(i.type,!1);case 11:return nn(i.type.render,!1);case 1:return nn(i.type,!0);case 31:return Gt("Activity");default:return""}}function Zr(i){try{var r="",o=null;do r+=Ks(i,o),o=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Nt=Object.prototype.hasOwnProperty,$t=t.unstable_scheduleCallback,Ys=t.unstable_cancelCallback,Fd=t.unstable_shouldYield,Cc=t.unstable_requestPaint,Tn=t.unstable_now,ea=t.unstable_getCurrentPriorityLevel,xl=t.unstable_ImmediatePriority,wl=t.unstable_UserBlockingPriority,Qs=t.unstable_NormalPriority,Hd=t.unstable_LowPriority,Ic=t.unstable_IdlePriority,Dc=t.log,Mc=t.unstable_setDisableYieldValue,mi=null,sn=null;function Kn(i){if(typeof Dc=="function"&&Mc(i),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(mi,i)}catch{}}var At=Math.clz32?Math.clz32:Vc,Nc=Math.log,eo=Math.LN2;function Vc(i){return i>>>=0,i===0?32:31-(Nc(i)/eo|0)|0}var ki=256,ta=262144,Vt=4194304;function ji(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Li(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var m=0,g=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var x=u&134217727;return x!==0?(u=x&~g,u!==0?m=ji(u):(b&=x,b!==0?m=ji(b):o||(o=x&~i,o!==0&&(m=ji(o))))):(x=u&~g,x!==0?m=ji(x):b!==0?m=ji(b):o||(o=u&~i,o!==0&&(m=ji(o)))),m===0?0:r!==0&&r!==m&&(r&g)===0&&(g=m&-m,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:m}function pi(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function qd(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oc(){var i=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),i}function Ui(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function na(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Gd(i,r,o,u,m,g){var b=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var x=i.entanglements,k=i.expirationTimes,K=i.hiddenUpdates;for(o=b&~o;0<o;){var ee=31-At(o),ie=1<<ee;x[ee]=0,k[ee]=-1;var Q=K[ee];if(Q!==null)for(K[ee]=null,ee=0;ee<Q.length;ee++){var W=Q[ee];W!==null&&(W.lane&=-536870913)}o&=~ie}u!==0&&ia(i,u,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~r))}function ia(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-At(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Al(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-At(o),m=1<<u;m&r|i[u]&r&&(i[u]|=r),o&=~m}}function Rl(i,r){var o=r&-r;return o=(o&42)!==0?1:sa(o),(o&(i.suspendedLanes|r))!==0?0:o}function sa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ms(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Pc(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:TT(i.type))}function gi(i,r){var o=oe.p;try{return oe.p=i,r()}finally{oe.p=o}}var yi=Math.random().toString(36).slice(2),Ot="__reactFiber$"+yi,Wt="__reactProps$"+yi,zi="__reactContainer$"+yi,to="__reactEvents$"+yi,$d="__reactListeners$"+yi,kc="__reactHandles$"+yi,jc="__reactResources$"+yi,Bi="__reactMarker$"+yi;function no(i){delete i[Ot],delete i[Wt],delete i[to],delete i[$d],delete i[kc]}function Fi(i){var r=i[Ot];if(r)return r;for(var o=i.parentNode;o;){if(r=o[zi]||o[Ot]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=sT(i);i!==null;){if(o=i[Ot])return o;i=sT(i)}return r}i=o,o=i.parentNode}return null}function Yn(i){if(i=i[Ot]||i[zi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function kn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Hi(i){var r=i[jc];return r||(r=i[jc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(i){i[Bi]=!0}var Cl=new Set,Il={};function qi(i,r){Gi(i,r),Gi(i+"Capture",r)}function Gi(i,r){for(Il[i]=r,i=0;i<r.length;i++)Cl.add(r[i])}var Dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ml={},Nl={};function Lc(i){return Nt.call(Nl,i)?!0:Nt.call(Ml,i)?!1:Dl.test(i)?Nl[i]=!0:(Ml[i]=!0,!1)}function io(i,r,o){if(Lc(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function jn(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function kt(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}function Jt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Vl(i,r,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,g.call(this,b)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function st(i){if(!i._valueTracker){var r=Xs(i)?"checked":"value";i._valueTracker=Vl(i,r,""+i[r])}}function ra(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=Xs(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function $i(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aa=/[\n"\\]/g;function An(i){return i.replace(aa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function so(i,r,o,u,m,g,b,x){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Jt(r)):i.value!==""+Jt(r)&&(i.value=""+Jt(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?Ol(i,b,Jt(r)):o!=null?Ol(i,b,Jt(o)):u!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+Jt(x):i.removeAttribute("name")}function Uc(i,r,o,u,m,g,b,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){st(i);return}o=o!=null?""+Jt(o):"",r=r!=null?""+Jt(r):o,x||r===i.value||(i.value=r),i.defaultValue=r}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=x?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),st(i)}function Ol(i,r,o){r==="number"&&$i(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Ws(i,r,o,u){if(i=i.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=r.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Jt(o),r=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function zc(i,r,o){if(r!=null&&(r=""+Jt(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Jt(o):""}function Js(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(Ne(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=Jt(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),st(i)}function Rn(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||Bc.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function kl(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in r)u=r[m],r.hasOwnProperty(m)&&o[m]!==u&&Pl(i,m,u)}else for(var g in r)r.hasOwnProperty(g)&&Pl(i,g,r[g])}function ro(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ao(i){return Zs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function vi(){}var jl=null;function Qn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var er=null,Ki=null;function oa(i){var r=Yn(i);if(r&&(i=r.stateNode)){var o=i[Wt]||null;e:switch(i=r.stateNode,r.type){case"input":if(so(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var m=u[Wt]||null;if(!m)throw Error(s(90));so(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&ra(u)}break e;case"textarea":zc(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Ws(i,!!o.multiple,r,!1)}}}var oo=!1;function tr(i,r,o){if(oo)return i(r,o);oo=!0;try{var u=i(r);return u}finally{if(oo=!1,(er!==null||Ki!==null)&&(Ph(),er&&(r=er,i=Ki,Ki=er=null,oa(r),i)))for(r=0;r<i.length;r++)oa(i[r])}}function _i(i,r){var o=i.stateNode;if(o===null)return null;var u=o[Wt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(Xn)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){la=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{la=!1}var Yi=null,Ll=null,ua=null;function Ul(){if(ua)return ua;var i,r=Ll,o=r.length,u,m="value"in Yi?Yi.value:Yi.textContent,g=m.length;for(i=0;i<o&&r[i]===m[i];i++);var b=o-i;for(u=1;u<=b&&r[o-u]===m[g-u];u++);return ua=m.slice(i,1<u?1-u:void 0)}function ca(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ps(){return!0}function Ti(){return!1}function rn(i){function r(o,u,m,g,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(o=i[x],this[x]=o?o(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ps:Ti,this.isPropagationStopped=Ti,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),r}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qi=rn(gs),nr=T({},gs,{view:0,detail:0}),zl=rn(nr),ir,lo,Xi,uo=T({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xi&&(Xi&&i.type==="mousemove"?(ir=i.screenX-Xi.screenX,lo=i.screenY-Xi.screenY):lo=ir=0,Xi=i),ir)},movementY:function(i){return"movementY"in i?i.movementY:lo}}),Bl=rn(uo),ha=T({},uo,{dataTransfer:0}),Hc=rn(ha),qc=T({},nr,{relatedTarget:0}),fa=rn(qc),Fl=T({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=rn(Fl),co=T({},gs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$c=rn(co),Kc=T({},gs,{data:0}),Wi=rn(Kc),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Xc[i])?!!r[i]:!1}function sr(){return Wc}var bn=T({},nr,{key:function(i){if(i.key){var r=Yc[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Qc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(i){return i.type==="keypress"?ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Jc=rn(bn),Zc=T({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ys=rn(Zc),h=T({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),_=rn(h),S=T({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=rn(S),G=T({},uo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),X=rn(G),fe=T({},gs,{newState:0,oldState:0}),Pe=rn(fe),Rt=[9,13,27,32],Je=Xn&&"CompositionEvent"in window,yt=null;Xn&&"documentMode"in document&&(yt=document.documentMode);var Wn=Xn&&"TextEvent"in window&&!yt,Ji=Xn&&(!Je||yt&&8<yt&&11>=yt),bi=" ",Ei=!1;function da(i,r){switch(i){case"keyup":return Rt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fo=!1;function WR(i,r){switch(i){case"compositionend":return ho(r);case"keypress":return r.which!==32?null:(Ei=!0,bi);case"textInput":return i=r.data,i===bi&&Ei?null:i;default:return null}}function JR(i,r){if(fo)return i==="compositionend"||!Je&&da(i,r)?(i=Ul(),ua=Ll=Yi=null,fo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ji&&r.locale!=="ko"?null:r.data;default:return null}}var ZR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!ZR[i.type]:r==="textarea"}function lv(i,r,o,u){er?Ki?Ki.push(u):Ki=[u]:er=u,r=Fh(r,"onChange"),0<r.length&&(o=new Qi("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var Hl=null,ql=null;function eC(i){q1(i,0)}function eh(i){var r=kn(i);if(ra(r))return i}function uv(i,r){if(i==="change")return r}var cv=!1;if(Xn){var Kd;if(Xn){var Yd="oninput"in document;if(!Yd){var hv=document.createElement("div");hv.setAttribute("oninput","return;"),Yd=typeof hv.oninput=="function"}Kd=Yd}else Kd=!1;cv=Kd&&(!document.documentMode||9<document.documentMode)}function fv(){Hl&&(Hl.detachEvent("onpropertychange",dv),ql=Hl=null)}function dv(i){if(i.propertyName==="value"&&eh(ql)){var r=[];lv(r,ql,i,Qn(i)),tr(eC,r)}}function tC(i,r,o){i==="focusin"?(fv(),Hl=r,ql=o,Hl.attachEvent("onpropertychange",dv)):i==="focusout"&&fv()}function nC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return eh(ql)}function iC(i,r){if(i==="click")return eh(r)}function sC(i,r){if(i==="input"||i==="change")return eh(r)}function rC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Ln=typeof Object.is=="function"?Object.is:rC;function Gl(i,r){if(Ln(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Nt.call(r,m)||!Ln(i[m],r[m]))return!1}return!0}function mv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function pv(i,r){var o=mv(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=mv(o)}}function gv(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?gv(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function yv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=$i(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=$i(i.document)}return r}function Qd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var aC=Xn&&"documentMode"in document&&11>=document.documentMode,mo=null,Xd=null,$l=null,Wd=!1;function vv(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Wd||mo==null||mo!==$i(u)||(u=mo,"selectionStart"in u&&Qd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$l&&Gl($l,u)||($l=u,u=Fh(Xd,"onSelect"),0<u.length&&(r=new Qi("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=mo)))}function ma(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var po={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},Jd={},_v={};Xn&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function pa(i){if(Jd[i])return Jd[i];if(!po[i])return i;var r=po[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in _v)return Jd[i]=r[o];return i}var Tv=pa("animationend"),bv=pa("animationiteration"),Ev=pa("animationstart"),oC=pa("transitionrun"),lC=pa("transitionstart"),uC=pa("transitioncancel"),Sv=pa("transitionend"),xv=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function Si(i,r){xv.set(i,r),qi(r,[i])}var th=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Jn=[],go=0,em=0;function nh(){for(var i=go,r=em=go=0;r<i;){var o=Jn[r];Jn[r++]=null;var u=Jn[r];Jn[r++]=null;var m=Jn[r];Jn[r++]=null;var g=Jn[r];if(Jn[r++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}g!==0&&wv(o,m,g)}}function ih(i,r,o,u){Jn[go++]=i,Jn[go++]=r,Jn[go++]=o,Jn[go++]=u,em|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function tm(i,r,o,u){return ih(i,r,o,u),sh(i)}function ga(i,r){return ih(i,null,null,r),sh(i)}function wv(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=i.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&r!==null&&(m=31-At(o),i=g.hiddenUpdates,u=i[m],u===null?i[m]=[r]:u.push(r),r.lane=o|536870912),g):null}function sh(i){if(50<mu)throw mu=0,cp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var yo={};function cC(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(i,r,o,u){return new cC(i,r,o,u)}function nm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function vs(i,r){var o=i.alternate;return o===null?(o=Un(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Av(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function rh(i,r,o,u,m,g){var b=0;if(u=i,typeof i=="function")nm(i)&&(b=1);else if(typeof i=="string")b=pI(i,o,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Un(31,o,r,m),i.elementType=N,i.lanes=g,i;case O:return ya(o.children,m,g,r);case I:b=8,m|=24;break;case P:return i=Un(12,o,r,m|2),i.elementType=P,i.lanes=g,i;case Y:return i=Un(13,o,r,m),i.elementType=Y,i.lanes=g,i;case ae:return i=Un(19,o,r,m),i.elementType=ae,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:b=10;break e;case z:b=9;break e;case ue:b=11;break e;case C:b=14;break e;case A:b=16,u=null;break e}b=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Un(b,o,r,m),r.elementType=i,r.type=u,r.lanes=g,r}function ya(i,r,o,u){return i=Un(7,i,u,r),i.lanes=o,i}function im(i,r,o){return i=Un(6,i,null,r),i.lanes=o,i}function Rv(i){var r=Un(18,null,null,0);return r.stateNode=i,r}function sm(i,r,o){return r=Un(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Cv=new WeakMap;function Zn(i,r){if(typeof i=="object"&&i!==null){var o=Cv.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Zr(r)},Cv.set(i,r),r)}return{value:i,source:r,stack:Zr(r)}}var vo=[],_o=0,ah=null,Kl=0,ei=[],ti=0,rr=null,Zi=1,es="";function _s(i,r){vo[_o++]=Kl,vo[_o++]=ah,ah=i,Kl=r}function Iv(i,r,o){ei[ti++]=Zi,ei[ti++]=es,ei[ti++]=rr,rr=i;var u=Zi;i=es;var m=32-At(u)-1;u&=~(1<<m),o+=1;var g=32-At(r)+m;if(30<g){var b=m-m%5;g=(u&(1<<b)-1).toString(32),u>>=b,m-=b,Zi=1<<32-At(r)+m|o<<m|u,es=g+i}else Zi=1<<g|o<<m|u,es=i}function rm(i){i.return!==null&&(_s(i,1),Iv(i,1,0))}function am(i){for(;i===ah;)ah=vo[--_o],vo[_o]=null,Kl=vo[--_o],vo[_o]=null;for(;i===rr;)rr=ei[--ti],ei[ti]=null,es=ei[--ti],ei[ti]=null,Zi=ei[--ti],ei[ti]=null}function Dv(i,r){ei[ti++]=Zi,ei[ti++]=es,ei[ti++]=rr,Zi=r.id,es=r.overflow,rr=i}var an=null,dt=null,Ke=!1,ar=null,ni=!1,om=Error(s(519));function or(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yl(Zn(r,i)),om}function Mv(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[Ot]=i,r[Wt]=u,o){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(o=0;o<gu.length;o++)Be(gu[o],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),Uc(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),Js(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Y1(r.textContent,o)?(u.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),u.onScroll!=null&&Be("scroll",r),u.onScrollEnd!=null&&Be("scrollend",r),u.onClick!=null&&(r.onclick=vi),r=!0):r=!1,r||or(i,!0)}function Nv(i){for(an=i.return;an;)switch(an.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:an=an.return}}function To(i){if(i!==an)return!1;if(!Ke)return Nv(i),Ke=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||wp(i.type,i.memoizedProps)),o=!o),o&&dt&&or(i),Nv(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));dt=iT(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));dt=iT(i)}else r===27?(r=dt,br(i.type)?(i=Dp,Dp=null,dt=i):dt=r):dt=an?si(i.stateNode.nextSibling):null;return!0}function va(){dt=an=null,Ke=!1}function lm(){var i=ar;return i!==null&&(Mn===null?Mn=i:Mn.push.apply(Mn,i),ar=null),i}function Yl(i){ar===null?ar=[i]:ar.push(i)}var um=U(null),_a=null,Ts=null;function lr(i,r,o){le(um,r._currentValue),r._currentValue=o}function bs(i){i._currentValue=um.current,Z(um)}function cm(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function hm(i,r,o,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var b=m.child;g=g.firstContext;e:for(;g!==null;){var x=g;g=m;for(var k=0;k<r.length;k++)if(x.context===r[k]){g.lanes|=o,x=g.alternate,x!==null&&(x.lanes|=o),cm(g.return,o,i),u||(b=null);break e}g=x.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),cm(b,o,i),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===i){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function bo(i,r,o,u){i=null;for(var m=r,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var x=m.type;Ln(m.pendingProps.value,b.value)||(i!==null?i.push(x):i=[x])}}else if(m===Ee.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(bu):i=[bu])}m=m.return}i!==null&&hm(r,i,o,u),r.flags|=262144}function oh(i){for(i=i.firstContext;i!==null;){if(!Ln(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ta(i){_a=i,Ts=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function on(i){return Vv(_a,i)}function lh(i,r){return _a===null&&Ta(i),Vv(i,r)}function Vv(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ts===null){if(i===null)throw Error(s(308));Ts=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Ts=Ts.next=r;return o}var hC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},fC=t.unstable_scheduleCallback,dC=t.unstable_NormalPriority,jt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fm(){return{controller:new hC,data:new Map,refCount:0}}function Ql(i){i.refCount--,i.refCount===0&&fC(dC,function(){i.controller.abort()})}var Xl=null,dm=0,Eo=0,So=null;function mC(i,r){if(Xl===null){var o=Xl=[];dm=0,Eo=gp(),So={status:"pending",value:void 0,then:function(u){o.push(u)}}}return dm++,r.then(Ov,Ov),r}function Ov(){if(--dm===0&&Xl!==null){So!==null&&(So.status="fulfilled");var i=Xl;Xl=null,Eo=0,So=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function pC(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var Pv=J.S;J.S=function(i,r){v1=Tn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&mC(i,r),Pv!==null&&Pv(i,r)};var ba=U(null);function mm(){var i=ba.current;return i!==null?i:ht.pooledCache}function uh(i,r){r===null?le(ba,ba.current):le(ba,r.pool)}function kv(){var i=mm();return i===null?null:{parent:jt._currentValue,pool:i}}var xo=Error(s(460)),pm=Error(s(474)),ch=Error(s(542)),hh={then:function(){}};function jv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Lv(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(vi,vi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,zv(i),i;default:if(typeof r.status=="string")r.then(vi,vi);else{if(i=ht,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=u}},function(u){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,zv(i),i}throw Sa=r,xo}}function Ea(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Sa=o,xo):o}}var Sa=null;function Uv(){if(Sa===null)throw Error(s(459));var i=Sa;return Sa=null,i}function zv(i){if(i===xo||i===ch)throw Error(s(483))}var wo=null,Wl=0;function fh(i){var r=Wl;return Wl+=1,wo===null&&(wo=[]),Lv(wo,i,r)}function Jl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function dh(i,r){throw r.$$typeof===E?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Bv(i){function r(q,B){if(i){var $=q.deletions;$===null?(q.deletions=[B],q.flags|=16):$.push(B)}}function o(q,B){if(!i)return null;for(;B!==null;)r(q,B),B=B.sibling;return null}function u(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function m(q,B){return q=vs(q,B),q.index=0,q.sibling=null,q}function g(q,B,$){return q.index=$,i?($=q.alternate,$!==null?($=$.index,$<B?(q.flags|=67108866,B):$):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function b(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function x(q,B,$,te){return B===null||B.tag!==6?(B=im($,q.mode,te),B.return=q,B):(B=m(B,$),B.return=q,B)}function k(q,B,$,te){var Se=$.type;return Se===O?ee(q,B,$.props.children,te,$.key):B!==null&&(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&Ea(Se)===B.type)?(B=m(B,$.props),Jl(B,$),B.return=q,B):(B=rh($.type,$.key,$.props,null,q.mode,te),Jl(B,$),B.return=q,B)}function K(q,B,$,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=sm($,q.mode,te),B.return=q,B):(B=m(B,$.children||[]),B.return=q,B)}function ee(q,B,$,te,Se){return B===null||B.tag!==7?(B=ya($,q.mode,te,Se),B.return=q,B):(B=m(B,$),B.return=q,B)}function ie(q,B,$){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=im(""+B,q.mode,$),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return $=rh(B.type,B.key,B.props,null,q.mode,$),Jl($,B),$.return=q,$;case V:return B=sm(B,q.mode,$),B.return=q,B;case A:return B=Ea(B),ie(q,B,$)}if(Ne(B)||H(B))return B=ya(B,q.mode,$,null),B.return=q,B;if(typeof B.then=="function")return ie(q,fh(B),$);if(B.$$typeof===F)return ie(q,lh(q,B),$);dh(q,B)}return null}function Q(q,B,$,te){var Se=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Se!==null?null:x(q,B,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===Se?k(q,B,$,te):null;case V:return $.key===Se?K(q,B,$,te):null;case A:return $=Ea($),Q(q,B,$,te)}if(Ne($)||H($))return Se!==null?null:ee(q,B,$,te,null);if(typeof $.then=="function")return Q(q,B,fh($),te);if($.$$typeof===F)return Q(q,B,lh(q,$),te);dh(q,$)}return null}function W(q,B,$,te,Se){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return q=q.get($)||null,x(B,q,""+te,Se);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return q=q.get(te.key===null?$:te.key)||null,k(B,q,te,Se);case V:return q=q.get(te.key===null?$:te.key)||null,K(B,q,te,Se);case A:return te=Ea(te),W(q,B,$,te,Se)}if(Ne(te)||H(te))return q=q.get($)||null,ee(B,q,te,Se,null);if(typeof te.then=="function")return W(q,B,$,fh(te),Se);if(te.$$typeof===F)return W(q,B,$,lh(B,te),Se);dh(B,te)}return null}function ve(q,B,$,te){for(var Se=null,Qe=null,be=B,je=B=0,He=null;be!==null&&je<$.length;je++){be.index>je?(He=be,be=null):He=be.sibling;var Xe=Q(q,be,$[je],te);if(Xe===null){be===null&&(be=He);break}i&&be&&Xe.alternate===null&&r(q,be),B=g(Xe,B,je),Qe===null?Se=Xe:Qe.sibling=Xe,Qe=Xe,be=He}if(je===$.length)return o(q,be),Ke&&_s(q,je),Se;if(be===null){for(;je<$.length;je++)be=ie(q,$[je],te),be!==null&&(B=g(be,B,je),Qe===null?Se=be:Qe.sibling=be,Qe=be);return Ke&&_s(q,je),Se}for(be=u(be);je<$.length;je++)He=W(be,q,je,$[je],te),He!==null&&(i&&He.alternate!==null&&be.delete(He.key===null?je:He.key),B=g(He,B,je),Qe===null?Se=He:Qe.sibling=He,Qe=He);return i&&be.forEach(function(Ar){return r(q,Ar)}),Ke&&_s(q,je),Se}function we(q,B,$,te){if($==null)throw Error(s(151));for(var Se=null,Qe=null,be=B,je=B=0,He=null,Xe=$.next();be!==null&&!Xe.done;je++,Xe=$.next()){be.index>je?(He=be,be=null):He=be.sibling;var Ar=Q(q,be,Xe.value,te);if(Ar===null){be===null&&(be=He);break}i&&be&&Ar.alternate===null&&r(q,be),B=g(Ar,B,je),Qe===null?Se=Ar:Qe.sibling=Ar,Qe=Ar,be=He}if(Xe.done)return o(q,be),Ke&&_s(q,je),Se;if(be===null){for(;!Xe.done;je++,Xe=$.next())Xe=ie(q,Xe.value,te),Xe!==null&&(B=g(Xe,B,je),Qe===null?Se=Xe:Qe.sibling=Xe,Qe=Xe);return Ke&&_s(q,je),Se}for(be=u(be);!Xe.done;je++,Xe=$.next())Xe=W(be,q,je,Xe.value,te),Xe!==null&&(i&&Xe.alternate!==null&&be.delete(Xe.key===null?je:Xe.key),B=g(Xe,B,je),Qe===null?Se=Xe:Qe.sibling=Xe,Qe=Xe);return i&&be.forEach(function(AI){return r(q,AI)}),Ke&&_s(q,je),Se}function ct(q,B,$,te){if(typeof $=="object"&&$!==null&&$.type===O&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:e:{for(var Se=$.key;B!==null;){if(B.key===Se){if(Se=$.type,Se===O){if(B.tag===7){o(q,B.sibling),te=m(B,$.props.children),te.return=q,q=te;break e}}else if(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&Ea(Se)===B.type){o(q,B.sibling),te=m(B,$.props),Jl(te,$),te.return=q,q=te;break e}o(q,B);break}else r(q,B);B=B.sibling}$.type===O?(te=ya($.props.children,q.mode,te,$.key),te.return=q,q=te):(te=rh($.type,$.key,$.props,null,q.mode,te),Jl(te,$),te.return=q,q=te)}return b(q);case V:e:{for(Se=$.key;B!==null;){if(B.key===Se)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){o(q,B.sibling),te=m(B,$.children||[]),te.return=q,q=te;break e}else{o(q,B);break}else r(q,B);B=B.sibling}te=sm($,q.mode,te),te.return=q,q=te}return b(q);case A:return $=Ea($),ct(q,B,$,te)}if(Ne($))return ve(q,B,$,te);if(H($)){if(Se=H($),typeof Se!="function")throw Error(s(150));return $=Se.call($),we(q,B,$,te)}if(typeof $.then=="function")return ct(q,B,fh($),te);if($.$$typeof===F)return ct(q,B,lh(q,$),te);dh(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,B!==null&&B.tag===6?(o(q,B.sibling),te=m(B,$),te.return=q,q=te):(o(q,B),te=im($,q.mode,te),te.return=q,q=te),b(q)):o(q,B)}return function(q,B,$,te){try{Wl=0;var Se=ct(q,B,$,te);return wo=null,Se}catch(be){if(be===xo||be===ch)throw be;var Qe=Un(29,be,null,q.mode);return Qe.lanes=te,Qe.return=q,Qe}}}var xa=Bv(!0),Fv=Bv(!1),ur=!1;function gm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function cr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function hr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var m=u.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),u.pending=r,r=sh(i),wv(i,null,o),r}return ih(i,u,r,o),sh(i)}function Zl(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Al(i,o)}}function vm(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?m=g=r:g=g.next=r}else m=g=r;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var _m=!1;function eu(){if(_m){var i=So;if(i!==null)throw i}}function tu(i,r,o,u){_m=!1;var m=i.updateQueue;ur=!1;var g=m.firstBaseUpdate,b=m.lastBaseUpdate,x=m.shared.pending;if(x!==null){m.shared.pending=null;var k=x,K=k.next;k.next=null,b===null?g=K:b.next=K,b=k;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,x=ee.lastBaseUpdate,x!==b&&(x===null?ee.firstBaseUpdate=K:x.next=K,ee.lastBaseUpdate=k))}if(g!==null){var ie=m.baseState;b=0,ee=K=k=null,x=g;do{var Q=x.lane&-536870913,W=Q!==x.lane;if(W?(Fe&Q)===Q:(u&Q)===Q){Q!==0&&Q===Eo&&(_m=!0),ee!==null&&(ee=ee.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ve=i,we=x;Q=r;var ct=o;switch(we.tag){case 1:if(ve=we.payload,typeof ve=="function"){ie=ve.call(ct,ie,Q);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,Q=typeof ve=="function"?ve.call(ct,ie,Q):ve,Q==null)break e;ie=T({},ie,Q);break e;case 2:ur=!0}}Q=x.callback,Q!==null&&(i.flags|=64,W&&(i.flags|=8192),W=m.callbacks,W===null?m.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ee===null?(K=ee=W,k=ie):ee=ee.next=W,b|=Q;if(x=x.next,x===null){if(x=m.shared.pending,x===null)break;W=x,x=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);ee===null&&(k=ie),m.baseState=k,m.firstBaseUpdate=K,m.lastBaseUpdate=ee,g===null&&(m.shared.lanes=0),gr|=b,i.lanes=b,i.memoizedState=ie}}function Hv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function qv(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Hv(o[i],r)}var Ao=U(null),mh=U(0);function Gv(i,r){i=Ds,le(mh,i),le(Ao,r),Ds=i|r.baseLanes}function Tm(){le(mh,Ds),le(Ao,Ao.current)}function bm(){Ds=mh.current,Z(Ao),Z(mh)}var zn=U(null),ii=null;function fr(i){var r=i.alternate;le(Ct,Ct.current&1),le(zn,i),ii===null&&(r===null||Ao.current!==null||r.memoizedState!==null)&&(ii=i)}function Em(i){le(Ct,Ct.current),le(zn,i),ii===null&&(ii=i)}function $v(i){i.tag===22?(le(Ct,Ct.current),le(zn,i),ii===null&&(ii=i)):dr()}function dr(){le(Ct,Ct.current),le(zn,zn.current)}function Bn(i){Z(zn),ii===i&&(ii=null),Z(Ct)}var Ct=U(0);function ph(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Cp(o)||Ip(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Es=0,ke=null,lt=null,Lt=null,gh=!1,Ro=!1,wa=!1,yh=0,nu=0,Co=null,gC=0;function Et(){throw Error(s(321))}function Sm(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!Ln(i[o],r[o]))return!1;return!0}function xm(i,r,o,u,m,g){return Es=g,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?I_:Um,wa=!1,g=o(u,m),wa=!1,Ro&&(g=Yv(r,o,u,m)),Kv(i),g}function Kv(i){J.H=ru;var r=lt!==null&&lt.next!==null;if(Es=0,Lt=lt=ke=null,gh=!1,nu=0,Co=null,r)throw Error(s(300));i===null||Ut||(i=i.dependencies,i!==null&&oh(i)&&(Ut=!0))}function Yv(i,r,o,u){ke=i;var m=0;do{if(Ro&&(Co=null),nu=0,Ro=!1,25<=m)throw Error(s(301));if(m+=1,Lt=lt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}J.H=D_,g=r(o,u)}while(Ro);return g}function yC(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?iu(r):r,i=i.useState()[0],(lt!==null?lt.memoizedState:null)!==i&&(ke.flags|=1024),r}function wm(){var i=yh!==0;return yh=0,i}function Am(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Rm(i){if(gh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}gh=!1}Es=0,Lt=lt=ke=null,Ro=!1,nu=yh=0,Co=null}function En(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ke.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function It(){if(lt===null){var i=ke.alternate;i=i!==null?i.memoizedState:null}else i=lt.next;var r=Lt===null?ke.memoizedState:Lt.next;if(r!==null)Lt=r,lt=i;else{if(i===null)throw ke.alternate===null?Error(s(467)):Error(s(310));lt=i,i={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Lt===null?ke.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iu(i){var r=nu;return nu+=1,Co===null&&(Co=[]),i=Lv(Co,i,r),r=ke,(Lt===null?r.memoizedState:Lt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?I_:Um),i}function _h(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return iu(i);if(i.$$typeof===F)return on(i)}throw Error(s(438,String(i)))}function Cm(i){var r=null,o=ke.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=vh(),ke.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=L;return r.index++,o}function Ss(i,r){return typeof r=="function"?r(i):r}function Th(i){var r=It();return Im(r,lt,i)}function Im(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=i.baseQueue,g=u.pending;if(g!==null){if(m!==null){var b=m.next;m.next=g.next,g.next=b}r.baseQueue=m=g,u.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{r=m.next;var x=b=null,k=null,K=r,ee=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Fe&ie)===ie:(Es&ie)===ie){var Q=K.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Eo&&(ee=!0);else if((Es&Q)===Q){K=K.next,Q===Eo&&(ee=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(x=k=ie,b=g):k=k.next=ie,ke.lanes|=Q,gr|=Q;ie=K.action,wa&&o(g,ie),g=K.hasEagerState?K.eagerState:o(g,ie)}else Q={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(x=k=Q,b=g):k=k.next=Q,ke.lanes|=ie,gr|=ie;K=K.next}while(K!==null&&K!==r);if(k===null?b=g:k.next=x,!Ln(g,i.memoizedState)&&(Ut=!0,ee&&(o=So,o!==null)))throw o;i.memoizedState=g,i.baseState=b,i.baseQueue=k,u.lastRenderedState=g}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Dm(i){var r=It(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,m=o.pending,g=r.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do g=i(g,b.action),b=b.next;while(b!==m);Ln(g,r.memoizedState)||(Ut=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,u]}function Qv(i,r,o){var u=ke,m=It(),g=Ke;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=r();var b=!Ln((lt||m).memoizedState,o);if(b&&(m.memoizedState=o,Ut=!0),m=m.queue,Vm(Jv.bind(null,u,m,i),[i]),m.getSnapshot!==r||b||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,Io(9,{destroy:void 0},Wv.bind(null,u,m,o,r),null),ht===null)throw Error(s(349));g||(Es&127)!==0||Xv(u,r,o)}return o}function Xv(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=ke.updateQueue,r===null?(r=vh(),ke.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function Wv(i,r,o,u){r.value=o,r.getSnapshot=u,Zv(r)&&e_(i)}function Jv(i,r,o){return o(function(){Zv(r)&&e_(i)})}function Zv(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!Ln(i,o)}catch{return!0}}function e_(i){var r=ga(i,2);r!==null&&Nn(r,i,2)}function Mm(i){var r=En();if(typeof i=="function"){var o=i;if(i=o(),wa){Kn(!0);try{o()}finally{Kn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:i},r}function t_(i,r,o,u){return i.baseState=o,Im(i,lt,typeof u=="function"?u:Ss)}function vC(i,r,o,u,m){if(Sh(i))throw Error(s(485));if(i=r.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};J.T!==null?o(!0):g.isTransition=!1,u(g),o=r.pending,o===null?(g.next=r.pending=g,n_(r,g)):(g.next=o.next,r.pending=o.next=g)}}function n_(i,r){var o=r.action,u=r.payload,m=i.state;if(r.isTransition){var g=J.T,b={};J.T=b;try{var x=o(m,u),k=J.S;k!==null&&k(b,x),i_(i,r,x)}catch(K){Nm(i,r,K)}finally{g!==null&&b.types!==null&&(g.types=b.types),J.T=g}}else try{g=o(m,u),i_(i,r,g)}catch(K){Nm(i,r,K)}}function i_(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){s_(i,r,u)},function(u){return Nm(i,r,u)}):s_(i,r,o)}function s_(i,r,o){r.status="fulfilled",r.value=o,r_(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,n_(i,o)))}function Nm(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,r_(r),r=r.next;while(r!==u)}i.action=null}function r_(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function a_(i,r){return r}function o_(i,r){if(Ke){var o=ht.formState;if(o!==null){e:{var u=ke;if(Ke){if(dt){t:{for(var m=dt,g=ni;m.nodeType!==8;){if(!g){m=null;break t}if(m=si(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){dt=si(m.nextSibling),u=m.data==="F!";break e}}or(u)}u=!1}u&&(r=o[0])}}return o=En(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a_,lastRenderedState:r},o.queue=u,o=A_.bind(null,ke,u),u.dispatch=o,u=Mm(!1),g=Lm.bind(null,ke,!1,u.queue),u=En(),m={state:r,dispatch:null,action:i,pending:null},u.queue=m,o=vC.bind(null,ke,m,g,o),m.dispatch=o,u.memoizedState=i,[r,o,!1]}function l_(i){var r=It();return u_(r,lt,i)}function u_(i,r,o){if(r=Im(i,r,a_)[0],i=Th(Ss)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=iu(r)}catch(b){throw b===xo?ch:b}else u=r;r=It();var m=r.queue,g=m.dispatch;return o!==r.memoizedState&&(ke.flags|=2048,Io(9,{destroy:void 0},_C.bind(null,m,o),null)),[u,g,i]}function _C(i,r){i.action=r}function c_(i){var r=It(),o=lt;if(o!==null)return u_(r,o,i);It(),r=r.memoizedState,o=It();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function Io(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=ke.updateQueue,r===null&&(r=vh(),ke.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function h_(){return It().memoizedState}function bh(i,r,o,u){var m=En();ke.flags|=i,m.memoizedState=Io(1|r,{destroy:void 0},o,u===void 0?null:u)}function Eh(i,r,o,u){var m=It();u=u===void 0?null:u;var g=m.memoizedState.inst;lt!==null&&u!==null&&Sm(u,lt.memoizedState.deps)?m.memoizedState=Io(r,g,o,u):(ke.flags|=i,m.memoizedState=Io(1|r,g,o,u))}function f_(i,r){bh(8390656,8,i,r)}function Vm(i,r){Eh(2048,8,i,r)}function TC(i){ke.flags|=4;var r=ke.updateQueue;if(r===null)r=vh(),ke.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function d_(i){var r=It().memoizedState;return TC({ref:r,nextImpl:i}),function(){if((Ze&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function m_(i,r){return Eh(4,2,i,r)}function p_(i,r){return Eh(4,4,i,r)}function g_(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function y_(i,r,o){o=o!=null?o.concat([i]):null,Eh(4,4,g_.bind(null,r,i),o)}function Om(){}function v_(i,r){var o=It();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Sm(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function __(i,r){var o=It();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Sm(r,u[1]))return u[0];if(u=i(),wa){Kn(!0);try{i()}finally{Kn(!1)}}return o.memoizedState=[u,r],u}function Pm(i,r,o){return o===void 0||(Es&1073741824)!==0&&(Fe&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=T1(),ke.lanes|=i,gr|=i,o)}function T_(i,r,o,u){return Ln(o,r)?o:Ao.current!==null?(i=Pm(i,o,u),Ln(i,r)||(Ut=!0),i):(Es&42)===0||(Es&1073741824)!==0&&(Fe&261930)===0?(Ut=!0,i.memoizedState=o):(i=T1(),ke.lanes|=i,gr|=i,r)}function b_(i,r,o,u,m){var g=oe.p;oe.p=g!==0&&8>g?g:8;var b=J.T,x={};J.T=x,Lm(i,!1,r,o);try{var k=m(),K=J.S;if(K!==null&&K(x,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=pC(k,u);su(i,r,ee,qn(i))}else su(i,r,u,qn(i))}catch(ie){su(i,r,{then:function(){},status:"rejected",reason:ie},qn())}finally{oe.p=g,b!==null&&x.types!==null&&(b.types=x.types),J.T=b}}function bC(){}function km(i,r,o,u){if(i.tag!==5)throw Error(s(476));var m=E_(i).queue;b_(i,m,r,ne,o===null?bC:function(){return S_(i),o(u)})}function E_(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:ne},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function S_(i){var r=E_(i);r.next===null&&(r=i.alternate.memoizedState),su(i,r.next.queue,{},qn())}function jm(){return on(bu)}function x_(){return It().memoizedState}function w_(){return It().memoizedState}function EC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=qn();i=cr(o);var u=hr(r,i,o);u!==null&&(Nn(u,r,o),Zl(u,r,o)),r={cache:fm()},i.payload=r;return}r=r.return}}function SC(i,r,o){var u=qn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sh(i)?R_(r,o):(o=tm(i,r,o,u),o!==null&&(Nn(o,i,u),C_(o,r,u)))}function A_(i,r,o){var u=qn();su(i,r,o,u)}function su(i,r,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Sh(i))R_(r,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,x=g(b,o);if(m.hasEagerState=!0,m.eagerState=x,Ln(x,b))return ih(i,r,m,0),ht===null&&nh(),!1}catch{}if(o=tm(i,r,m,u),o!==null)return Nn(o,i,u),C_(o,r,u),!0}return!1}function Lm(i,r,o,u){if(u={lane:2,revertLane:gp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sh(i)){if(r)throw Error(s(479))}else r=tm(i,o,u,2),r!==null&&Nn(r,i,2)}function Sh(i){var r=i.alternate;return i===ke||r!==null&&r===ke}function R_(i,r){Ro=gh=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function C_(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Al(i,o)}}var ru={readContext:on,use:_h,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};ru.useEffectEvent=Et;var I_={readContext:on,use:_h,useCallback:function(i,r){return En().memoizedState=[i,r===void 0?null:r],i},useContext:on,useEffect:f_,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,bh(4194308,4,g_.bind(null,r,i),o)},useLayoutEffect:function(i,r){return bh(4194308,4,i,r)},useInsertionEffect:function(i,r){bh(4,2,i,r)},useMemo:function(i,r){var o=En();r=r===void 0?null:r;var u=i();if(wa){Kn(!0);try{i()}finally{Kn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=En();if(o!==void 0){var m=o(r);if(wa){Kn(!0);try{o(r)}finally{Kn(!1)}}}else m=r;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=SC.bind(null,ke,i),[u.memoizedState,i]},useRef:function(i){var r=En();return i={current:i},r.memoizedState=i},useState:function(i){i=Mm(i);var r=i.queue,o=A_.bind(null,ke,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Om,useDeferredValue:function(i,r){var o=En();return Pm(o,i,r)},useTransition:function(){var i=Mm(!1);return i=b_.bind(null,ke,i.queue,!0,!1),En().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=ke,m=En();if(Ke){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),ht===null)throw Error(s(349));(Fe&127)!==0||Xv(u,r,o)}m.memoizedState=o;var g={value:o,getSnapshot:r};return m.queue=g,f_(Jv.bind(null,u,g,i),[i]),u.flags|=2048,Io(9,{destroy:void 0},Wv.bind(null,u,g,o,r),null),o},useId:function(){var i=En(),r=ht.identifierPrefix;if(Ke){var o=es,u=Zi;o=(u&~(1<<32-At(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=yh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=gC++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:jm,useFormState:o_,useActionState:o_,useOptimistic:function(i){var r=En();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Lm.bind(null,ke,!0,o),o.dispatch=r,[i,r]},useMemoCache:Cm,useCacheRefresh:function(){return En().memoizedState=EC.bind(null,ke)},useEffectEvent:function(i){var r=En(),o={impl:i};return r.memoizedState=o,function(){if((Ze&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Um={readContext:on,use:_h,useCallback:v_,useContext:on,useEffect:Vm,useImperativeHandle:y_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:__,useReducer:Th,useRef:h_,useState:function(){return Th(Ss)},useDebugValue:Om,useDeferredValue:function(i,r){var o=It();return T_(o,lt.memoizedState,i,r)},useTransition:function(){var i=Th(Ss)[0],r=It().memoizedState;return[typeof i=="boolean"?i:iu(i),r]},useSyncExternalStore:Qv,useId:x_,useHostTransitionStatus:jm,useFormState:l_,useActionState:l_,useOptimistic:function(i,r){var o=It();return t_(o,lt,i,r)},useMemoCache:Cm,useCacheRefresh:w_};Um.useEffectEvent=d_;var D_={readContext:on,use:_h,useCallback:v_,useContext:on,useEffect:Vm,useImperativeHandle:y_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:__,useReducer:Dm,useRef:h_,useState:function(){return Dm(Ss)},useDebugValue:Om,useDeferredValue:function(i,r){var o=It();return lt===null?Pm(o,i,r):T_(o,lt.memoizedState,i,r)},useTransition:function(){var i=Dm(Ss)[0],r=It().memoizedState;return[typeof i=="boolean"?i:iu(i),r]},useSyncExternalStore:Qv,useId:x_,useHostTransitionStatus:jm,useFormState:c_,useActionState:c_,useOptimistic:function(i,r){var o=It();return lt!==null?t_(o,lt,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Cm,useCacheRefresh:w_};D_.useEffectEvent=d_;function zm(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:T({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Bm={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=qn(),m=cr(u);m.payload=r,o!=null&&(m.callback=o),r=hr(i,m,u),r!==null&&(Nn(r,i,u),Zl(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=qn(),m=cr(u);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=hr(i,m,u),r!==null&&(Nn(r,i,u),Zl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=qn(),u=cr(o);u.tag=2,r!=null&&(u.callback=r),r=hr(i,u,o),r!==null&&(Nn(r,i,o),Zl(r,i,o))}};function M_(i,r,o,u,m,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,b):r.prototype&&r.prototype.isPureReactComponent?!Gl(o,u)||!Gl(m,g):!0}function N_(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Bm.enqueueReplaceState(r,r.state,null)}function Aa(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=T({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}function V_(i){th(i)}function O_(i){console.error(i)}function P_(i){th(i)}function xh(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function k_(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Fm(i,r,o){return o=cr(o),o.tag=3,o.payload={element:null},o.callback=function(){xh(i,r)},o}function j_(i){return i=cr(i),i.tag=3,i}function L_(i,r,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;i.payload=function(){return m(g)},i.callback=function(){k_(r,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){k_(r,o,u),typeof m!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function xC(i,r,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&bo(r,o,m,!0),o=zn.current,o!==null){switch(o.tag){case 31:case 13:return ii===null?kh():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===hh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),dp(i,u,m)),!1;case 22:return o.flags|=65536,u===hh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),dp(i,u,m)),!1}throw Error(s(435,o.tag))}return dp(i,u,m),kh(),!1}if(Ke)return r=zn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,u!==om&&(i=Error(s(422),{cause:u}),Yl(Zn(i,o)))):(u!==om&&(r=Error(s(423),{cause:u}),Yl(Zn(r,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Zn(u,o),m=Fm(i.stateNode,u,m),vm(i,m),St!==4&&(St=2)),!1;var g=Error(s(520),{cause:u});if(g=Zn(g,o),du===null?du=[g]:du.push(g),St!==4&&(St=2),r===null)return!0;u=Zn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=Fm(o.stateNode,u,i),vm(o,i),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(yr===null||!yr.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=j_(m),L_(m,i,o,u),vm(o,m),!1}o=o.return}while(o!==null);return!1}var Hm=Error(s(461)),Ut=!1;function ln(i,r,o,u){r.child=i===null?Fv(r,null,o,u):xa(r,i.child,o,u)}function U_(i,r,o,u,m){o=o.render;var g=r.ref;if("ref"in u){var b={};for(var x in u)x!=="ref"&&(b[x]=u[x])}else b=u;return Ta(r),u=xm(i,r,o,b,g,m),x=wm(),i!==null&&!Ut?(Am(i,r,m),xs(i,r,m)):(Ke&&x&&rm(r),r.flags|=1,ln(i,r,u,m),r.child)}function z_(i,r,o,u,m){if(i===null){var g=o.type;return typeof g=="function"&&!nm(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,B_(i,r,g,u,m)):(i=rh(o.type,null,u,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(g=i.child,!Wm(i,m)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Gl,o(b,u)&&i.ref===r.ref)return xs(i,r,m)}return r.flags|=1,i=vs(g,u),i.ref=r.ref,i.return=r,r.child=i}function B_(i,r,o,u,m){if(i!==null){var g=i.memoizedProps;if(Gl(g,u)&&i.ref===r.ref)if(Ut=!1,r.pendingProps=u=g,Wm(i,m))(i.flags&131072)!==0&&(Ut=!0);else return r.lanes=i.lanes,xs(i,r,m)}return qm(i,r,o,u,m)}function F_(i,r,o,u){var m=u.children,g=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(u=r.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~g}else u=0,r.child=null;return H_(i,r,g,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&uh(r,g!==null?g.cachePool:null),g!==null?Gv(r,g):Tm(),$v(r);else return u=r.lanes=536870912,H_(i,r,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(uh(r,g.cachePool),Gv(r,g),dr(),r.memoizedState=null):(i!==null&&uh(r,null),Tm(),dr());return ln(i,r,m,o),r.child}function au(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function H_(i,r,o,u,m){var g=mm();return g=g===null?null:{parent:jt._currentValue,pool:g},r.memoizedState={baseLanes:o,cachePool:g},i!==null&&uh(r,null),Tm(),$v(r),i!==null&&bo(i,r,u,!0),r.childLanes=m,null}function wh(i,r){return r=Rh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function q_(i,r,o){return xa(r,i.child,null,o),i=wh(r,r.pendingProps),i.flags|=2,Bn(r),r.memoizedState=null,i}function wC(i,r,o){var u=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ke){if(u.mode==="hidden")return i=wh(r,u),r.lanes=536870912,au(null,i);if(Em(r),(i=dt)?(i=nT(i,ni),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:rr!==null?{id:Zi,overflow:es}:null,retryLane:536870912,hydrationErrors:null},o=Rv(i),o.return=r,r.child=o,an=r,dt=null)):i=null,i===null)throw or(r);return r.lanes=536870912,null}return wh(r,u)}var g=i.memoizedState;if(g!==null){var b=g.dehydrated;if(Em(r),m)if(r.flags&256)r.flags&=-257,r=q_(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ut||bo(i,r,o,!1),m=(o&i.childLanes)!==0,Ut||m){if(u=ht,u!==null&&(b=Rl(u,o),b!==0&&b!==g.retryLane))throw g.retryLane=b,ga(i,b),Nn(u,i,b),Hm;kh(),r=q_(i,r,o)}else i=g.treeContext,dt=si(b.nextSibling),an=r,Ke=!0,ar=null,ni=!1,i!==null&&Dv(r,i),r=wh(r,u),r.flags|=4096;return r}return i=vs(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Ah(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function qm(i,r,o,u,m){return Ta(r),o=xm(i,r,o,u,void 0,m),u=wm(),i!==null&&!Ut?(Am(i,r,m),xs(i,r,m)):(Ke&&u&&rm(r),r.flags|=1,ln(i,r,o,m),r.child)}function G_(i,r,o,u,m,g){return Ta(r),r.updateQueue=null,o=Yv(r,u,o,m),Kv(i),u=wm(),i!==null&&!Ut?(Am(i,r,g),xs(i,r,g)):(Ke&&u&&rm(r),r.flags|=1,ln(i,r,o,g),r.child)}function $_(i,r,o,u,m){if(Ta(r),r.stateNode===null){var g=yo,b=o.contextType;typeof b=="object"&&b!==null&&(g=on(b)),g=new o(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Bm,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},gm(r),b=o.contextType,g.context=typeof b=="object"&&b!==null?on(b):yo,g.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(zm(r,o,b,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Bm.enqueueReplaceState(g,g.state,null),tu(r,u,g,m),eu(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){g=r.stateNode;var x=r.memoizedProps,k=Aa(o,x);g.props=k;var K=g.context,ee=o.contextType;b=yo,typeof ee=="object"&&ee!==null&&(b=on(ee));var ie=o.getDerivedStateFromProps;ee=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,ee||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||K!==b)&&N_(r,g,u,b),ur=!1;var Q=r.memoizedState;g.state=Q,tu(r,u,g,m),eu(),K=r.memoizedState,x||Q!==K||ur?(typeof ie=="function"&&(zm(r,o,ie,u),K=r.memoizedState),(k=ur||M_(r,o,k,u,Q,K,b))?(ee||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=K),g.props=u,g.state=K,g.context=b,u=k):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,ym(i,r),b=r.memoizedProps,ee=Aa(o,b),g.props=ee,ie=r.pendingProps,Q=g.context,K=o.contextType,k=yo,typeof K=="object"&&K!==null&&(k=on(K)),x=o.getDerivedStateFromProps,(K=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ie||Q!==k)&&N_(r,g,u,k),ur=!1,Q=r.memoizedState,g.state=Q,tu(r,u,g,m),eu();var W=r.memoizedState;b!==ie||Q!==W||ur||i!==null&&i.dependencies!==null&&oh(i.dependencies)?(typeof x=="function"&&(zm(r,o,x,u),W=r.memoizedState),(ee=ur||M_(r,o,ee,u,Q,W,k)||i!==null&&i.dependencies!==null&&oh(i.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,W,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,W,k)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=W),g.props=u,g.state=W,g.context=k,u=ee):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),u=!1)}return g=u,Ah(i,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,i!==null&&u?(r.child=xa(r,i.child,null,m),r.child=xa(r,null,o,m)):ln(i,r,o,m),r.memoizedState=g.state,i=r.child):i=xs(i,r,m),i}function K_(i,r,o,u){return va(),r.flags|=256,ln(i,r,o,u),r.child}var Gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $m(i){return{baseLanes:i,cachePool:kv()}}function Km(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=Hn),i}function Y_(i,r,o){var u=r.pendingProps,m=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(Ct.current&2)!==0),b&&(m=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ke){if(m?fr(r):dr(),(i=dt)?(i=nT(i,ni),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:rr!==null?{id:Zi,overflow:es}:null,retryLane:536870912,hydrationErrors:null},o=Rv(i),o.return=r,r.child=o,an=r,dt=null)):i=null,i===null)throw or(r);return Ip(i)?r.lanes=32:r.lanes=536870912,null}var x=u.children;return u=u.fallback,m?(dr(),m=r.mode,x=Rh({mode:"hidden",children:x},m),u=ya(u,m,o,null),x.return=r,u.return=r,x.sibling=u,r.child=x,u=r.child,u.memoizedState=$m(o),u.childLanes=Km(i,b,o),r.memoizedState=Gm,au(null,u)):(fr(r),Ym(r,x))}var k=i.memoizedState;if(k!==null&&(x=k.dehydrated,x!==null)){if(g)r.flags&256?(fr(r),r.flags&=-257,r=Qm(i,r,o)):r.memoizedState!==null?(dr(),r.child=i.child,r.flags|=128,r=null):(dr(),x=u.fallback,m=r.mode,u=Rh({mode:"visible",children:u.children},m),x=ya(x,m,o,null),x.flags|=2,u.return=r,x.return=r,u.sibling=x,r.child=u,xa(r,i.child,null,o),u=r.child,u.memoizedState=$m(o),u.childLanes=Km(i,b,o),r.memoizedState=Gm,r=au(null,u));else if(fr(r),Ip(x)){if(b=x.nextSibling&&x.nextSibling.dataset,b)var K=b.dgst;b=K,u=Error(s(419)),u.stack="",u.digest=b,Yl({value:u,source:null,stack:null}),r=Qm(i,r,o)}else if(Ut||bo(i,r,o,!1),b=(o&i.childLanes)!==0,Ut||b){if(b=ht,b!==null&&(u=Rl(b,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,ga(i,u),Nn(b,i,u),Hm;Cp(x)||kh(),r=Qm(i,r,o)}else Cp(x)?(r.flags|=192,r.child=i.child,r=null):(i=k.treeContext,dt=si(x.nextSibling),an=r,Ke=!0,ar=null,ni=!1,i!==null&&Dv(r,i),r=Ym(r,u.children),r.flags|=4096);return r}return m?(dr(),x=u.fallback,m=r.mode,k=i.child,K=k.sibling,u=vs(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,K!==null?x=vs(K,x):(x=ya(x,m,o,null),x.flags|=2),x.return=r,u.return=r,u.sibling=x,r.child=u,au(null,u),u=r.child,x=i.child.memoizedState,x===null?x=$m(o):(m=x.cachePool,m!==null?(k=jt._currentValue,m=m.parent!==k?{parent:k,pool:k}:m):m=kv(),x={baseLanes:x.baseLanes|o,cachePool:m}),u.memoizedState=x,u.childLanes=Km(i,b,o),r.memoizedState=Gm,au(i.child,u)):(fr(r),o=i.child,i=o.sibling,o=vs(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=o,r.memoizedState=null,o)}function Ym(i,r){return r=Rh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Rh(i,r){return i=Un(22,i,null,r),i.lanes=0,i}function Qm(i,r,o){return xa(r,i.child,null,o),i=Ym(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Q_(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),cm(i.return,r,o)}function Xm(i,r,o,u,m,g){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:g}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=g)}function X_(i,r,o){var u=r.pendingProps,m=u.revealOrder,g=u.tail;u=u.children;var b=Ct.current,x=(b&2)!==0;if(x?(b=b&1|2,r.flags|=128):b&=1,le(Ct,b),ln(i,r,u,o),u=Ke?Kl:0,!x&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Q_(i,o,r);else if(i.tag===19)Q_(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(o=r.child,m=null;o!==null;)i=o.alternate,i!==null&&ph(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Xm(r,!1,m,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&ph(i)===null){r.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}Xm(r,!0,o,null,g,u);break;case"together":Xm(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function xs(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),gr|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(bo(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=vs(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=vs(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function Wm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&oh(i)))}function AC(i,r,o){switch(r.tag){case 3:Ae(r,r.stateNode.containerInfo),lr(r,jt,i.memoizedState.cache),va();break;case 27:case 5:de(r);break;case 4:Ae(r,r.stateNode.containerInfo);break;case 10:lr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Em(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(fr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Y_(i,r,o):(fr(r),i=xs(i,r,o),i!==null?i.sibling:null);fr(r);break;case 19:var m=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(bo(i,r,o,!1),u=(o&r.childLanes)!==0),m){if(u)return X_(i,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),le(Ct,Ct.current),u)break;return null;case 22:return r.lanes=0,F_(i,r,o,r.pendingProps);case 24:lr(r,jt,i.memoizedState.cache)}return xs(i,r,o)}function W_(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ut=!0;else{if(!Wm(i,o)&&(r.flags&128)===0)return Ut=!1,AC(i,r,o);Ut=(i.flags&131072)!==0}else Ut=!1,Ke&&(r.flags&1048576)!==0&&Iv(r,Kl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Ea(r.elementType),r.type=i,typeof i=="function")nm(i)?(u=Aa(i,u),r.tag=1,r=$_(null,r,i,u,o)):(r.tag=0,r=qm(null,r,i,u,o));else{if(i!=null){var m=i.$$typeof;if(m===ue){r.tag=11,r=U_(null,r,i,u,o);break e}else if(m===C){r.tag=14,r=z_(null,r,i,u,o);break e}}throw r=_e(i)||i,Error(s(306,r,""))}}return r;case 0:return qm(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,m=Aa(u,r.pendingProps),$_(i,r,u,m,o);case 3:e:{if(Ae(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var g=r.memoizedState;m=g.element,ym(i,r),tu(r,u,null,o);var b=r.memoizedState;if(u=b.cache,lr(r,jt,u),u!==g.cache&&hm(r,[jt],o,!0),eu(),u=b.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=K_(i,r,u,o);break e}else if(u!==m){m=Zn(Error(s(424)),r),Yl(m),r=K_(i,r,u,o);break e}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,dt=si(i.firstChild),an=r,Ke=!0,ar=null,ni=!0,o=Fv(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(va(),u===m){r=xs(i,r,o);break e}ln(i,r,u,o)}r=r.child}return r;case 26:return Ah(i,r),i===null?(o=lT(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ke||(o=r.type,i=r.pendingProps,u=Hh(he.current).createElement(o),u[Ot]=r,u[Wt]=i,un(u,o,i),Pt(u),r.stateNode=u):r.memoizedState=lT(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return de(r),i===null&&Ke&&(u=r.stateNode=rT(r.type,r.pendingProps,he.current),an=r,ni=!0,m=dt,br(r.type)?(Dp=m,dt=si(u.firstChild)):dt=m),ln(i,r,r.pendingProps.children,o),Ah(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ke&&((m=u=dt)&&(u=nI(u,r.type,r.pendingProps,ni),u!==null?(r.stateNode=u,an=r,dt=si(u.firstChild),ni=!1,m=!0):m=!1),m||or(r)),de(r),m=r.type,g=r.pendingProps,b=i!==null?i.memoizedProps:null,u=g.children,wp(m,g)?u=null:b!==null&&wp(m,b)&&(r.flags|=32),r.memoizedState!==null&&(m=xm(i,r,yC,null,null,o),bu._currentValue=m),Ah(i,r),ln(i,r,u,o),r.child;case 6:return i===null&&Ke&&((i=o=dt)&&(o=iI(o,r.pendingProps,ni),o!==null?(r.stateNode=o,an=r,dt=null,i=!0):i=!1),i||or(r)),null;case 13:return Y_(i,r,o);case 4:return Ae(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=xa(r,null,u,o):ln(i,r,u,o),r.child;case 11:return U_(i,r,r.type,r.pendingProps,o);case 7:return ln(i,r,r.pendingProps,o),r.child;case 8:return ln(i,r,r.pendingProps.children,o),r.child;case 12:return ln(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,lr(r,r.type,u.value),ln(i,r,u.children,o),r.child;case 9:return m=r.type._context,u=r.pendingProps.children,Ta(r),m=on(m),u=u(m),r.flags|=1,ln(i,r,u,o),r.child;case 14:return z_(i,r,r.type,r.pendingProps,o);case 15:return B_(i,r,r.type,r.pendingProps,o);case 19:return X_(i,r,o);case 31:return wC(i,r,o);case 22:return F_(i,r,o,r.pendingProps);case 24:return Ta(r),u=on(jt),i===null?(m=mm(),m===null&&(m=ht,g=fm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),r.memoizedState={parent:u,cache:m},gm(r),lr(r,jt,m)):((i.lanes&o)!==0&&(ym(i,r),tu(r,null,null,o),eu()),m=i.memoizedState,g=r.memoizedState,m.parent!==u?(m={parent:u,cache:u},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),lr(r,jt,u)):(u=g.cache,lr(r,jt,u),u!==m.cache&&hm(r,[jt],o,!0))),ln(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ws(i){i.flags|=4}function Jm(i,r,o,u,m){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(x1())i.flags|=8192;else throw Sa=hh,pm}else i.flags&=-16777217}function J_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!dT(r))if(x1())i.flags|=8192;else throw Sa=hh,pm}function Ch(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Oc():536870912,i.lanes|=r,Vo|=r)}function ou(i,r){if(!Ke)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function mt(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function RC(i,r,o){var u=r.pendingProps;switch(am(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),bs(jt),Ie(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(To(r)?ws(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,lm())),mt(r),null;case 26:var m=r.type,g=r.memoizedState;return i===null?(ws(r),g!==null?(mt(r),J_(r,g)):(mt(r),Jm(r,m,null,u,o))):g?g!==i.memoizedState?(ws(r),mt(r),J_(r,g)):(mt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&ws(r),mt(r),Jm(r,m,i,u,o)),null;case 27:if(Le(r),o=he.current,m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ws(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return mt(r),null}i=me.current,To(r)?Mv(r):(i=rT(m,u,o),r.stateNode=i,ws(r))}return mt(r),null;case 5:if(Le(r),m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ws(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return mt(r),null}if(g=me.current,To(r))Mv(r);else{var b=Hh(he.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}g[Ot]=r,g[Wt]=u;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=g;e:switch(un(g,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ws(r)}}return mt(r),Jm(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&ws(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=he.current,To(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,m=an,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[Ot]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Y1(i.nodeValue,o)),i||or(r,!0)}else i=Hh(i).createTextNode(u),i[Ot]=r,r.stateNode=i}return mt(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(u=To(r),o!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ot]=r}else va(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),i=!1}else o=lm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(Bn(r),r):(Bn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return mt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=To(r),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ot]=r}else va(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),m=!1}else m=lm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(Bn(r),r):(Bn(r),null)}return Bn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=r.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),Ch(r,r.updateQueue),mt(r),null);case 4:return Ie(),i===null&&Tp(r.stateNode.containerInfo),mt(r),null;case 10:return bs(r.type),mt(r),null;case 19:if(Z(Ct),u=r.memoizedState,u===null)return mt(r),null;if(m=(r.flags&128)!==0,g=u.rendering,g===null)if(m)ou(u,!1);else{if(St!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(g=ph(i),g!==null){for(r.flags|=128,ou(u,!1),i=g.updateQueue,r.updateQueue=i,Ch(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)Av(o,i),o=o.sibling;return le(Ct,Ct.current&1|2),Ke&&_s(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&Tn()>Vh&&(r.flags|=128,m=!0,ou(u,!1),r.lanes=4194304)}else{if(!m)if(i=ph(g),i!==null){if(r.flags|=128,m=!0,i=i.updateQueue,r.updateQueue=i,Ch(r,i),ou(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Ke)return mt(r),null}else 2*Tn()-u.renderingStartTime>Vh&&o!==536870912&&(r.flags|=128,m=!0,ou(u,!1),r.lanes=4194304);u.isBackwards?(g.sibling=r.child,r.child=g):(i=u.last,i!==null?i.sibling=g:r.child=g,u.last=g)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Tn(),i.sibling=null,o=Ct.current,le(Ct,m?o&1|2:o&1),Ke&&_s(r,u.treeForkCount),i):(mt(r),null);case 22:case 23:return Bn(r),bm(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),o=r.updateQueue,o!==null&&Ch(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&Z(ba),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),bs(jt),mt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function CC(i,r){switch(am(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return bs(jt),Ie(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Le(r),null;case 31:if(r.memoizedState!==null){if(Bn(r),r.alternate===null)throw Error(s(340));va()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Bn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));va()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Z(Ct),null;case 4:return Ie(),null;case 10:return bs(r.type),null;case 22:case 23:return Bn(r),bm(),i!==null&&Z(ba),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return bs(jt),null;case 25:return null;default:return null}}function Z_(i,r){switch(am(r),r.tag){case 3:bs(jt),Ie();break;case 26:case 27:case 5:Le(r);break;case 4:Ie();break;case 31:r.memoizedState!==null&&Bn(r);break;case 13:Bn(r);break;case 19:Z(Ct);break;case 10:bs(r.type);break;case 22:case 23:Bn(r),bm(),i!==null&&Z(ba);break;case 24:bs(jt)}}function lu(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&i)===i){u=void 0;var g=o.create,b=o.inst;u=g(),b.destroy=u}o=o.next}while(o!==m)}}catch(x){at(r,r.return,x)}}function mr(i,r,o){try{var u=r.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&i)===i){var b=u.inst,x=b.destroy;if(x!==void 0){b.destroy=void 0,m=r;var k=o,K=x;try{K()}catch(ee){at(m,k,ee)}}}u=u.next}while(u!==g)}}catch(ee){at(r,r.return,ee)}}function e1(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{qv(r,o)}catch(u){at(i,i.return,u)}}}function t1(i,r,o){o.props=Aa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){at(i,r,u)}}function uu(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(m){at(i,r,m)}}function ts(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){at(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){at(i,r,m)}else o.current=null}function n1(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){at(i,i.return,m)}}function Zm(i,r,o){try{var u=i.stateNode;XC(u,i.type,o,r),u[Wt]=r}catch(m){at(i,i.return,m)}}function i1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&br(i.type)||i.tag===4}function ep(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||i1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&br(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function tp(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=vi));else if(u!==4&&(u===27&&br(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(tp(i,r,o),i=i.sibling;i!==null;)tp(i,r,o),i=i.sibling}function Ih(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&br(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Ih(i,r,o),i=i.sibling;i!==null;)Ih(i,r,o),i=i.sibling}function s1(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);un(r,u,o),r[Ot]=i,r[Wt]=o}catch(g){at(i,i.return,g)}}var As=!1,zt=!1,np=!1,r1=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function IC(i,r){if(i=i.containerInfo,Sp=Xh,i=yv(i),Qd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,x=-1,k=-1,K=0,ee=0,ie=i,Q=null;t:for(;;){for(var W;ie!==o||m!==0&&ie.nodeType!==3||(x=b+m),ie!==g||u!==0&&ie.nodeType!==3||(k=b+u),ie.nodeType===3&&(b+=ie.nodeValue.length),(W=ie.firstChild)!==null;)Q=ie,ie=W;for(;;){if(ie===i)break t;if(Q===o&&++K===m&&(x=b),Q===g&&++ee===u&&(k=b),(W=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=W}o=x===-1||k===-1?null:{start:x,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(xp={focusedElem:i,selectionRange:o},Xh=!1,Zt=r;Zt!==null;)if(r=Zt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Zt=i;else for(;Zt!==null;){switch(r=Zt,g=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)m=i[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=r,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var ve=Aa(o.type,m);i=u.getSnapshotBeforeUpdate(ve,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(we){at(o,o.return,we)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Rp(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Zt=i;break}Zt=r.return}}function a1(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Cs(i,o),u&4&&lu(5,o);break;case 1:if(Cs(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(b){at(o,o.return,b)}else{var m=Aa(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){at(o,o.return,b)}}u&64&&e1(o),u&512&&uu(o,o.return);break;case 3:if(Cs(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{qv(i,r)}catch(b){at(o,o.return,b)}}break;case 27:r===null&&u&4&&s1(o);case 26:case 5:Cs(i,o),r===null&&u&4&&n1(o),u&512&&uu(o,o.return);break;case 12:Cs(i,o);break;case 31:Cs(i,o),u&4&&u1(i,o);break;case 13:Cs(i,o),u&4&&c1(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=LC.bind(null,o),sI(i,o))));break;case 22:if(u=o.memoizedState!==null||As,!u){r=r!==null&&r.memoizedState!==null||zt,m=As;var g=zt;As=u,(zt=r)&&!g?Is(i,o,(o.subtreeFlags&8772)!==0):Cs(i,o),As=m,zt=g}break;case 30:break;default:Cs(i,o)}}function o1(i){var r=i.alternate;r!==null&&(i.alternate=null,o1(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&no(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Cn=!1;function Rs(i,r,o){for(o=o.child;o!==null;)l1(i,r,o),o=o.sibling}function l1(i,r,o){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(mi,o)}catch{}switch(o.tag){case 26:zt||ts(o,r),Rs(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:zt||ts(o,r);var u=vt,m=Cn;br(o.type)&&(vt=o.stateNode,Cn=!1),Rs(i,r,o),vu(o.stateNode),vt=u,Cn=m;break;case 5:zt||ts(o,r);case 6:if(u=vt,m=Cn,vt=null,Rs(i,r,o),vt=u,Cn=m,vt!==null)if(Cn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(g){at(o,r,g)}else try{vt.removeChild(o.stateNode)}catch(g){at(o,r,g)}break;case 18:vt!==null&&(Cn?(i=vt,eT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Bo(i)):eT(vt,o.stateNode));break;case 4:u=vt,m=Cn,vt=o.stateNode.containerInfo,Cn=!0,Rs(i,r,o),vt=u,Cn=m;break;case 0:case 11:case 14:case 15:mr(2,o,r),zt||mr(4,o,r),Rs(i,r,o);break;case 1:zt||(ts(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&t1(o,r,u)),Rs(i,r,o);break;case 21:Rs(i,r,o);break;case 22:zt=(u=zt)||o.memoizedState!==null,Rs(i,r,o),zt=u;break;default:Rs(i,r,o)}}function u1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Bo(i)}catch(o){at(r,r.return,o)}}}function c1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Bo(i)}catch(o){at(r,r.return,o)}}function DC(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new r1),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new r1),r;default:throw Error(s(435,i.tag))}}function Dh(i,r){var o=DC(i);r.forEach(function(u){if(!o.has(u)){o.add(u);var m=UC.bind(null,i,u);u.then(m,m)}})}function In(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=i,b=r,x=b;e:for(;x!==null;){switch(x.tag){case 27:if(br(x.type)){vt=x.stateNode,Cn=!1;break e}break;case 5:vt=x.stateNode,Cn=!1;break e;case 3:case 4:vt=x.stateNode.containerInfo,Cn=!0;break e}x=x.return}if(vt===null)throw Error(s(160));l1(g,b,m),vt=null,Cn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)h1(r,i),r=r.sibling}var xi=null;function h1(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:In(r,i),Dn(i),u&4&&(mr(3,i,i.return),lu(3,i),mr(5,i,i.return));break;case 1:In(r,i),Dn(i),u&512&&(zt||o===null||ts(o,o.return)),u&64&&As&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=xi;if(In(r,i),Dn(i),u&512&&(zt||o===null||ts(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Bi]||g[Ot]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),un(g,u,o),g[Ot]=i,Pt(g),u=g;break e;case"link":var b=hT("link","href",m).get(u+(o.href||""));if(b){for(var x=0;x<b.length;x++)if(g=b[x],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(x,1);break t}}g=m.createElement(u),un(g,u,o),m.head.appendChild(g);break;case"meta":if(b=hT("meta","content",m).get(u+(o.content||""))){for(x=0;x<b.length;x++)if(g=b[x],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(x,1);break t}}g=m.createElement(u),un(g,u,o),m.head.appendChild(g);break;default:throw Error(s(468,u))}g[Ot]=i,Pt(g),u=g}i.stateNode=u}else fT(m,i.type,i.stateNode);else i.stateNode=cT(m,u,i.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?fT(m,i.type,i.stateNode):cT(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Zm(i,i.memoizedProps,o.memoizedProps)}break;case 27:In(r,i),Dn(i),u&512&&(zt||o===null||ts(o,o.return)),o!==null&&u&4&&Zm(i,i.memoizedProps,o.memoizedProps);break;case 5:if(In(r,i),Dn(i),u&512&&(zt||o===null||ts(o,o.return)),i.flags&32){m=i.stateNode;try{Rn(m,"")}catch(ve){at(i,i.return,ve)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,Zm(i,m,o!==null?o.memoizedProps:m)),u&1024&&(np=!0);break;case 6:if(In(r,i),Dn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(ve){at(i,i.return,ve)}}break;case 3:if($h=null,m=xi,xi=qh(r.containerInfo),In(r,i),xi=m,Dn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Bo(r.containerInfo)}catch(ve){at(i,i.return,ve)}np&&(np=!1,f1(i));break;case 4:u=xi,xi=qh(i.stateNode.containerInfo),In(r,i),Dn(i),xi=u;break;case 12:In(r,i),Dn(i);break;case 31:In(r,i),Dn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dh(i,u)));break;case 13:In(r,i),Dn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Nh=Tn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dh(i,u)));break;case 22:m=i.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,K=As,ee=zt;if(As=K||m,zt=ee||k,In(r,i),zt=ee,As=K,Dn(i),u&8192)e:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||k||As||zt||Ra(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){k=o=r;try{if(g=k.stateNode,m)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{x=k.stateNode;var ie=k.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;x.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ve){at(k,k.return,ve)}}}else if(r.tag===6){if(o===null){k=r;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(ve){at(k,k.return,ve)}}}else if(r.tag===18){if(o===null){k=r;try{var W=k.stateNode;m?tT(W,!0):tT(k.stateNode,!1)}catch(ve){at(k,k.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Dh(i,o))));break;case 19:In(r,i),Dn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dh(i,u)));break;case 30:break;case 21:break;default:In(r,i),Dn(i)}}function Dn(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(i1(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,g=ep(i);Ih(i,g,m);break;case 5:var b=o.stateNode;o.flags&32&&(Rn(b,""),o.flags&=-33);var x=ep(i);Ih(i,x,b);break;case 3:case 4:var k=o.stateNode.containerInfo,K=ep(i);tp(i,K,k);break;default:throw Error(s(161))}}catch(ee){at(i,i.return,ee)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function f1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;f1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Cs(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)a1(i,r.alternate,r),r=r.sibling}function Ra(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:mr(4,r,r.return),Ra(r);break;case 1:ts(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&t1(r,r.return,o),Ra(r);break;case 27:vu(r.stateNode);case 26:case 5:ts(r,r.return),Ra(r);break;case 22:r.memoizedState===null&&Ra(r);break;case 30:Ra(r);break;default:Ra(r)}i=i.sibling}}function Is(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,m=i,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:Is(m,g,o),lu(4,g);break;case 1:if(Is(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(K){at(u,u.return,K)}if(u=g,m=u.updateQueue,m!==null){var x=u.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)Hv(k[m],x)}catch(K){at(u,u.return,K)}}o&&b&64&&e1(g),uu(g,g.return);break;case 27:s1(g);case 26:case 5:Is(m,g,o),o&&u===null&&b&4&&n1(g),uu(g,g.return);break;case 12:Is(m,g,o);break;case 31:Is(m,g,o),o&&b&4&&u1(m,g);break;case 13:Is(m,g,o),o&&b&4&&c1(m,g);break;case 22:g.memoizedState===null&&Is(m,g,o),uu(g,g.return);break;case 30:break;default:Is(m,g,o)}r=r.sibling}}function ip(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Ql(o))}function sp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ql(i))}function wi(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)d1(i,r,o,u),r=r.sibling}function d1(i,r,o,u){var m=r.flags;switch(r.tag){case 0:case 11:case 15:wi(i,r,o,u),m&2048&&lu(9,r);break;case 1:wi(i,r,o,u);break;case 3:wi(i,r,o,u),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ql(i)));break;case 12:if(m&2048){wi(i,r,o,u),i=r.stateNode;try{var g=r.memoizedProps,b=g.id,x=g.onPostCommit;typeof x=="function"&&x(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){at(r,r.return,k)}}else wi(i,r,o,u);break;case 31:wi(i,r,o,u);break;case 13:wi(i,r,o,u);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?wi(i,r,o,u):cu(i,r):g._visibility&2?wi(i,r,o,u):(g._visibility|=2,Do(i,r,o,u,(r.subtreeFlags&10256)!==0||!1)),m&2048&&ip(b,r);break;case 24:wi(i,r,o,u),m&2048&&sp(r.alternate,r);break;default:wi(i,r,o,u)}}function Do(i,r,o,u,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=i,b=r,x=o,k=u,K=b.flags;switch(b.tag){case 0:case 11:case 15:Do(g,b,x,k,m),lu(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?Do(g,b,x,k,m):cu(g,b):(ee._visibility|=2,Do(g,b,x,k,m)),m&&K&2048&&ip(b.alternate,b);break;case 24:Do(g,b,x,k,m),m&&K&2048&&sp(b.alternate,b);break;default:Do(g,b,x,k,m)}r=r.sibling}}function cu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,m=u.flags;switch(u.tag){case 22:cu(o,u),m&2048&&ip(u.alternate,u);break;case 24:cu(o,u),m&2048&&sp(u.alternate,u);break;default:cu(o,u)}r=r.sibling}}var hu=8192;function Mo(i,r,o){if(i.subtreeFlags&hu)for(i=i.child;i!==null;)m1(i,r,o),i=i.sibling}function m1(i,r,o){switch(i.tag){case 26:Mo(i,r,o),i.flags&hu&&i.memoizedState!==null&&gI(o,xi,i.memoizedState,i.memoizedProps);break;case 5:Mo(i,r,o);break;case 3:case 4:var u=xi;xi=qh(i.stateNode.containerInfo),Mo(i,r,o),xi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=hu,hu=16777216,Mo(i,r,o),hu=u):Mo(i,r,o));break;default:Mo(i,r,o)}}function p1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function fu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Zt=u,y1(u,i)}p1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)g1(i),i=i.sibling}function g1(i){switch(i.tag){case 0:case 11:case 15:fu(i),i.flags&2048&&mr(9,i,i.return);break;case 3:fu(i);break;case 12:fu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Mh(i)):fu(i);break;default:fu(i)}}function Mh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Zt=u,y1(u,i)}p1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:mr(8,r,r.return),Mh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Mh(r));break;default:Mh(r)}i=i.sibling}}function y1(i,r){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:mr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ql(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Zt=u;else e:for(o=i;Zt!==null;){u=Zt;var m=u.sibling,g=u.return;if(o1(u),u===o){Zt=null;break e}if(m!==null){m.return=g,Zt=m;break e}Zt=g}}}var MC={getCacheForType:function(i){var r=on(jt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return on(jt).controller.signal}},NC=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ht=null,ze=null,Fe=0,rt=0,Fn=null,pr=!1,No=!1,rp=!1,Ds=0,St=0,gr=0,Ca=0,ap=0,Hn=0,Vo=0,du=null,Mn=null,op=!1,Nh=0,v1=0,Vh=1/0,Oh=null,yr=null,Kt=0,vr=null,Oo=null,Ms=0,lp=0,up=null,_1=null,mu=0,cp=null;function qn(){return(Ze&2)!==0&&Fe!==0?Fe&-Fe:J.T!==null?gp():Pc()}function T1(){if(Hn===0)if((Fe&536870912)===0||Ke){var i=ta;ta<<=1,(ta&3932160)===0&&(ta=262144),Hn=i}else Hn=536870912;return i=zn.current,i!==null&&(i.flags|=32),Hn}function Nn(i,r,o){(i===ht&&(rt===2||rt===9)||i.cancelPendingCommit!==null)&&(Po(i,0),_r(i,Fe,Hn,!1)),na(i,o),((Ze&2)===0||i!==ht)&&(i===ht&&((Ze&2)===0&&(Ca|=o),St===4&&_r(i,Fe,Hn,!1)),ns(i))}function b1(i,r,o){if((Ze&6)!==0)throw Error(s(327));var u=!o&&(r&127)===0&&(r&i.expiredLanes)===0||pi(i,r),m=u?PC(i,r):fp(i,r,!0),g=u;do{if(m===0){No&&!u&&_r(i,r,0,!1);break}else{if(o=i.current.alternate,g&&!VC(o)){m=fp(i,r,!1),g=!1;continue}if(m===2){if(g=r,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var x=i;m=du;var k=x.current.memoizedState.isDehydrated;if(k&&(Po(x,b).flags|=256),b=fp(x,b,!1),b!==2){if(rp&&!k){x.errorRecoveryDisabledLanes|=g,Ca|=g,m=4;break e}g=Mn,Mn=m,g!==null&&(Mn===null?Mn=g:Mn.push.apply(Mn,g))}m=b}if(g=!1,m!==2)continue}}if(m===1){Po(i,0),_r(i,r,0,!0);break}e:{switch(u=i,g=m,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:_r(u,r,Hn,!pr);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(m=Nh+300-Tn(),10<m)){if(_r(u,r,Hn,!pr),Li(u,0,!0)!==0)break e;Ms=r,u.timeoutHandle=J1(E1.bind(null,u,o,Mn,Oh,op,r,Hn,Ca,Vo,pr,g,"Throttled",-0,0),m);break e}E1(u,o,Mn,Oh,op,r,Hn,Ca,Vo,pr,g,null,-0,0)}}break}while(!0);ns(i)}function E1(i,r,o,u,m,g,b,x,k,K,ee,ie,Q,W){if(i.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},m1(r,g,ie);var ve=(g&62914560)===g?Nh-Tn():(g&4194048)===g?v1-Tn():0;if(ve=yI(ie,ve),ve!==null){Ms=g,i.cancelPendingCommit=ve(D1.bind(null,i,r,g,o,u,m,b,x,k,ee,ie,null,Q,W)),_r(i,g,b,!K);return}}D1(i,r,g,o,u,m,b,x,k)}function VC(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!Ln(g(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function _r(i,r,o,u){r&=~ap,r&=~Ca,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var m=r;0<m;){var g=31-At(m),b=1<<g;u[g]=-1,m&=~b}o!==0&&ia(i,o,r)}function Ph(){return(Ze&6)===0?(pu(0),!1):!0}function hp(){if(ze!==null){if(rt===0)var i=ze.return;else i=ze,Ts=_a=null,Rm(i),wo=null,Wl=0,i=ze;for(;i!==null;)Z_(i.alternate,i),i=i.return;ze=null}}function Po(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,ZC(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Ms=0,hp(),ht=i,ze=o=vs(i.current,null),Fe=r,rt=0,Fn=null,pr=!1,No=pi(i,r),rp=!1,Vo=Hn=ap=Ca=gr=St=0,Mn=du=null,op=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var m=31-At(u),g=1<<m;r|=i[m],u&=~g}return Ds=r,nh(),o}function S1(i,r){ke=null,J.H=ru,r===xo||r===ch?(r=Uv(),rt=3):r===pm?(r=Uv(),rt=4):rt=r===Hm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Fn=r,ze===null&&(St=1,xh(i,Zn(r,i.current)))}function x1(){var i=zn.current;return i===null?!0:(Fe&4194048)===Fe?ii===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?i===ii:!1}function w1(){var i=J.H;return J.H=ru,i===null?ru:i}function A1(){var i=J.A;return J.A=MC,i}function kh(){St=4,pr||(Fe&4194048)!==Fe&&zn.current!==null||(No=!0),(gr&134217727)===0&&(Ca&134217727)===0||ht===null||_r(ht,Fe,Hn,!1)}function fp(i,r,o){var u=Ze;Ze|=2;var m=w1(),g=A1();(ht!==i||Fe!==r)&&(Oh=null,Po(i,r)),r=!1;var b=St;e:do try{if(rt!==0&&ze!==null){var x=ze,k=Fn;switch(rt){case 8:hp(),b=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(r=!0);var K=rt;if(rt=0,Fn=null,ko(i,x,k,K),o&&No){b=0;break e}break;default:K=rt,rt=0,Fn=null,ko(i,x,k,K)}}OC(),b=St;break}catch(ee){S1(i,ee)}while(!0);return r&&i.shellSuspendCounter++,Ts=_a=null,Ze=u,J.H=m,J.A=g,ze===null&&(ht=null,Fe=0,nh()),b}function OC(){for(;ze!==null;)R1(ze)}function PC(i,r){var o=Ze;Ze|=2;var u=w1(),m=A1();ht!==i||Fe!==r?(Oh=null,Vh=Tn()+500,Po(i,r)):No=pi(i,r);e:do try{if(rt!==0&&ze!==null){r=ze;var g=Fn;t:switch(rt){case 1:rt=0,Fn=null,ko(i,r,g,1);break;case 2:case 9:if(jv(g)){rt=0,Fn=null,C1(r);break}r=function(){rt!==2&&rt!==9||ht!==i||(rt=7),ns(i)},g.then(r,r);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:jv(g)?(rt=0,Fn=null,C1(r)):(rt=0,Fn=null,ko(i,r,g,7));break;case 5:var b=null;switch(ze.tag){case 26:b=ze.memoizedState;case 5:case 27:var x=ze;if(b?dT(b):x.stateNode.complete){rt=0,Fn=null;var k=x.sibling;if(k!==null)ze=k;else{var K=x.return;K!==null?(ze=K,jh(K)):ze=null}break t}}rt=0,Fn=null,ko(i,r,g,5);break;case 6:rt=0,Fn=null,ko(i,r,g,6);break;case 8:hp(),St=6;break e;default:throw Error(s(462))}}kC();break}catch(ee){S1(i,ee)}while(!0);return Ts=_a=null,J.H=u,J.A=m,Ze=o,ze!==null?0:(ht=null,Fe=0,nh(),St)}function kC(){for(;ze!==null&&!Fd();)R1(ze)}function R1(i){var r=W_(i.alternate,i,Ds);i.memoizedProps=i.pendingProps,r===null?jh(i):ze=r}function C1(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=G_(o,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=G_(o,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Rm(r);default:Z_(o,r),r=ze=Av(r,Ds),r=W_(o,r,Ds)}i.memoizedProps=i.pendingProps,r===null?jh(i):ze=r}function ko(i,r,o,u){Ts=_a=null,Rm(r),wo=null,Wl=0;var m=r.return;try{if(xC(i,m,r,o,Fe)){St=1,xh(i,Zn(o,i.current)),ze=null;return}}catch(g){if(m!==null)throw ze=m,g;St=1,xh(i,Zn(o,i.current)),ze=null;return}r.flags&32768?(Ke||u===1?i=!0:No||(Fe&536870912)!==0?i=!1:(pr=i=!0,(u===2||u===9||u===3||u===6)&&(u=zn.current,u!==null&&u.tag===13&&(u.flags|=16384))),I1(r,i)):jh(r)}function jh(i){var r=i;do{if((r.flags&32768)!==0){I1(r,pr);return}i=r.return;var o=RC(r.alternate,r,Ds);if(o!==null){ze=o;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=i}while(r!==null);St===0&&(St=5)}function I1(i,r){do{var o=CC(i.alternate,i);if(o!==null){o.flags&=32767,ze=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){ze=i;return}ze=i=o}while(i!==null);St=6,ze=null}function D1(i,r,o,u,m,g,b,x,k){i.cancelPendingCommit=null;do Lh();while(Kt!==0);if((Ze&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=em,Gd(i,o,g,b,x,k),i===ht&&(ze=ht=null,Fe=0),Oo=r,vr=i,Ms=o,lp=g,up=m,_1=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,zC(Qs,function(){return P1(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,m=oe.p,oe.p=2,b=Ze,Ze|=4;try{IC(i,r,o)}finally{Ze=b,oe.p=m,J.T=u}}Kt=1,M1(),N1(),V1()}}function M1(){if(Kt===1){Kt=0;var i=vr,r=Oo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=oe.p;oe.p=2;var m=Ze;Ze|=4;try{h1(r,i);var g=xp,b=yv(i.containerInfo),x=g.focusedElem,k=g.selectionRange;if(b!==x&&x&&x.ownerDocument&&gv(x.ownerDocument.documentElement,x)){if(k!==null&&Qd(x)){var K=k.start,ee=k.end;if(ee===void 0&&(ee=K),"selectionStart"in x)x.selectionStart=K,x.selectionEnd=Math.min(ee,x.value.length);else{var ie=x.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),ve=x.textContent.length,we=Math.min(k.start,ve),ct=k.end===void 0?we:Math.min(k.end,ve);!W.extend&&we>ct&&(b=ct,ct=we,we=b);var q=pv(x,we),B=pv(x,ct);if(q&&B&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var $=ie.createRange();$.setStart(q.node,q.offset),W.removeAllRanges(),we>ct?(W.addRange($),W.extend(B.node,B.offset)):($.setEnd(B.node,B.offset),W.addRange($))}}}}for(ie=[],W=x;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ie.length;x++){var te=ie[x];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Xh=!!Sp,xp=Sp=null}finally{Ze=m,oe.p=u,J.T=o}}i.current=r,Kt=2}}function N1(){if(Kt===2){Kt=0;var i=vr,r=Oo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=oe.p;oe.p=2;var m=Ze;Ze|=4;try{a1(i,r.alternate,r)}finally{Ze=m,oe.p=u,J.T=o}}Kt=3}}function V1(){if(Kt===4||Kt===3){Kt=0,Cc();var i=vr,r=Oo,o=Ms,u=_1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,Oo=vr=null,O1(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(yr=null),ms(o),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(mi,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=J.T,m=oe.p,oe.p=2,J.T=null;try{for(var g=i.onRecoverableError,b=0;b<u.length;b++){var x=u[b];g(x.value,{componentStack:x.stack})}}finally{J.T=r,oe.p=m}}(Ms&3)!==0&&Lh(),ns(i),m=i.pendingLanes,(o&261930)!==0&&(m&42)!==0?i===cp?mu++:(mu=0,cp=i):mu=0,pu(0)}}function O1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Ql(r)))}function Lh(){return M1(),N1(),V1(),P1()}function P1(){if(Kt!==5)return!1;var i=vr,r=lp;lp=0;var o=ms(Ms),u=J.T,m=oe.p;try{oe.p=32>o?32:o,J.T=null,o=up,up=null;var g=vr,b=Ms;if(Kt=0,Oo=vr=null,Ms=0,(Ze&6)!==0)throw Error(s(331));var x=Ze;if(Ze|=4,g1(g.current),d1(g,g.current,b,o),Ze=x,pu(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(mi,g)}catch{}return!0}finally{oe.p=m,J.T=u,O1(i,r)}}function k1(i,r,o){r=Zn(o,r),r=Fm(i.stateNode,r,2),i=hr(i,r,2),i!==null&&(na(i,2),ns(i))}function at(i,r,o){if(i.tag===3)k1(i,i,o);else for(;r!==null;){if(r.tag===3){k1(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yr===null||!yr.has(u))){i=Zn(o,i),o=j_(2),u=hr(r,o,2),u!==null&&(L_(o,u,r,i),na(u,2),ns(u));break}}r=r.return}}function dp(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new NC;var m=new Set;u.set(r,m)}else m=u.get(r),m===void 0&&(m=new Set,u.set(r,m));m.has(o)||(rp=!0,m.add(o),i=jC.bind(null,i,r,o),r.then(i,i))}function jC(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ht===i&&(Fe&o)===o&&(St===4||St===3&&(Fe&62914560)===Fe&&300>Tn()-Nh?(Ze&2)===0&&Po(i,0):ap|=o,Vo===Fe&&(Vo=0)),ns(i)}function j1(i,r){r===0&&(r=Oc()),i=ga(i,r),i!==null&&(na(i,r),ns(i))}function LC(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),j1(i,o)}function UC(i,r){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),j1(i,o)}function zC(i,r){return $t(i,r)}var Uh=null,jo=null,mp=!1,zh=!1,pp=!1,Tr=0;function ns(i){i!==jo&&i.next===null&&(jo===null?Uh=jo=i:jo=jo.next=i),zh=!0,mp||(mp=!0,FC())}function pu(i,r){if(!pp&&zh){pp=!0;do for(var o=!1,u=Uh;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var b=u.suspendedLanes,x=u.pingedLanes;g=(1<<31-At(42|i)+1)-1,g&=m&~(b&~x),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,B1(u,g))}else g=Fe,g=Li(u,u===ht?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||pi(u,g)||(o=!0,B1(u,g));u=u.next}while(o);pp=!1}}function BC(){L1()}function L1(){zh=mp=!1;var i=0;Tr!==0&&JC()&&(i=Tr);for(var r=Tn(),o=null,u=Uh;u!==null;){var m=u.next,g=U1(u,r);g===0?(u.next=null,o===null?Uh=m:o.next=m,m===null&&(jo=o)):(o=u,(i!==0||(g&3)!==0)&&(zh=!0)),u=m}Kt!==0&&Kt!==5||pu(i),Tr!==0&&(Tr=0)}function U1(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-At(g),x=1<<b,k=m[b];k===-1?((x&o)===0||(x&u)!==0)&&(m[b]=qd(x,r)):k<=r&&(i.expiredLanes|=x),g&=~x}if(r=ht,o=Fe,o=Li(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(rt===2||rt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ys(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||pi(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&Ys(u),ms(o)){case 2:case 8:o=wl;break;case 32:o=Qs;break;case 268435456:o=Ic;break;default:o=Qs}return u=z1.bind(null,i),o=$t(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&Ys(u),i.callbackPriority=2,i.callbackNode=null,2}function z1(i,r){if(Kt!==0&&Kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Lh()&&i.callbackNode!==o)return null;var u=Fe;return u=Li(i,i===ht?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(b1(i,u,r),U1(i,Tn()),i.callbackNode!=null&&i.callbackNode===o?z1.bind(null,i):null)}function B1(i,r){if(Lh())return null;b1(i,r,!0)}function FC(){eI(function(){(Ze&6)!==0?$t(xl,BC):L1()})}function gp(){if(Tr===0){var i=Eo;i===0&&(i=ki,ki<<=1,(ki&261888)===0&&(ki=256)),Tr=i}return Tr}function F1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ao(""+i)}function H1(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function HC(i,r,o,u,m){if(r==="submit"&&o&&o.stateNode===m){var g=F1((m[Wt]||null).action),b=u.submitter;b&&(r=(r=b[Wt]||null)?F1(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var x=new Qi("action","action",null,u,m);i.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Tr!==0){var k=b?H1(m,b):new FormData(m);km(o,{pending:!0,data:k,method:m.method,action:g},null,k)}}else typeof g=="function"&&(x.preventDefault(),k=b?H1(m,b):new FormData(m),km(o,{pending:!0,data:k,method:m.method,action:g},g,k))},currentTarget:m}]})}}for(var yp=0;yp<Zd.length;yp++){var vp=Zd[yp],qC=vp.toLowerCase(),GC=vp[0].toUpperCase()+vp.slice(1);Si(qC,"on"+GC)}Si(Tv,"onAnimationEnd"),Si(bv,"onAnimationIteration"),Si(Ev,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(oC,"onTransitionRun"),Si(lC,"onTransitionStart"),Si(uC,"onTransitionCancel"),Si(Sv,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gu));function q1(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],m=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var b=u.length-1;0<=b;b--){var x=u[b],k=x.instance,K=x.currentTarget;if(x=x.listener,k!==g&&m.isPropagationStopped())break e;g=x,m.currentTarget=K;try{g(m)}catch(ee){th(ee)}m.currentTarget=null,g=k}else for(b=0;b<u.length;b++){if(x=u[b],k=x.instance,K=x.currentTarget,x=x.listener,k!==g&&m.isPropagationStopped())break e;g=x,m.currentTarget=K;try{g(m)}catch(ee){th(ee)}m.currentTarget=null,g=k}}}}function Be(i,r){var o=r[to];o===void 0&&(o=r[to]=new Set);var u=i+"__bubble";o.has(u)||(G1(r,i,2,!1),o.add(u))}function _p(i,r,o){var u=0;r&&(u|=4),G1(o,i,u,r)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Tp(i){if(!i[Bh]){i[Bh]=!0,Cl.forEach(function(o){o!=="selectionchange"&&($C.has(o)||_p(o,!1,i),_p(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Bh]||(r[Bh]=!0,_p("selectionchange",!1,r))}}function G1(i,r,o,u){switch(TT(r)){case 2:var m=TI;break;case 8:m=bI;break;default:m=Pp}o=m.bind(null,r,o,i),m=void 0,!la||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(r,o,{capture:!0,passive:m}):i.addEventListener(r,o,!0):m!==void 0?i.addEventListener(r,o,{passive:m}):i.addEventListener(r,o,!1)}function bp(i,r,o,u,m){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var x=u.stateNode.containerInfo;if(x===m)break;if(b===4)for(b=u.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;x!==null;){if(b=Fi(x),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){u=g=b;continue e}x=x.parentNode}}u=u.return}tr(function(){var K=g,ee=Qn(o),ie=[];e:{var Q=xv.get(i);if(Q!==void 0){var W=Qi,ve=i;switch(i){case"keypress":if(ca(o)===0)break e;case"keydown":case"keyup":W=Jc;break;case"focusin":ve="focus",W=fa;break;case"focusout":ve="blur",W=fa;break;case"beforeblur":case"afterblur":W=fa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=_;break;case Tv:case bv:case Ev:W=Gc;break;case Sv:W=R;break;case"scroll":case"scrollend":W=zl;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=$c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ys;break;case"toggle":case"beforetoggle":W=Pe}var we=(r&4)!==0,ct=!we&&(i==="scroll"||i==="scrollend"),q=we?Q!==null?Q+"Capture":null:Q;we=[];for(var B=K,$;B!==null;){var te=B;if($=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||$===null||q===null||(te=_i(B,q),te!=null&&we.push(yu(B,te,$))),ct)break;B=B.return}0<we.length&&(Q=new W(Q,ve,null,o,ee),ie.push({event:Q,listeners:we}))}}if((r&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",Q&&o!==jl&&(ve=o.relatedTarget||o.fromElement)&&(Fi(ve)||ve[zi]))break e;if((W||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(ve=o.relatedTarget||o.toElement,W=K,ve=ve?Fi(ve):null,ve!==null&&(ct=l(ve),we=ve.tag,ve!==ct||we!==5&&we!==27&&we!==6)&&(ve=null)):(W=null,ve=K),W!==ve)){if(we=Bl,te="onMouseLeave",q="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(we=ys,te="onPointerLeave",q="onPointerEnter",B="pointer"),ct=W==null?Q:kn(W),$=ve==null?Q:kn(ve),Q=new we(te,B+"leave",W,o,ee),Q.target=ct,Q.relatedTarget=$,te=null,Fi(ee)===K&&(we=new we(q,B+"enter",ve,o,ee),we.target=$,we.relatedTarget=ct,te=we),ct=te,W&&ve)t:{for(we=KC,q=W,B=ve,$=0,te=q;te;te=we(te))$++;te=0;for(var Se=B;Se;Se=we(Se))te++;for(;0<$-te;)q=we(q),$--;for(;0<te-$;)B=we(B),te--;for(;$--;){if(q===B||B!==null&&q===B.alternate){we=q;break t}q=we(q),B=we(B)}we=null}else we=null;W!==null&&$1(ie,Q,W,we,!1),ve!==null&&ct!==null&&$1(ie,ct,ve,we,!0)}}e:{if(Q=K?kn(K):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var Qe=uv;else if(ov(Q))if(cv)Qe=sC;else{Qe=nC;var be=tC}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&ro(K.elementType)&&(Qe=uv):Qe=iC;if(Qe&&(Qe=Qe(i,K))){lv(ie,Qe,o,ee);break e}be&&be(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Ol(Q,"number",Q.value)}switch(be=K?kn(K):window,i){case"focusin":(ov(be)||be.contentEditable==="true")&&(mo=be,Xd=K,$l=null);break;case"focusout":$l=Xd=mo=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,vv(ie,o,ee);break;case"selectionchange":if(aC)break;case"keydown":case"keyup":vv(ie,o,ee)}var je;if(Je)e:{switch(i){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else fo?da(i,o)&&(He="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(He="onCompositionStart");He&&(Ji&&o.locale!=="ko"&&(fo||He!=="onCompositionStart"?He==="onCompositionEnd"&&fo&&(je=Ul()):(Yi=ee,Ll="value"in Yi?Yi.value:Yi.textContent,fo=!0)),be=Fh(K,He),0<be.length&&(He=new Wi(He,i,null,o,ee),ie.push({event:He,listeners:be}),je?He.data=je:(je=ho(o),je!==null&&(He.data=je)))),(je=Wn?WR(i,o):JR(i,o))&&(He=Fh(K,"onBeforeInput"),0<He.length&&(be=new Wi("onBeforeInput","beforeinput",null,o,ee),ie.push({event:be,listeners:He}),be.data=je)),HC(ie,i,K,o,ee)}q1(ie,r)})}function yu(i,r,o){return{instance:i,listener:r,currentTarget:o}}function Fh(i,r){for(var o=r+"Capture",u=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=_i(i,o),m!=null&&u.unshift(yu(i,m,g)),m=_i(i,r),m!=null&&u.push(yu(i,m,g))),i.tag===3)return u;i=i.return}return[]}function KC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function $1(i,r,o,u,m){for(var g=r._reactName,b=[];o!==null&&o!==u;){var x=o,k=x.alternate,K=x.stateNode;if(x=x.tag,k!==null&&k===u)break;x!==5&&x!==26&&x!==27||K===null||(k=K,m?(K=_i(o,g),K!=null&&b.unshift(yu(o,K,k))):m||(K=_i(o,g),K!=null&&b.push(yu(o,K,k)))),o=o.return}b.length!==0&&i.push({event:r,listeners:b})}var YC=/\r\n?/g,QC=/\u0000|\uFFFD/g;function K1(i){return(typeof i=="string"?i:""+i).replace(YC,`
`).replace(QC,"")}function Y1(i,r){return r=K1(r),K1(i)===r}function ut(i,r,o,u,m,g){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Rn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Rn(i,""+u);break;case"className":jn(i,"class",u);break;case"tabIndex":jn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(i,o,u);break;case"style":kl(i,u,g);break;case"data":if(r!=="object"){jn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=ao(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&ut(i,r,"name",m.name,m,null),ut(i,r,"formEncType",m.formEncType,m,null),ut(i,r,"formMethod",m.formMethod,m,null),ut(i,r,"formTarget",m.formTarget,m,null)):(ut(i,r,"encType",m.encType,m,null),ut(i,r,"method",m.method,m,null),ut(i,r,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=ao(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=vi);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=ao(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Be("beforetoggle",i),Be("toggle",i),io(i,"popover",u);break;case"xlinkActuate":kt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":io(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Fc.get(o)||o,io(i,o,u))}}function Ep(i,r,o,u,m,g){switch(o){case"style":kl(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Rn(i,u):(typeof u=="number"||typeof u=="bigint")&&Rn(i,""+u);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"onClick":u!=null&&(i.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),g=i[Wt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(r,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,m);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):io(i,o,u)}}}function un(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",i),Be("load",i);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(i,r,g,b,o,null)}}m&&ut(i,r,"srcSet",o.srcSet,o,null),u&&ut(i,r,"src",o.src,o,null);return;case"input":Be("invalid",i);var x=g=b=m=null,k=null,K=null;for(u in o)if(o.hasOwnProperty(u)){var ee=o[u];if(ee!=null)switch(u){case"name":m=ee;break;case"type":b=ee;break;case"checked":k=ee;break;case"defaultChecked":K=ee;break;case"value":g=ee;break;case"defaultValue":x=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:ut(i,r,u,ee,o,null)}}Uc(i,g,x,k,K,b,m,!1);return;case"select":Be("invalid",i),u=b=g=null;for(m in o)if(o.hasOwnProperty(m)&&(x=o[m],x!=null))switch(m){case"value":g=x;break;case"defaultValue":b=x;break;case"multiple":u=x;default:ut(i,r,m,x,o,null)}r=g,o=b,i.multiple=!!u,r!=null?Ws(i,!!u,r,!1):o!=null&&Ws(i,!!u,o,!0);return;case"textarea":Be("invalid",i),g=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(x=o[b],x!=null))switch(b){case"value":u=x;break;case"defaultValue":m=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:ut(i,r,b,x,o,null)}Js(i,u,m,g);return;case"option":for(k in o)o.hasOwnProperty(k)&&(u=o[k],u!=null)&&(k==="selected"?i.selected=u&&typeof u!="function"&&typeof u!="symbol":ut(i,r,k,u,o,null));return;case"dialog":Be("beforetoggle",i),Be("toggle",i),Be("cancel",i),Be("close",i);break;case"iframe":case"object":Be("load",i);break;case"video":case"audio":for(u=0;u<gu.length;u++)Be(gu[u],i);break;case"image":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"embed":case"source":case"link":Be("error",i),Be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(i,r,K,u,o,null)}return;default:if(ro(r)){for(ee in o)o.hasOwnProperty(ee)&&(u=o[ee],u!==void 0&&Ep(i,r,ee,u,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null&&ut(i,r,x,u,o,null))}function XC(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,b=null,x=null,k=null,K=null,ee=null;for(W in o){var ie=o[W];if(o.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ie;default:u.hasOwnProperty(W)||ut(i,r,W,null,u,ie)}}for(var Q in u){var W=u[Q];if(ie=o[Q],u.hasOwnProperty(Q)&&(W!=null||ie!=null))switch(Q){case"type":g=W;break;case"name":m=W;break;case"checked":K=W;break;case"defaultChecked":ee=W;break;case"value":b=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==ie&&ut(i,r,Q,W,u,ie)}}so(i,b,x,k,K,ee,g,m);return;case"select":W=b=x=Q=null;for(g in o)if(k=o[g],o.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":W=k;default:u.hasOwnProperty(g)||ut(i,r,g,null,u,k)}for(m in u)if(g=u[m],k=o[m],u.hasOwnProperty(m)&&(g!=null||k!=null))switch(m){case"value":Q=g;break;case"defaultValue":x=g;break;case"multiple":b=g;default:g!==k&&ut(i,r,m,g,u,k)}r=x,o=b,u=W,Q!=null?Ws(i,!!o,Q,!1):!!u!=!!o&&(r!=null?Ws(i,!!o,r,!0):Ws(i,!!o,o?[]:"",!1));return;case"textarea":W=Q=null;for(x in o)if(m=o[x],o.hasOwnProperty(x)&&m!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ut(i,r,x,null,u,m)}for(b in u)if(m=u[b],g=o[b],u.hasOwnProperty(b)&&(m!=null||g!=null))switch(b){case"value":Q=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==g&&ut(i,r,b,m,u,g)}zc(i,Q,W);return;case"option":for(var ve in o)Q=o[ve],o.hasOwnProperty(ve)&&Q!=null&&!u.hasOwnProperty(ve)&&(ve==="selected"?i.selected=!1:ut(i,r,ve,null,u,Q));for(k in u)Q=u[k],W=o[k],u.hasOwnProperty(k)&&Q!==W&&(Q!=null||W!=null)&&(k==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":ut(i,r,k,Q,u,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)Q=o[we],o.hasOwnProperty(we)&&Q!=null&&!u.hasOwnProperty(we)&&ut(i,r,we,null,u,Q);for(K in u)if(Q=u[K],W=o[K],u.hasOwnProperty(K)&&Q!==W&&(Q!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:ut(i,r,K,Q,u,W)}return;default:if(ro(r)){for(var ct in o)Q=o[ct],o.hasOwnProperty(ct)&&Q!==void 0&&!u.hasOwnProperty(ct)&&Ep(i,r,ct,void 0,u,Q);for(ee in u)Q=u[ee],W=o[ee],!u.hasOwnProperty(ee)||Q===W||Q===void 0&&W===void 0||Ep(i,r,ee,Q,u,W);return}}for(var q in o)Q=o[q],o.hasOwnProperty(q)&&Q!=null&&!u.hasOwnProperty(q)&&ut(i,r,q,null,u,Q);for(ie in u)Q=u[ie],W=o[ie],!u.hasOwnProperty(ie)||Q===W||Q==null&&W==null||ut(i,r,ie,Q,u,W)}function Q1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],g=m.transferSize,b=m.initiatorType,x=m.duration;if(g&&x&&Q1(b)){for(b=0,x=m.responseEnd,u+=1;u<o.length;u++){var k=o[u],K=k.startTime;if(K>x)break;var ee=k.transferSize,ie=k.initiatorType;ee&&Q1(ie)&&(k=k.responseEnd,b+=ee*(k<x?1:(x-K)/(k-K)))}if(--u,r+=8*(g+b)/(m.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sp=null,xp=null;function Hh(i){return i.nodeType===9?i:i.ownerDocument}function X1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function W1(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function wp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ap=null;function JC(){var i=window.event;return i&&i.type==="popstate"?i===Ap?!1:(Ap=i,!0):(Ap=null,!1)}var J1=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,Z1=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof Z1<"u"?function(i){return Z1.resolve(null).then(i).catch(tI)}:J1;function tI(i){setTimeout(function(){throw i})}function br(i){return i==="head"}function eT(i,r){var o=r,u=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(m),Bo(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")vu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,vu(o);for(var g=o.firstChild;g;){var b=g.nextSibling,x=g.nodeName;g[Bi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=b}}else o==="body"&&vu(i.ownerDocument.body);o=m}while(o);Bo(r)}function tT(i,r){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function Rp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rp(o),no(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function nI(i,r,o,u){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Bi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=si(i.nextSibling),i===null)break}return null}function iI(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=si(i.nextSibling),i===null))return null;return i}function nT(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=si(i.nextSibling),i===null))return null;return i}function Cp(i){return i.data==="$?"||i.data==="$~"}function Ip(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function sI(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function si(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Dp=null;function iT(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return si(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function sT(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function rT(i,r,o){switch(r=Hh(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function vu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);no(i)}var ri=new Map,aT=new Set;function qh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ns=oe.d;oe.d={f:rI,r:aI,D:oI,C:lI,L:uI,m:cI,X:fI,S:hI,M:dI};function rI(){var i=Ns.f(),r=Ph();return i||r}function aI(i){var r=Yn(i);r!==null&&r.tag===5&&r.type==="form"?S_(r):Ns.r(i)}var Lo=typeof document>"u"?null:document;function oT(i,r,o){var u=Lo;if(u&&typeof r=="string"&&r){var m=An(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),aT.has(m)||(aT.add(m),i={rel:i,crossOrigin:o,href:r},u.querySelector(m)===null&&(r=u.createElement("link"),un(r,"link",i),Pt(r),u.head.appendChild(r)))}}function oI(i){Ns.D(i),oT("dns-prefetch",i,null)}function lI(i,r){Ns.C(i,r),oT("preconnect",i,r)}function uI(i,r,o){Ns.L(i,r,o);var u=Lo;if(u&&i&&r){var m='link[rel="preload"][as="'+An(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+An(o.imageSizes)+'"]')):m+='[href="'+An(i)+'"]';var g=m;switch(r){case"style":g=Uo(i);break;case"script":g=zo(i)}ri.has(g)||(i=T({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),ri.set(g,i),u.querySelector(m)!==null||r==="style"&&u.querySelector(_u(g))||r==="script"&&u.querySelector(Tu(g))||(r=u.createElement("link"),un(r,"link",i),Pt(r),u.head.appendChild(r)))}}function cI(i,r){Ns.m(i,r);var o=Lo;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+An(u)+'"][href="'+An(i)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=zo(i)}if(!ri.has(g)&&(i=T({rel:"modulepreload",href:i},r),ri.set(g,i),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Tu(g)))return}u=o.createElement("link"),un(u,"link",i),Pt(u),o.head.appendChild(u)}}}function hI(i,r,o){Ns.S(i,r,o);var u=Lo;if(u&&i){var m=Hi(u).hoistableStyles,g=Uo(i);r=r||"default";var b=m.get(g);if(!b){var x={loading:0,preload:null};if(b=u.querySelector(_u(g)))x.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":r},o),(o=ri.get(g))&&Mp(i,o);var k=b=u.createElement("link");Pt(k),un(k,"link",i),k._p=new Promise(function(K,ee){k.onload=K,k.onerror=ee}),k.addEventListener("load",function(){x.loading|=1}),k.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Gh(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:x},m.set(g,b)}}}function fI(i,r){Ns.X(i,r);var o=Lo;if(o&&i){var u=Hi(o).hoistableScripts,m=zo(i),g=u.get(m);g||(g=o.querySelector(Tu(m)),g||(i=T({src:i,async:!0},r),(r=ri.get(m))&&Np(i,r),g=o.createElement("script"),Pt(g),un(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function dI(i,r){Ns.M(i,r);var o=Lo;if(o&&i){var u=Hi(o).hoistableScripts,m=zo(i),g=u.get(m);g||(g=o.querySelector(Tu(m)),g||(i=T({src:i,async:!0,type:"module"},r),(r=ri.get(m))&&Np(i,r),g=o.createElement("script"),Pt(g),un(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function lT(i,r,o,u){var m=(m=he.current)?qh(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Uo(o.href),o=Hi(m).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Uo(o.href);var g=Hi(m).hoistableStyles,b=g.get(i);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=m.querySelector(_u(i)))&&!g._p&&(b.instance=g,b.state.loading=5),ri.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ri.set(i,o),g||mI(m,i,o,b.state))),r&&u===null)throw Error(s(528,""));return b}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=zo(o),o=Hi(m).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Uo(i){return'href="'+An(i)+'"'}function _u(i){return'link[rel="stylesheet"]['+i+"]"}function uT(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function mI(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),un(r,"link",o),Pt(r),i.head.appendChild(r))}function zo(i){return'[src="'+An(i)+'"]'}function Tu(i){return"script[async]"+i}function cT(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+An(o.href)+'"]');if(u)return r.instance=u,Pt(u),u;var m=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Pt(u),un(u,"style",m),Gh(u,o.precedence,i),r.instance=u;case"stylesheet":m=Uo(o.href);var g=i.querySelector(_u(m));if(g)return r.state.loading|=4,r.instance=g,Pt(g),g;u=uT(o),(m=ri.get(m))&&Mp(u,m),g=(i.ownerDocument||i).createElement("link"),Pt(g);var b=g;return b._p=new Promise(function(x,k){b.onload=x,b.onerror=k}),un(g,"link",u),r.state.loading|=4,Gh(g,o.precedence,i),r.instance=g;case"script":return g=zo(o.src),(m=i.querySelector(Tu(g)))?(r.instance=m,Pt(m),m):(u=o,(m=ri.get(g))&&(u=T({},o),Np(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),Pt(m),un(m,"link",u),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Gh(u,o.precedence,i));return r.instance}function Gh(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,b=0;b<u.length;b++){var x=u[b];if(x.dataset.precedence===r)g=x;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function Mp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Np(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var $h=null;function hT(i,r,o){if($h===null){var u=new Map,m=$h=new Map;m.set(o,u)}else m=$h,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var g=o[m];if(!(g[Bi]||g[Ot]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=i+b;var x=u.get(b);x?x.push(g):u.set(b,[g])}}return u}function fT(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function pI(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function dT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function gI(i,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Uo(u.href),g=r.querySelector(_u(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Kh.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=g,Pt(g);return}g=r.ownerDocument||r,u=uT(u),(m=ri.get(m))&&Mp(u,m),g=g.createElement("link"),Pt(g);var b=g;b._p=new Promise(function(x,k){b.onload=x,b.onerror=k}),un(g,"link",u),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Kh.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var Vp=0;function yI(i,r){return i.stylesheets&&i.count===0&&Qh(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Qh(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+r);0<i.imgBytes&&Vp===0&&(Vp=62500*WC());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Qh(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>Vp?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Yh=null;function Qh(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Yh=new Map,r.forEach(vI,i),Yh=null,Kh.call(i))}function vI(i,r){if(!(r.state.loading&4)){var o=Yh.get(i);if(o)var u=o.get(null);else{o=new Map,Yh.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var b=m[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=r.instance,b=m.getAttribute("data-precedence"),g=o.get(b)||u,g===u&&o.set(null,m),o.set(b,m),this.count++,u=Kh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var bu={$$typeof:F,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function _I(i,r,o,u,m,g,b,x,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function mT(i,r,o,u,m,g,b,x,k,K,ee,ie){return i=new _I(i,r,o,b,k,K,ee,ie,x),r=1,g===!0&&(r|=24),g=Un(3,null,null,r),i.current=g,g.stateNode=i,r=fm(),r.refCount++,i.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:r},gm(g),i}function pT(i){return i?(i=yo,i):yo}function gT(i,r,o,u,m,g){m=pT(m),u.context===null?u.context=m:u.pendingContext=m,u=cr(r),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=hr(i,u,r),o!==null&&(Nn(o,i,r),Zl(o,i,r))}function yT(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function Op(i,r){yT(i,r),(i=i.alternate)&&yT(i,r)}function vT(i){if(i.tag===13||i.tag===31){var r=ga(i,67108864);r!==null&&Nn(r,i,67108864),Op(i,67108864)}}function _T(i){if(i.tag===13||i.tag===31){var r=qn();r=sa(r);var o=ga(i,r);o!==null&&Nn(o,i,r),Op(i,r)}}var Xh=!0;function TI(i,r,o,u){var m=J.T;J.T=null;var g=oe.p;try{oe.p=2,Pp(i,r,o,u)}finally{oe.p=g,J.T=m}}function bI(i,r,o,u){var m=J.T;J.T=null;var g=oe.p;try{oe.p=8,Pp(i,r,o,u)}finally{oe.p=g,J.T=m}}function Pp(i,r,o,u){if(Xh){var m=kp(u);if(m===null)bp(i,r,u,Wh,o),bT(i,u);else if(SI(m,i,r,o,u))u.stopPropagation();else if(bT(i,u),r&4&&-1<EI.indexOf(i)){for(;m!==null;){var g=Yn(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=ji(g.pendingLanes);if(b!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;b;){var k=1<<31-At(b);x.entanglements[1]|=k,b&=~k}ns(g),(Ze&6)===0&&(Vh=Tn()+500,pu(0))}}break;case 31:case 13:x=ga(g,2),x!==null&&Nn(x,g,2),Ph(),Op(g,2)}if(g=kp(u),g===null&&bp(i,r,u,Wh,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else bp(i,r,u,null,o)}}function kp(i){return i=Qn(i),jp(i)}var Wh=null;function jp(i){if(Wh=null,i=Fi(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===31){if(i=f(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Wh=i,null}function TT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ea()){case xl:return 2;case wl:return 8;case Qs:case Hd:return 32;case Ic:return 268435456;default:return 32}default:return 32}}var Lp=!1,Er=null,Sr=null,xr=null,Eu=new Map,Su=new Map,wr=[],EI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bT(i,r){switch(i){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Eu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(r.pointerId)}}function xu(i,r,o,u,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},r!==null&&(r=Yn(r),r!==null&&vT(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function SI(i,r,o,u,m){switch(r){case"focusin":return Er=xu(Er,i,r,o,u,m),!0;case"dragenter":return Sr=xu(Sr,i,r,o,u,m),!0;case"mouseover":return xr=xu(xr,i,r,o,u,m),!0;case"pointerover":var g=m.pointerId;return Eu.set(g,xu(Eu.get(g)||null,i,r,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Su.set(g,xu(Su.get(g)||null,i,r,o,u,m)),!0}return!1}function ET(i){var r=Fi(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,gi(i.priority,function(){_T(o)});return}}else if(r===31){if(r=f(o),r!==null){i.blockedOn=r,gi(i.priority,function(){_T(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Jh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=kp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);jl=u,o.target.dispatchEvent(u),jl=null}else return r=Yn(o),r!==null&&vT(r),i.blockedOn=o,!1;r.shift()}return!0}function ST(i,r,o){Jh(i)&&o.delete(r)}function xI(){Lp=!1,Er!==null&&Jh(Er)&&(Er=null),Sr!==null&&Jh(Sr)&&(Sr=null),xr!==null&&Jh(xr)&&(xr=null),Eu.forEach(ST),Su.forEach(ST)}function Zh(i,r){i.blockedOn===r&&(i.blockedOn=null,Lp||(Lp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,xI)))}var ef=null;function xT(i){ef!==i&&(ef=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ef===i&&(ef=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],m=i[r+2];if(typeof u!="function"){if(jp(u||o)===null)continue;break}var g=Yn(o);g!==null&&(i.splice(r,3),r-=3,km(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Bo(i){function r(k){return Zh(k,i)}Er!==null&&Zh(Er,i),Sr!==null&&Zh(Sr,i),xr!==null&&Zh(xr,i),Eu.forEach(r),Su.forEach(r);for(var o=0;o<wr.length;o++){var u=wr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<wr.length&&(o=wr[0],o.blockedOn===null);)ET(o),o.blockedOn===null&&wr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],b=m[Wt]||null;if(typeof g=="function")b||xT(o);else if(b){var x=null;if(g&&g.hasAttribute("formAction")){if(m=g,b=g[Wt]||null)x=b.formAction;else if(jp(m)!==null)continue}else x=b.action;typeof x=="function"?o[u+1]=x:(o.splice(u,3),u-=3),xT(o)}}}function wT(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function Up(i){this._internalRoot=i}tf.prototype.render=Up.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=qn();gT(o,u,i,r,null,null)},tf.prototype.unmount=Up.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;gT(i.current,2,null,i,null,null),Ph(),r[zi]=null}};function tf(i){this._internalRoot=i}tf.prototype.unstable_scheduleHydration=function(i){if(i){var r=Pc();i={blockedOn:null,target:i,priority:r};for(var o=0;o<wr.length&&r!==0&&r<wr[o].priority;o++);wr.splice(o,0,i),o===0&&ET(i)}};var AT=e.version;if(AT!=="19.2.3")throw Error(s(527,AT,"19.2.3"));oe.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var wI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{mi=nf.inject(wI),sn=nf}catch{}}return Au.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,u="",m=V_,g=O_,b=P_;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=mT(i,1,!1,null,null,o,u,null,m,g,b,wT),i[zi]=r.current,Tp(i),new Up(r)},Au.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var u=!1,m="",g=V_,b=O_,x=P_,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),r=mT(i,1,!0,r,o??null,u,m,k,g,b,x,wT),r.context=pT(null),o=r.current,u=qn(),u=sa(u),m=cr(u),m.callback=null,hr(o,m,u),o=u,r.current.lanes=o,na(r,o),ns(r),i[zi]=r.current,Tp(i),new tf(r)},Au.version="19.2.3",Au}var kT;function PI(){if(kT)return Fp.exports;kT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fp.exports=OI(),Fp.exports}var kI=PI();var jT="popstate";function jI(t={}){function e(a,l){let{pathname:c="/",search:f="",hash:d=""}=Ya(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Rg("",{pathname:c,search:f,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");f=p===-1?d:d.slice(0,p)}return f+"#"+(typeof l=="string"?l:Ku(l))}function s(a,l){fi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return UI(e,n,s,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LI(){return Math.random().toString(36).substring(2,10)}function LT(t,e){return{usr:t.state,key:t.key,idx:e}}function Rg(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ya(e):e,state:n,key:e&&e.key||s||LI()}}function Ku({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ya(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function UI(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,f="POP",d=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function T(){f="POP";let I=y(),P=I==null?null:I-p;p=I,d&&d({action:f,location:O.location,delta:P})}function E(I,P){f="PUSH";let z=Rg(O.location,I,P);n&&n(z,I),p=y()+1;let F=LT(z,p),ue=O.createHref(z);try{c.pushState(F,"",ue)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(ue)}l&&d&&d({action:f,location:O.location,delta:1})}function w(I,P){f="REPLACE";let z=Rg(O.location,I,P);n&&n(z,I),p=y();let F=LT(z,p),ue=O.createHref(z);c.replaceState(F,"",ue),l&&d&&d({action:f,location:O.location,delta:0})}function V(I){return zI(I)}let O={get action(){return f},get location(){return t(a,c)},listen(I){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(jT,T),d=I,()=>{a.removeEventListener(jT,T),d=null}},createHref(I){return e(a,I)},createURL:V,encodeLocation(I){let P=V(I);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:E,replace:w,go(I){return c.go(I)}};return O}function zI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Ku(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function HS(t,e,n="/"){return BI(t,e,n,!1)}function BI(t,e,n,s){let a=typeof e=="string"?Ya(e):e,l=js(a.pathname||"/",n);if(l==null)return null;let c=qS(t);FI(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let p=ZI(l);f=WI(c[d],p,s)}return f}function qS(t,e=[],n=[],s="",a=!1){let l=(c,f,d=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&d)return;Tt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let T=ks([s,y.relativePath]),E=n.concat(y);c.children&&c.children.length>0&&(Tt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),qS(c.children,e,E,T,d)),!(c.path==null&&!c.index)&&e.push({path:T,score:QI(T,c.index),routesMeta:E})};return t.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let d of GS(c.path))l(c,f,!0,d)}),e}function GS(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=GS(s.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...c),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function FI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XI(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var HI=/^:[\w-]+$/,qI=3,GI=2,$I=1,KI=10,YI=-2,UT=t=>t==="*";function QI(t,e){let n=t.split("/"),s=n.length;return n.some(UT)&&(s+=YI),e&&(s+=GI),n.filter(a=>!UT(a)).reduce((a,l)=>a+(HI.test(l)?qI:l===""?$I:KI),s)}function XI(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function WI(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",c=[];for(let f=0;f<s.length;++f){let d=s[f],p=f===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",T=Of({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!T&&p&&n&&!s[s.length-1].route.index&&(T=Of({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:ks([l,T.pathname]),pathnameBase:i5(ks([l,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(l=ks([l,T.pathnameBase]))}return c}function Of(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=JI(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((p,{paramName:y,isOptional:T},E)=>{if(y==="*"){let V=f[E]||"";c=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const w=f[E];return T&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:t}}function JI(t,e=!1,n=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(s.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function ZI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function js(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var $S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e5=t=>$S.test(t);function t5(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Ya(t):t,l;if(n)if(e5(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),fi(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=zT(n.substring(1),"/"):l=zT(n,e)}else l=e;return{pathname:l,search:s5(s),hash:r5(a)}}function zT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function $p(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function n5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function KS(t){let e=n5(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function YS(t,e,n,s=!1){let a;typeof t=="string"?a=Ya(t):(a={...t},Tt(!a.pathname||!a.pathname.includes("?"),$p("?","pathname","search",a)),Tt(!a.pathname||!a.pathname.includes("#"),$p("#","pathname","hash",a)),Tt(!a.search||!a.search.includes("#"),$p("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=n;else{let T=e.length-1;if(!s&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),T-=1;a.pathname=E.join("/")}f=T>=0?e[T]:"/"}let d=t5(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var ks=t=>t.join("/").replace(/\/\/+/g,"/"),i5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),s5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,a5=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function o5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function l5(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function XS(t,e){let n=t;if(typeof n!="string"||!$S.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(QS)try{let l=new URL(window.location.href),c=n.startsWith("//")?new URL(l.protocol+n):new URL(n),f=js(c.pathname,e);c.origin===l.origin&&f!=null?n=f+c.search+c.hash:a=!0}catch{fi(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var WS=["POST","PUT","PATCH","DELETE"];new Set(WS);var u5=["GET",...WS];new Set(u5);var fl=M.createContext(null);fl.displayName="DataRouter";var cd=M.createContext(null);cd.displayName="DataRouterState";var c5=M.createContext(!1),JS=M.createContext({isTransitioning:!1});JS.displayName="ViewTransition";var h5=M.createContext(new Map);h5.displayName="Fetchers";var f5=M.createContext(null);f5.displayName="Await";var di=M.createContext(null);di.displayName="Navigation";var uc=M.createContext(null);uc.displayName="Location";var $s=M.createContext({outlet:null,matches:[],isDataRoute:!1});$s.displayName="Route";var Ay=M.createContext(null);Ay.displayName="RouteError";var ZS="REACT_ROUTER_ERROR",d5="REDIRECT",m5="ROUTE_ERROR_RESPONSE";function p5(t){if(t.startsWith(`${ZS}:${d5}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function g5(t){if(t.startsWith(`${ZS}:${m5}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new a5(e.status,e.statusText,e.data)}catch{}}function y5(t,{relative:e}={}){Tt(cc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=M.useContext(di),{hash:a,pathname:l,search:c}=hc(t,{relative:e}),f=l;return n!=="/"&&(f=l==="/"?n:ks([n,l])),s.createHref({pathname:f,search:c,hash:a})}function cc(){return M.useContext(uc)!=null}function Oi(){return Tt(cc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(uc).location}var ex="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tx(t){M.useContext(di).static||M.useLayoutEffect(t)}function nx(){let{isDataRoute:t}=M.useContext($s);return t?D5():v5()}function v5(){Tt(cc(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(fl),{basename:e,navigator:n}=M.useContext(di),{matches:s}=M.useContext($s),{pathname:a}=Oi(),l=JSON.stringify(KS(s)),c=M.useRef(!1);return tx(()=>{c.current=!0}),M.useCallback((d,p={})=>{if(fi(c.current,ex),!c.current)return;if(typeof d=="number"){n.go(d);return}let y=YS(d,JSON.parse(l),a,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ks([e,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[e,n,l,a,t])}M.createContext(null);function hc(t,{relative:e}={}){let{matches:n}=M.useContext($s),{pathname:s}=Oi(),a=JSON.stringify(KS(n));return M.useMemo(()=>YS(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function _5(t,e){return ix(t,e)}function ix(t,e,n,s,a){Tt(cc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(di),{matches:c}=M.useContext($s),f=c[c.length-1],d=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",T=f&&f.route;{let z=T&&T.path||"";rx(p,!T||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Oi(),w;if(e){let z=typeof e=="string"?Ya(e):e;Tt(y==="/"||z.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),w=z}else w=E;let V=w.pathname||"/",O=V;if(y!=="/"){let z=y.replace(/^\//,"").split("/");O="/"+V.replace(/^\//,"").split("/").slice(z.length).join("/")}let I=HS(t,{pathname:O});fi(T||I!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),fi(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=x5(I&&I.map(z=>Object.assign({},z,{params:Object.assign({},d,z.params),pathname:ks([y,l.encodeLocation?l.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:ks([y,l.encodeLocation?l.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,n,s,a);return e&&P?M.createElement(uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},P):P}function T5(){let t=I5(),e=o5(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:a},n):null,c)}var b5=M.createElement(T5,null),sx=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=g5(t.digest);n&&(t=n)}let e=t!==void 0?M.createElement($s.Provider,{value:this.props.routeContext},M.createElement(Ay.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?M.createElement(E5,{error:t},e):e}};sx.contextType=c5;var Kp=new WeakMap;function E5({children:t,error:e}){let{basename:n}=M.useContext(di);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=p5(e.digest);if(s){let a=Kp.get(e);if(a)throw a;let l=XS(s.location,n);if(QS&&!Kp.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw Kp.set(e,c),c}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function S5({routeContext:t,match:e,children:n}){let s=M.useContext(fl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement($s.Provider,{value:t},n)}function x5(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let y=l.findIndex(T=>T.route.id&&c?.[T.route.id]!==void 0);Tt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,d=-1;if(n)for(let y=0;y<l.length;y++){let T=l[y];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(d=y),T.route.id){let{loaderData:E,errors:w}=n,V=T.route.loader&&!E.hasOwnProperty(T.route.id)&&(!w||w[T.route.id]===void 0);if(T.route.lazy||V){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let p=n&&s?(y,T)=>{s(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:l5(n.matches),errorInfo:T})}:void 0;return l.reduceRight((y,T,E)=>{let w,V=!1,O=null,I=null;n&&(w=c&&T.route.id?c[T.route.id]:void 0,O=T.route.errorElement||b5,f&&(d<0&&E===0?(rx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,I=null):d===E&&(V=!0,I=T.route.hydrateFallbackElement||null)));let P=e.concat(l.slice(0,E+1)),z=()=>{let F;return w?F=O:V?F=I:T.route.Component?F=M.createElement(T.route.Component,null):T.route.element?F=T.route.element:F=y,M.createElement(S5,{match:T,routeContext:{outlet:y,matches:P,isDataRoute:n!=null},children:F})};return n&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?M.createElement(sx,{location:n.location,revalidation:n.revalidation,component:O,error:w,children:z(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:p}):z()},null)}function Ry(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w5(t){let e=M.useContext(fl);return Tt(e,Ry(t)),e}function A5(t){let e=M.useContext(cd);return Tt(e,Ry(t)),e}function R5(t){let e=M.useContext($s);return Tt(e,Ry(t)),e}function Cy(t){let e=R5(t),n=e.matches[e.matches.length-1];return Tt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function C5(){return Cy("useRouteId")}function I5(){let t=M.useContext(Ay),e=A5("useRouteError"),n=Cy("useRouteError");return t!==void 0?t:e.errors?.[n]}function D5(){let{router:t}=w5("useNavigate"),e=Cy("useNavigate"),n=M.useRef(!1);return tx(()=>{n.current=!0}),M.useCallback(async(a,l={})=>{fi(n.current,ex),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var BT={};function rx(t,e,n){!e&&!BT[t]&&(BT[t]=!0,fi(!1,n))}M.memo(M5);function M5({routes:t,future:e,state:n,onError:s}){return ix(t,void 0,n,s,e)}function pf(t){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function N5({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Tt(!cc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[f,a,l,c]);typeof n=="string"&&(n=Ya(n));let{pathname:p="/",search:y="",hash:T="",state:E=null,key:w="default"}=n,V=M.useMemo(()=>{let O=js(p,f);return O==null?null:{location:{pathname:O,search:y,hash:T,state:E,key:w},navigationType:s}},[f,p,y,T,E,w,s]);return fi(V!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${T}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:M.createElement(di.Provider,{value:d},M.createElement(uc.Provider,{children:e,value:V}))}function V5({children:t,location:e}){return _5(Cg(t),e)}function Cg(t,e=[]){let n=[];return M.Children.forEach(t,(s,a)=>{if(!M.isValidElement(s))return;let l=[...e,a];if(s.type===M.Fragment){n.push.apply(n,Cg(s.props.children,l));return}Tt(s.type===pf,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Cg(s.props.children,l)),n.push(c)}),n}var gf="get",yf="application/x-www-form-urlencoded";function hd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function O5(t){return hd(t)&&t.tagName.toLowerCase()==="button"}function P5(t){return hd(t)&&t.tagName.toLowerCase()==="form"}function k5(t){return hd(t)&&t.tagName.toLowerCase()==="input"}function j5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function L5(t,e){return t.button===0&&(!e||e==="_self")&&!j5(t)}var sf=null;function U5(){if(sf===null)try{new FormData(document.createElement("form"),0),sf=!1}catch{sf=!0}return sf}var z5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yp(t){return t!=null&&!z5.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yf}"`),null):t}function B5(t,e){let n,s,a,l,c;if(P5(t)){let f=t.getAttribute("action");s=f?js(f,e):null,n=t.getAttribute("method")||gf,a=Yp(t.getAttribute("enctype"))||yf,l=new FormData(t)}else if(O5(t)||k5(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||f.getAttribute("action");if(s=d?js(d,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||gf,a=Yp(t.getAttribute("formenctype"))||Yp(f.getAttribute("enctype"))||yf,l=new FormData(f,t),!U5()){let{name:p,type:y,value:T}=t;if(y==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,T)}}else{if(hd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gf,s=null,a=yf,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function F5(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&js(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function H5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function q5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function G5(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await H5(l,n);return c.links?c.links():[]}return[]}));return Q5(s.flat(1).filter(q5).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function FT(t,e,n,s,a,l){let c=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,f=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,p)=>c(d,p)||f(d,p)):l==="data"?e.filter((d,p)=>{let y=s.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let T=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function $5(t,e,{includeHydrateFallback:n}={}){return K5(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function K5(t){return[...new Set(t)]}function Y5(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function Q5(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(Y5(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function ax(){let t=M.useContext(fl);return Iy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function X5(){let t=M.useContext(cd);return Iy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Dy=M.createContext(void 0);Dy.displayName="FrameworkContext";function ox(){let t=M.useContext(Dy);return Iy(t,"You must render this element inside a <HydratedRouter> element"),t}function W5(t,e){let n=M.useContext(Dy),[s,a]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:T}=e,E=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let O=P=>{P.forEach(z=>{c(z.isIntersecting)})},I=new IntersectionObserver(O,{threshold:.5});return E.current&&I.observe(E.current),()=>{I.disconnect()}}},[t]),M.useEffect(()=>{if(s){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[s]);let w=()=>{a(!0)},V=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,E,{}]:[l,E,{onFocus:Ru(f,w),onBlur:Ru(d,V),onMouseEnter:Ru(p,w),onMouseLeave:Ru(y,V),onTouchStart:Ru(T,w)}]:[!1,E,{}]}function Ru(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function J5({page:t,...e}){let{router:n}=ax(),s=M.useMemo(()=>HS(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?M.createElement(eD,{page:t,matches:s,...e}):null}function Z5(t){let{manifest:e,routeModules:n}=ox(),[s,a]=M.useState([]);return M.useEffect(()=>{let l=!1;return G5(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),s}function eD({page:t,matches:e,...n}){let s=Oi(),{manifest:a,routeModules:l}=ox(),{basename:c}=ax(),{loaderData:f,matches:d}=X5(),p=M.useMemo(()=>FT(t,e,d,a,s,"data"),[t,e,d,a,s]),y=M.useMemo(()=>FT(t,e,d,a,s,"assets"),[t,e,d,a,s]),T=M.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let V=new Set,O=!1;if(e.forEach(P=>{let z=a.routes[P.route.id];!z||!z.hasLoader||(!p.some(F=>F.route.id===P.route.id)&&P.route.id in f&&l[P.route.id]?.shouldRevalidate||z.hasClientLoader?O=!0:V.add(P.route.id))}),V.size===0)return[];let I=F5(t,c,"data");return O&&V.size>0&&I.searchParams.set("_routes",e.filter(P=>V.has(P.route.id)).map(P=>P.route.id).join(",")),[I.pathname+I.search]},[c,f,s,a,p,e,t,l]),E=M.useMemo(()=>$5(y,a),[y,a]),w=Z5(y);return M.createElement(M.Fragment,null,T.map(V=>M.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),E.map(V=>M.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),w.map(({key:V,link:O})=>M.createElement("link",{key:V,nonce:n.nonce,...O})))}function tD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var nD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nD&&(window.__reactRouterVersion="7.11.0")}catch{}function iD({basename:t,children:e,unstable_useTransitions:n,window:s}){let a=M.useRef();a.current==null&&(a.current=jI({window:s,v5Compat:!0}));let l=a.current,[c,f]=M.useState({action:l.action,location:l.location}),d=M.useCallback(p=>{n===!1?f(p):M.startTransition(()=>f(p))},[n]);return M.useLayoutEffect(()=>l.listen(d),[l,d]),M.createElement(N5,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:n})}var lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yu=M.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:f,target:d,to:p,preventScrollReset:y,viewTransition:T,unstable_defaultShouldRevalidate:E,...w},V){let{basename:O,unstable_useTransitions:I}=M.useContext(di),P=typeof p=="string"&&lx.test(p),z=XS(p,O);p=z.to;let F=y5(p,{relative:a}),[ue,Y,ae]=W5(s,w),C=oD(p,{replace:c,state:f,target:d,preventScrollReset:y,relative:a,viewTransition:T,unstable_defaultShouldRevalidate:E,unstable_useTransitions:I});function A(L){e&&e(L),L.defaultPrevented||C(L)}let N=M.createElement("a",{...w,...ae,href:z.absoluteURL||F,onClick:z.isExternal||l?e:A,ref:tD(V,Y),target:d,"data-discover":!P&&n==="render"?"true":void 0});return ue&&!P?M.createElement(M.Fragment,null,N,M.createElement(J5,{page:F})):N});Yu.displayName="Link";var sD=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:f,children:d,...p},y){let T=hc(c,{relative:p.relative}),E=Oi(),w=M.useContext(cd),{navigator:V,basename:O}=M.useContext(di),I=w!=null&&fD(T)&&f===!0,P=V.encodeLocation?V.encodeLocation(T).pathname:T.pathname,z=E.pathname,F=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(z=z.toLowerCase(),F=F?F.toLowerCase():null,P=P.toLowerCase()),F&&O&&(F=js(F,O)||F);const ue=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Y=z===P||!a&&z.startsWith(P)&&z.charAt(ue)==="/",ae=F!=null&&(F===P||!a&&F.startsWith(P)&&F.charAt(P.length)==="/"),C={isActive:Y,isPending:ae,isTransitioning:I},A=Y?e:void 0,N;typeof s=="function"?N=s(C):N=[s,Y?"active":null,ae?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(C):l;return M.createElement(Yu,{...p,"aria-current":A,className:N,ref:y,style:L,to:c,viewTransition:f},typeof d=="function"?d(C):d)});sD.displayName="NavLink";var rD=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:c=gf,action:f,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:T,unstable_defaultShouldRevalidate:E,...w},V)=>{let{unstable_useTransitions:O}=M.useContext(di),I=cD(),P=hD(f,{relative:p}),z=c.toLowerCase()==="get"?"get":"post",F=typeof f=="string"&&lx.test(f),ue=Y=>{if(d&&d(Y),Y.defaultPrevented)return;Y.preventDefault();let ae=Y.nativeEvent.submitter,C=ae?.getAttribute("formmethod")||c,A=()=>I(ae||Y.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:T,unstable_defaultShouldRevalidate:E});O&&n!==!1?M.startTransition(()=>A()):A()};return M.createElement("form",{ref:V,method:z,action:P,onSubmit:s?d:ue,...w,"data-discover":!F&&t==="render"?"true":void 0})});rD.displayName="Form";function aD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ux(t){let e=M.useContext(fl);return Tt(e,aD(t)),e}function oD(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let p=nx(),y=Oi(),T=hc(t,{relative:l});return M.useCallback(E=>{if(L5(E,e)){E.preventDefault();let w=n!==void 0?n:Ku(y)===Ku(T),V=()=>p(t,{replace:w,state:s,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});d?M.startTransition(()=>V()):V()}},[y,p,T,n,s,e,t,a,l,c,f,d])}var lD=0,uD=()=>`__${String(++lD)}__`;function cD(){let{router:t}=ux("useSubmit"),{basename:e}=M.useContext(di),n=C5(),s=t.fetch,a=t.navigate;return M.useCallback(async(l,c={})=>{let{action:f,method:d,encType:p,formData:y,body:T}=B5(l,e);if(c.navigate===!1){let E=c.fetcherKey||uD();await s(E,n,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:T,formMethod:c.method||d,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:T,formMethod:c.method||d,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,a,e,n])}function hD(t,{relative:e}={}){let{basename:n}=M.useContext(di),s=M.useContext($s);Tt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...hc(t||".",{relative:e})},c=Oi();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(y=>y==="")){f.delete("index"),d.filter(T=>T).forEach(T=>f.append("index",T));let y=f.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:ks([n,l.pathname])),Ku(l)}function fD(t,{relative:e}={}){let n=M.useContext(JS);Tt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ux("useViewTransitionState"),a=hc(t,{relative:e});if(!n.isTransitioning)return!1;let l=js(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=js(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Of(a.pathname,c)!=null||Of(a.pathname,l)!=null}const My=M.createContext({});function Qr(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ny=typeof window<"u",Vy=Ny?M.useLayoutEffect:M.useEffect,fd=M.createContext(null);function Oy(t,e){t.indexOf(e)===-1&&t.push(e)}function Py(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function dD([...t],e,n){const s=e<0?t.length+e:e;if(s>=0&&s<t.length){const a=n<0?t.length+n:n,[l]=t.splice(e,1);t.splice(a,0,l)}return t}const Ls=(t,e,n)=>n>e?e:n<t?t:n;let ky=()=>{};const Us={},cx=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function hx(t){return typeof t=="object"&&t!==null}const fx=t=>/^0[^.\s]+$/u.test(t);function jy(t){let e;return()=>(e===void 0&&(e=t()),e)}const ci=t=>t,mD=(t,e)=>n=>e(t(n)),fc=(...t)=>t.reduce(mD),Qu=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Ly{constructor(){this.subscriptions=[]}add(e){return Oy(this.subscriptions,e),()=>Py(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ss=t=>t*1e3,ui=t=>t/1e3;function dx(t,e){return e?t*(1e3/e):0}const mx=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,pD=1e-7,gD=12;function yD(t,e,n,s,a){let l,c,f=0;do c=e+(n-e)/2,l=mx(c,s,a)-t,l>0?n=c:e=c;while(Math.abs(l)>pD&&++f<gD);return c}function dc(t,e,n,s){if(t===e&&n===s)return ci;const a=l=>yD(l,0,1,t,n);return l=>l===0||l===1?l:mx(a(l),e,s)}const px=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,gx=t=>e=>1-t(1-e),yx=dc(.33,1.53,.69,.99),Uy=gx(yx),vx=px(Uy),_x=t=>(t*=2)<1?.5*Uy(t):.5*(2-Math.pow(2,-10*(t-1))),zy=t=>1-Math.sin(Math.acos(t)),Tx=gx(zy),bx=px(zy),vD=dc(.42,0,1,1),_D=dc(0,0,.58,1),Ex=dc(.42,0,.58,1),TD=t=>Array.isArray(t)&&typeof t[0]!="number",Sx=t=>Array.isArray(t)&&typeof t[0]=="number",bD={linear:ci,easeIn:vD,easeInOut:Ex,easeOut:_D,circIn:zy,circInOut:bx,circOut:Tx,backIn:Uy,backInOut:vx,backOut:yx,anticipate:_x},ED=t=>typeof t=="string",HT=t=>{if(Sx(t)){ky(t.length===4);const[e,n,s,a]=t;return dc(e,n,s,a)}else if(ED(t))return bD[t];return t},rf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function SD(t,e){let n=new Set,s=new Set,a=!1,l=!1;const c=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(y){c.has(y)&&(p.schedule(y),t()),y(f)}const p={schedule:(y,T=!1,E=!1)=>{const V=E&&a?n:s;return T&&c.add(y),V.has(y)||V.add(y),y},cancel:y=>{s.delete(y),c.delete(y)},process:y=>{if(f=y,a){l=!0;return}a=!0,[n,s]=[s,n],n.forEach(d),n.clear(),a=!1,l&&(l=!1,p.process(y))}};return p}const xD=40;function xx(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=rf.reduce((F,ue)=>(F[ue]=SD(l),F),{}),{setup:f,read:d,resolveKeyframes:p,preUpdate:y,update:T,preRender:E,render:w,postRender:V}=c,O=()=>{const F=Us.useManualTiming?a.timestamp:performance.now();n=!1,Us.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(F-a.timestamp,xD),1)),a.timestamp=F,a.isProcessing=!0,f.process(a),d.process(a),p.process(a),y.process(a),T.process(a),E.process(a),w.process(a),V.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(O))},I=()=>{n=!0,s=!0,a.isProcessing||t(O)};return{schedule:rf.reduce((F,ue)=>{const Y=c[ue];return F[ue]=(ae,C=!1,A=!1)=>(n||I(),Y.schedule(ae,C,A)),F},{}),cancel:F=>{for(let ue=0;ue<rf.length;ue++)c[rf[ue]].cancel(F)},state:a,steps:c}}const{schedule:gt,cancel:zs,state:cn,steps:Qp}=xx(typeof requestAnimationFrame<"u"?requestAnimationFrame:ci,!0);let vf;function wD(){vf=void 0}const Pn={now:()=>(vf===void 0&&Pn.set(cn.isProcessing||Us.useManualTiming?cn.timestamp:performance.now()),vf),set:t=>{vf=t,queueMicrotask(wD)}},wx=t=>e=>typeof e=="string"&&e.startsWith(t),Ax=wx("--"),AD=wx("var(--"),By=t=>AD(t)?RD.test(t.split("/*")[0].trim()):!1,RD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xu={...dl,transform:t=>Ls(0,1,t)},af={...dl,default:1},Pu=t=>Math.round(t*1e5)/1e5,Fy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CD(t){return t==null}const ID=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Hy=(t,e)=>n=>!!(typeof n=="string"&&ID.test(n)&&n.startsWith(t)||e&&!CD(n)&&Object.prototype.hasOwnProperty.call(n,e)),Rx=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,l,c,f]=s.match(Fy);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},DD=t=>Ls(0,255,t),Xp={...dl,transform:t=>Math.round(DD(t))},Na={test:Hy("rgb","red"),parse:Rx("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Xp.transform(t)+", "+Xp.transform(e)+", "+Xp.transform(n)+", "+Pu(Xu.transform(s))+")"};function MD(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Ig={test:Hy("#"),parse:MD,transform:Na.transform},mc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Cr=mc("deg"),rs=mc("%"),Ce=mc("px"),ND=mc("vh"),VD=mc("vw"),qT={...rs,parse:t=>rs.parse(t)/100,transform:t=>rs.transform(t*100)},$o={test:Hy("hsl","hue"),parse:Rx("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+rs.transform(Pu(e))+", "+rs.transform(Pu(n))+", "+Pu(Xu.transform(s))+")"},Ft={test:t=>Na.test(t)||Ig.test(t)||$o.test(t),parse:t=>Na.test(t)?Na.parse(t):$o.test(t)?$o.parse(t):Ig.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Na.transform(t):$o.transform(t),getAnimatableNone:t=>{const e=Ft.parse(t);return e.alpha=0,Ft.transform(e)}},OD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PD(t){return isNaN(t)&&typeof t=="string"&&(t.match(Fy)?.length||0)+(t.match(OD)?.length||0)>0}const Cx="number",Ix="color",kD="var",jD="var(",GT="${}",LD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wu(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let l=0;const f=e.replace(LD,d=>(Ft.test(d)?(s.color.push(l),a.push(Ix),n.push(Ft.parse(d))):d.startsWith(jD)?(s.var.push(l),a.push(kD),n.push(d)):(s.number.push(l),a.push(Cx),n.push(parseFloat(d))),++l,GT)).split(GT);return{values:n,split:f,indexes:s,types:a}}function Dx(t){return Wu(t).values}function Mx(t){const{split:e,types:n}=Wu(t),s=e.length;return a=>{let l="";for(let c=0;c<s;c++)if(l+=e[c],a[c]!==void 0){const f=n[c];f===Cx?l+=Pu(a[c]):f===Ix?l+=Ft.transform(a[c]):l+=a[c]}return l}}const UD=t=>typeof t=="number"?0:Ft.test(t)?Ft.getAnimatableNone(t):t;function zD(t){const e=Dx(t);return Mx(t)(e.map(UD))}const zr={test:PD,parse:Dx,createTransformer:Mx,getAnimatableNone:zD};function Wp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function BD({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,l=0,c=0;if(!e)a=l=c=n;else{const f=n<.5?n*(1+e):n+e-n*e,d=2*n-f;a=Wp(d,f,t+1/3),l=Wp(d,f,t),c=Wp(d,f,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:s}}function Pf(t,e){return n=>n>0?e:t}const _t=(t,e,n)=>t+(e-t)*n,Jp=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},FD=[Ig,Na,$o],HD=t=>FD.find(e=>e.test(t));function $T(t){const e=HD(t);if(!e)return!1;let n=e.parse(t);return e===$o&&(n=BD(n)),n}const KT=(t,e)=>{const n=$T(t),s=$T(e);if(!n||!s)return Pf(t,e);const a={...n};return l=>(a.red=Jp(n.red,s.red,l),a.green=Jp(n.green,s.green,l),a.blue=Jp(n.blue,s.blue,l),a.alpha=_t(n.alpha,s.alpha,l),Na.transform(a))},Dg=new Set(["none","hidden"]);function qD(t,e){return Dg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function GD(t,e){return n=>_t(t,e,n)}function qy(t){return typeof t=="number"?GD:typeof t=="string"?By(t)?Pf:Ft.test(t)?KT:YD:Array.isArray(t)?Nx:typeof t=="object"?Ft.test(t)?KT:$D:Pf}function Nx(t,e){const n=[...t],s=n.length,a=t.map((l,c)=>qy(l)(l,e[c]));return l=>{for(let c=0;c<s;c++)n[c]=a[c](l);return n}}function $D(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=qy(t[a])(t[a],e[a]));return a=>{for(const l in s)n[l]=s[l](a);return n}}function KD(t,e){const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][s[l]],f=t.values[c]??0;n[a]=f,s[l]++}return n}const YD=(t,e)=>{const n=zr.createTransformer(e),s=Wu(t),a=Wu(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?Dg.has(t)&&!a.values.length||Dg.has(e)&&!s.values.length?qD(t,e):fc(Nx(KD(s,a),a.values),n):Pf(t,e)};function Vx(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?_t(t,e,n):qy(t)(t,e)}const QD=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>gt.update(e,n),stop:()=>zs(e),now:()=>cn.isProcessing?cn.timestamp:Pn.now()}},Ox=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)s+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},kf=2e4;function Gy(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<kf;)e+=n,s=t.next(e);return e>=kf?1/0:e}function XD(t,e=100,n){const s=n({...t,keyframes:[0,e]}),a=Math.min(Gy(s),kf);return{type:"keyframes",ease:l=>s.next(a*l).value/e,duration:ui(a)}}const WD=5;function Px(t,e,n){const s=Math.max(e-WD,0);return dx(n-t(s),e-s)}const xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Zp=.001;function JD({duration:t=xt.duration,bounce:e=xt.bounce,velocity:n=xt.velocity,mass:s=xt.mass}){let a,l,c=1-e;c=Ls(xt.minDamping,xt.maxDamping,c),t=Ls(xt.minDuration,xt.maxDuration,ui(t)),c<1?(a=p=>{const y=p*c,T=y*t,E=y-n,w=Mg(p,c),V=Math.exp(-T);return Zp-E/w*V},l=p=>{const T=p*c*t,E=T*n+n,w=Math.pow(c,2)*Math.pow(p,2)*t,V=Math.exp(-T),O=Mg(Math.pow(p,2),c);return(-a(p)+Zp>0?-1:1)*((E-w)*V)/O}):(a=p=>{const y=Math.exp(-p*t),T=(p-n)*t+1;return-Zp+y*T},l=p=>{const y=Math.exp(-p*t),T=(n-p)*(t*t);return y*T});const f=5/t,d=eM(a,l,f);if(t=ss(t),isNaN(d))return{stiffness:xt.stiffness,damping:xt.damping,duration:t};{const p=Math.pow(d,2)*s;return{stiffness:p,damping:c*2*Math.sqrt(s*p),duration:t}}}const ZD=12;function eM(t,e,n){let s=n;for(let a=1;a<ZD;a++)s=s-t(s)/e(s);return s}function Mg(t,e){return t*Math.sqrt(1-e*e)}const tM=["duration","bounce"],nM=["stiffness","damping","mass"];function YT(t,e){return e.some(n=>t[n]!==void 0)}function iM(t){let e={velocity:xt.velocity,stiffness:xt.stiffness,damping:xt.damping,mass:xt.mass,isResolvedFromDuration:!1,...t};if(!YT(t,nM)&&YT(t,tM))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,l=2*Ls(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:xt.mass,stiffness:a,damping:l}}else{const n=JD(t);e={...e,...n,mass:xt.mass},e.isResolvedFromDuration=!0}return e}function jf(t=xt.visualDuration,e=xt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],f={done:!1,value:l},{stiffness:d,damping:p,mass:y,duration:T,velocity:E,isResolvedFromDuration:w}=iM({...n,velocity:-ui(n.velocity||0)}),V=E||0,O=p/(2*Math.sqrt(d*y)),I=c-l,P=ui(Math.sqrt(d/y)),z=Math.abs(I)<5;s||(s=z?xt.restSpeed.granular:xt.restSpeed.default),a||(a=z?xt.restDelta.granular:xt.restDelta.default);let F;if(O<1){const Y=Mg(P,O);F=ae=>{const C=Math.exp(-O*P*ae);return c-C*((V+O*P*I)/Y*Math.sin(Y*ae)+I*Math.cos(Y*ae))}}else if(O===1)F=Y=>c-Math.exp(-P*Y)*(I+(V+P*I)*Y);else{const Y=P*Math.sqrt(O*O-1);F=ae=>{const C=Math.exp(-O*P*ae),A=Math.min(Y*ae,300);return c-C*((V+O*P*I)*Math.sinh(A)+Y*I*Math.cosh(A))/Y}}const ue={calculatedDuration:w&&T||null,next:Y=>{const ae=F(Y);if(w)f.done=Y>=T;else{let C=Y===0?V:0;O<1&&(C=Y===0?ss(V):Px(F,Y,ae));const A=Math.abs(C)<=s,N=Math.abs(c-ae)<=a;f.done=A&&N}return f.value=f.done?c:ae,f},toString:()=>{const Y=Math.min(Gy(ue),kf),ae=Ox(C=>ue.next(Y*C).value,Y,30);return Y+"ms "+ae},toTransition:()=>{}};return ue}jf.applyToOptions=t=>{const e=XD(t,100,jf);return t.ease=e.ease,t.duration=ss(e.duration),t.type="keyframes",t};function Ng({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:d,restDelta:p=.5,restSpeed:y}){const T=t[0],E={done:!1,value:T},w=A=>f!==void 0&&A<f||d!==void 0&&A>d,V=A=>f===void 0?d:d===void 0||Math.abs(f-A)<Math.abs(d-A)?f:d;let O=n*e;const I=T+O,P=c===void 0?I:c(I);P!==I&&(O=P-T);const z=A=>-O*Math.exp(-A/s),F=A=>P+z(A),ue=A=>{const N=z(A),L=F(A);E.done=Math.abs(N)<=p,E.value=E.done?P:L};let Y,ae;const C=A=>{w(E.value)&&(Y=A,ae=jf({keyframes:[E.value,V(E.value)],velocity:Px(F,A,E.value),damping:a,stiffness:l,restDelta:p,restSpeed:y}))};return C(0),{calculatedDuration:null,next:A=>{let N=!1;return!ae&&Y===void 0&&(N=!0,ue(A),C(A)),Y!==void 0&&A>=Y?ae.next(A-Y):(!N&&ue(A),E)}}}function sM(t,e,n){const s=[],a=n||Us.mix||Vx,l=t.length-1;for(let c=0;c<l;c++){let f=a(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||ci:e;f=fc(d,f)}s.push(f)}return s}function kx(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const l=t.length;if(ky(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=sM(e,s,a),d=f.length,p=y=>{if(c&&y<t[0])return e[0];let T=0;if(d>1)for(;T<t.length-2&&!(y<t[T+1]);T++);const E=Qu(t[T],t[T+1],y);return f[T](E)};return n?y=>p(Ls(t[0],t[l-1],y)):p}function rM(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=Qu(0,e,s);t.push(_t(n,1,a))}}function aM(t){const e=[0];return rM(e,t.length-1),e}function oM(t,e){return t.map(n=>n*e)}function lM(t,e){return t.map(()=>e||Ex).splice(0,t.length-1)}function ku({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=TD(s)?s.map(HT):HT(s),l={done:!1,value:e[0]},c=oM(n&&n.length===e.length?n:aM(e),t),f=kx(c,e,{ease:Array.isArray(a)?a:lM(e,a)});return{calculatedDuration:t,next:d=>(l.value=f(d),l.done=d>=t,l)}}const uM=t=>t!==null;function $y(t,{repeat:e,repeatType:n="loop"},s,a=1){const l=t.filter(uM),f=a<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!f||s===void 0?l[f]:s}const cM={decay:Ng,inertia:Ng,tween:ku,keyframes:ku,spring:jf};function jx(t){typeof t.type=="string"&&(t.type=cM[t.type])}class Ky{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const hM=t=>t/100;class Yy extends Ky{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Pn.now()&&this.tick(Pn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;jx(e);const{type:n=ku,repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:f}=e;const d=n||ku;d!==ku&&typeof f[0]!="number"&&(this.mixKeyframes=fc(hM,Vx(f[0],f[1])),f=[0,100]);const p=d({...e,keyframes:f});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-c})),p.calculatedDuration===null&&(p.calculatedDuration=Gy(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:y,repeat:T,repeatType:E,repeatDelay:w,type:V,onUpdate:O,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const P=this.currentTime-p*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?P<0:P>a;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let F=this.currentTime,ue=s;if(T){const A=Math.min(this.currentTime,a)/f;let N=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&N--,N=Math.min(N,T+1),N%2&&(E==="reverse"?(L=1-L,w&&(L-=w/f)):E==="mirror"&&(ue=c)),F=Ls(0,1,L)*f}const Y=z?{done:!1,value:y[0]}:ue.next(F);l&&(Y.value=l(Y.value));let{done:ae}=Y;!z&&d!==null&&(ae=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ae);return C&&V!==Ng&&(Y.value=$y(y,this.options,I,this.speed)),O&&O(Y.value),C&&this.finish(),Y}then(e,n){return this.finished.then(e,n)}get duration(){return ui(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ui(e)}get time(){return ui(this.currentTime)}set time(e){e=ss(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ui(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=QD,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fM(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Va=t=>t*180/Math.PI,Vg=t=>{const e=Va(Math.atan2(t[1],t[0]));return Og(e)},dM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Vg,rotateZ:Vg,skewX:t=>Va(Math.atan(t[1])),skewY:t=>Va(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Og=t=>(t=t%360,t<0&&(t+=360),t),QT=Vg,XT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),WT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),mM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:XT,scaleY:WT,scale:t=>(XT(t)+WT(t))/2,rotateX:t=>Og(Va(Math.atan2(t[6],t[5]))),rotateY:t=>Og(Va(Math.atan2(-t[2],t[0]))),rotateZ:QT,rotate:QT,skewX:t=>Va(Math.atan(t[4])),skewY:t=>Va(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Pg(t){return t.includes("scale")?1:0}function kg(t,e){if(!t||t==="none")return Pg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=mM,a=n;else{const f=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=dM,a=f}if(!a)return Pg(e);const l=s[e],c=a[1].split(",").map(gM);return typeof l=="function"?l(c):c[l]}const pM=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return kg(n,e)};function gM(t){return parseFloat(t.trim())}const ml=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pl=new Set(ml),JT=t=>t===dl||t===Ce,yM=new Set(["x","y","z"]),vM=ml.filter(t=>!yM.has(t));function _M(t){const e=[];return vM.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const ja={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>kg(e,"x"),y:(t,{transform:e})=>kg(e,"y")};ja.translateX=ja.x;ja.translateY=ja.y;const La=new Set;let jg=!1,Lg=!1,Ug=!1;function Lx(){if(Lg){const t=Array.from(La).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=_M(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([l,c])=>{s.getValue(l)?.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Lg=!1,jg=!1,La.forEach(t=>t.complete(Ug)),La.clear()}function Ux(){La.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Lg=!0)})}function TM(){Ug=!0,Ux(),Lx(),Ug=!1}class Qy{constructor(e,n,s,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(La.add(this),jg||(jg=!0,gt.read(Ux),gt.resolveKeyframes(Lx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;if(e[0]===null){const l=a?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const f=s.readValue(n,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}fM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),La.delete(this)}cancel(){this.state==="scheduled"&&(La.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bM=t=>t.startsWith("--");function EM(t,e,n){bM(e)?t.style.setProperty(e,n):t.style[e]=n}const SM=jy(()=>window.ScrollTimeline!==void 0),xM={};function wM(t,e){const n=jy(t);return()=>xM[e]??n()}const zx=wM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Iu=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,ZT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Iu([0,.65,.55,1]),circOut:Iu([.55,0,1,.45]),backIn:Iu([.31,.01,.66,-.59]),backOut:Iu([.33,1.53,.69,.99])};function Bx(t,e){if(t)return typeof t=="function"?zx()?Ox(t,e):"ease-out":Sx(t)?Iu(t):Array.isArray(t)?t.map(n=>Bx(n,e)||ZT.easeOut):ZT[t]}function AM(t,e,n,{delay:s=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:f="easeOut",times:d}={},p=void 0){const y={[e]:n};d&&(y.offset=d);const T=Bx(f,a);Array.isArray(T)&&(y.easing=T);const E={delay:s,duration:a,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return p&&(E.pseudoElement=p),t.animate(y,E)}function Fx(t){return typeof t=="function"&&"applyToOptions"in t}function RM({type:t,...e}){return Fx(t)&&zx()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class CM extends Ky{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,ky(typeof e.type!="string");const p=RM(e);this.animation=AM(n,s,a,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=$y(a,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(y):EM(n,s,y),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ui(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ui(e)}get time(){return ui(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ss(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&SM()?(this.animation.timeline=e,ci):n(this)}}const Hx={anticipate:_x,backInOut:vx,circInOut:bx};function IM(t){return t in Hx}function DM(t){typeof t.ease=="string"&&IM(t.ease)&&(t.ease=Hx[t.ease])}const eb=10;class MM extends CM{constructor(e){DM(e),jx(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:a,element:l,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const f=new Yy({...c,autoplay:!1}),d=ss(this.finishedTime??this.time);n.setWithVelocity(f.sample(d-eb).value,f.sample(d).value,eb),f.stop()}}const tb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(zr.test(t)||t==="0")&&!t.startsWith("url("));function NM(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function VM(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=tb(a,e),f=tb(l,e);return!c||!f?!1:NM(t)||(n==="spring"||Fx(n))&&s}function zg(t){t.duration=0,t.type="keyframes"}const OM=new Set(["opacity","clipPath","filter","transform"]),PM=jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kM(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:a,damping:l,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=e.owner.getProps();return PM()&&n&&OM.has(n)&&(n!=="transform"||!p)&&!d&&!s&&a!=="mirror"&&l!==0&&c!=="inertia"}const jM=40;class LM extends Ky{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:f,name:d,motionValue:p,element:y,...T}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pn.now();const E={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:l,repeatType:c,name:d,motionValue:p,element:y,...T},w=y?.KeyframeResolver||Qy;this.keyframeResolver=new w(f,(V,O,I)=>this.onKeyframesResolved(V,O,E,!I),d,p,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,a){this.keyframeResolver=void 0;const{name:l,type:c,velocity:f,delay:d,isHandoff:p,onUpdate:y}=s;this.resolvedAt=Pn.now(),VM(e,l,c,f)||((Us.instantAnimations||!d)&&y?.($y(e,s,n)),e[0]=e[e.length-1],zg(s),s.repeat=0);const E={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>jM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},w=!p&&kM(E)?new MM({...E,element:E.motionValue.owner.current}):new Yy(E);w.finished.then(()=>this.notifyFinished()).catch(ci),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),TM()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const UM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zM(t){const e=UM.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function qx(t,e,n=1){const[s,a]=zM(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const c=l.trim();return cx(c)?parseFloat(c):c}return By(a)?qx(a,e,n+1):a}function Xy(t,e){return t?.[e]??t?.default??t}const Gx=new Set(["width","height","top","left","right","bottom",...ml]),BM={test:t=>t==="auto",parse:t=>t},$x=t=>e=>e.test(t),Kx=[dl,Ce,rs,Cr,VD,ND,BM],nb=t=>Kx.find($x(t));function FM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fx(t):!0}const HM=new Set(["brightness","contrast","saturate","opacity"]);function qM(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Fy)||[];if(!s)return t;const a=n.replace(s,"");let l=HM.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+a+")"}const GM=/\b([a-z-]*)\(.*?\)/gu,Bg={...zr,getAnimatableNone:t=>{const e=t.match(GM);return e?e.map(qM).join(" "):t}},ib={...dl,transform:Math.round},$M={rotate:Cr,rotateX:Cr,rotateY:Cr,rotateZ:Cr,scale:af,scaleX:af,scaleY:af,scaleZ:af,skew:Cr,skewX:Cr,skewY:Cr,distance:Ce,translateX:Ce,translateY:Ce,translateZ:Ce,x:Ce,y:Ce,z:Ce,perspective:Ce,transformPerspective:Ce,opacity:Xu,originX:qT,originY:qT,originZ:Ce},Wy={borderWidth:Ce,borderTopWidth:Ce,borderRightWidth:Ce,borderBottomWidth:Ce,borderLeftWidth:Ce,borderRadius:Ce,radius:Ce,borderTopLeftRadius:Ce,borderTopRightRadius:Ce,borderBottomRightRadius:Ce,borderBottomLeftRadius:Ce,width:Ce,maxWidth:Ce,height:Ce,maxHeight:Ce,top:Ce,right:Ce,bottom:Ce,left:Ce,padding:Ce,paddingTop:Ce,paddingRight:Ce,paddingBottom:Ce,paddingLeft:Ce,margin:Ce,marginTop:Ce,marginRight:Ce,marginBottom:Ce,marginLeft:Ce,backgroundPositionX:Ce,backgroundPositionY:Ce,...$M,zIndex:ib,fillOpacity:Xu,strokeOpacity:Xu,numOctaves:ib},KM={...Wy,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:Bg,WebkitFilter:Bg},Yx=t=>KM[t];function Qx(t,e){let n=Yx(t);return n!==Bg&&(n=zr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const YM=new Set(["auto","none","0"]);function QM(t,e,n){let s=0,a;for(;s<t.length&&!a;){const l=t[s];typeof l=="string"&&!YM.has(l)&&Wu(l).values.length&&(a=t[s]),s++}if(a&&n)for(const l of e)t[l]=Qx(n,a)}class XM extends Qy{constructor(e,n,s,a,l){super(e,n,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),By(p))){const y=qx(p,n.current);y!==void 0&&(e[d]=y),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Gx.has(s)||e.length!==2)return;const[a,l]=e,c=nb(a),f=nb(l);if(c!==f)if(JT(c)&&JT(f))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else ja[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||FM(e[a]))&&s.push(a);s.length&&QM(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ja[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=ja[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,d])=>{e.getValue(f).set(d)}),this.resolveNoneKeyframes()}}function WM(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=n?.[t]??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const Xx=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Wx(t){return hx(t)&&"offsetHeight"in t}const sb=30,JM=t=>!isNaN(parseFloat(t)),ju={current:void 0};class ZM{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=Pn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=JM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ly);const s=this.events[e].add(n);return e==="change"?()=>{s(),gt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ju.current&&ju.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>sb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,sb);return dx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ba(t,e){return new ZM(t,e)}const{schedule:Jy}=xx(queueMicrotask,!1),Ri={x:!1,y:!1};function Jx(){return Ri.x||Ri.y}function eN(t){return t==="x"||t==="y"?Ri[t]?null:(Ri[t]=!0,()=>{Ri[t]=!1}):Ri.x||Ri.y?null:(Ri.x=Ri.y=!0,()=>{Ri.x=Ri.y=!1})}function Zx(t,e){const n=WM(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function rb(t){return!(t.pointerType==="touch"||Jx())}function tN(t,e,n={}){const[s,a,l]=Zx(t,n),c=f=>{if(!rb(f))return;const{target:d}=f,p=e(d,f);if(typeof p!="function"||!d)return;const y=T=>{rb(T)&&(p(T),d.removeEventListener("pointerleave",y))};d.addEventListener("pointerleave",y,a)};return s.forEach(f=>{f.addEventListener("pointerenter",c,a)}),l}const ew=(t,e)=>e?t===e?!0:ew(t,e.parentElement):!1,Zy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,nN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iN(t){return nN.has(t.tagName)||t.tabIndex!==-1}const _f=new WeakSet;function ab(t){return e=>{e.key==="Enter"&&t(e)}}function eg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sN=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=ab(()=>{if(_f.has(n))return;eg(n,"down");const a=ab(()=>{eg(n,"up")}),l=()=>eg(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function ob(t){return Zy(t)&&!Jx()}function rN(t,e,n={}){const[s,a,l]=Zx(t,n),c=f=>{const d=f.currentTarget;if(!ob(f))return;_f.add(d);const p=e(d,f),y=(w,V)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",E),_f.has(d)&&_f.delete(d),ob(w)&&typeof p=="function"&&p(w,{success:V})},T=w=>{y(w,d===window||d===document||n.useGlobalTarget||ew(d,w.target))},E=w=>{y(w,!1)};window.addEventListener("pointerup",T,a),window.addEventListener("pointercancel",E,a)};return s.forEach(f=>{(n.useGlobalTarget?window:f).addEventListener("pointerdown",c,a),Wx(f)&&(f.addEventListener("focus",p=>sN(p,a)),!iN(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),l}function tw(t){return hx(t)&&"ownerSVGElement"in t}function aN(t){return tw(t)&&t.tagName==="svg"}function oN(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],a=t[1+n],l=t[2+n],c=t[3+n],f=kx(a,l,c);return e?f(s):f}const dn=t=>!!(t&&t.getVelocity),lN=[...Kx,Ft,zr],uN=t=>lN.find($x(t)),dd=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function lb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cN(...t){return e=>{let n=!1;const s=t.map(a=>{const l=lb(a,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():lb(t[a],null)}}}}function hN(...t){return M.useCallback(cN(...t),t)}class fN extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=Wx(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dN({children:t,isPresent:e,anchorX:n,root:s}){const a=M.useId(),l=M.useRef(null),c=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=M.useContext(dd),d=hN(l,t?.ref);return M.useInsertionEffect(()=>{const{width:p,height:y,top:T,left:E,right:w}=c.current;if(e||!l.current||!p||!y)return;const V=n==="left"?`left: ${E}`:`right: ${w}`;l.current.dataset.motionPopId=a;const O=document.createElement("style");f&&(O.nonce=f);const I=s??document.head;return I.appendChild(O),O.sheet&&O.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${y}px !important;
            ${V}px !important;
            top: ${T}px !important;
          }
        `),()=>{I.contains(O)&&I.removeChild(O)}},[e]),v.jsx(fN,{isPresent:e,childRef:l,sizeRef:c,children:M.cloneElement(t,{ref:d})})}const mN=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:c,anchorX:f,root:d})=>{const p=Qr(pN),y=M.useId();let T=!0,E=M.useMemo(()=>(T=!1,{id:y,initial:e,isPresent:n,custom:a,onExitComplete:w=>{p.set(w,!0);for(const V of p.values())if(!V)return;s&&s()},register:w=>(p.set(w,!1),()=>p.delete(w))}),[n,p,s]);return l&&T&&(E={...E}),M.useMemo(()=>{p.forEach((w,V)=>p.set(V,!1))},[n]),M.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),c==="popLayout"&&(t=v.jsx(dN,{isPresent:n,anchorX:f,root:d,children:t})),v.jsx(fd.Provider,{value:E,children:t})};function pN(){return new Map}function nw(t=!0){const e=M.useContext(fd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,l=M.useId();M.useEffect(()=>{if(t)return a(l)},[t]);const c=M.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,c]:[!0]}const of=t=>t.key||"";function ub(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const Qa=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1,anchorX:f="left",root:d})=>{const[p,y]=nw(c),T=M.useMemo(()=>ub(t),[t]),E=c&&!p?[]:T.map(of),w=M.useRef(!0),V=M.useRef(T),O=Qr(()=>new Map),[I,P]=M.useState(T),[z,F]=M.useState(T);Vy(()=>{w.current=!1,V.current=T;for(let ae=0;ae<z.length;ae++){const C=of(z[ae]);E.includes(C)?O.delete(C):O.get(C)!==!0&&O.set(C,!1)}},[z,E.length,E.join("-")]);const ue=[];if(T!==I){let ae=[...T];for(let C=0;C<z.length;C++){const A=z[C],N=of(A);E.includes(N)||(ae.splice(C,0,A),ue.push(A))}return l==="wait"&&ue.length&&(ae=ue),F(ub(ae)),P(T),null}const{forceRender:Y}=M.useContext(My);return v.jsx(v.Fragment,{children:z.map(ae=>{const C=of(ae),A=c&&!p?!1:T===z||E.includes(C),N=()=>{if(O.has(C))O.set(C,!0);else return;let L=!0;O.forEach(j=>{j||(L=!1)}),L&&(Y?.(),F(V.current),c&&y?.(),s&&s())};return v.jsx(mN,{isPresent:A,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,root:d,onExitComplete:A?void 0:N,anchorX:f,children:ae},C)})})},iw=M.createContext({strict:!1}),cb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rl={};for(const t in cb)rl[t]={isEnabled:e=>cb[t].some(n=>!!e[n])};function gN(t){for(const e in t)rl[e]={...rl[e],...t[e]}}const yN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yN.has(t)}let sw=t=>!Lf(t);function vN(t){typeof t=="function"&&(sw=e=>e.startsWith("on")?!Lf(e):t(e))}try{vN(require("@emotion/is-prop-valid").default)}catch{}function _N(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(sw(a)||n===!0&&Lf(a)||!e&&!Lf(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}const md=M.createContext({});function pd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ju(t){return typeof t=="string"||Array.isArray(t)}const e0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t0=["initial",...e0];function gd(t){return pd(t.animate)||t0.some(e=>Ju(t[e]))}function rw(t){return!!(gd(t)||t.variants)}function TN(t,e){if(gd(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Ju(n)?n:void 0,animate:Ju(s)?s:void 0}}return t.inherit!==!1?e:{}}function bN(t){const{initial:e,animate:n}=TN(t,M.useContext(md));return M.useMemo(()=>({initial:e,animate:n}),[hb(e),hb(n)])}function hb(t){return Array.isArray(t)?t.join(" "):t}function fb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ce.test(t))t=parseFloat(t);else return t;const n=fb(t,e.target.x),s=fb(t,e.target.y);return`${n}% ${s}%`}},EN={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=zr.parse(t);if(a.length>5)return s;const l=zr.createTransformer(t),c=typeof a[0]!="number"?1:0,f=n.x.scale*e.x,d=n.y.scale*e.y;a[0+c]/=f,a[1+c]/=d;const p=_t(f,d,.5);return typeof a[2+c]=="number"&&(a[2+c]/=p),typeof a[3+c]=="number"&&(a[3+c]/=p),l(a)}},Fg={borderRadius:{...Cu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cu,borderTopRightRadius:Cu,borderBottomLeftRadius:Cu,borderBottomRightRadius:Cu,boxShadow:EN};function aw(t,{layout:e,layoutId:n}){return pl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fg[t]||t==="opacity")}const SN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xN=ml.length;function wN(t,e,n){let s="",a=!0;for(let l=0;l<xN;l++){const c=ml[l],f=t[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||n){const p=Xx(f,Wy[c]);if(!d){a=!1;const y=SN[c]||c;s+=`${y}(${p}) `}n&&(e[c]=p)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function n0(t,e,n){const{style:s,vars:a,transformOrigin:l}=t;let c=!1,f=!1;for(const d in e){const p=e[d];if(pl.has(d)){c=!0;continue}else if(Ax(d)){a[d]=p;continue}else{const y=Xx(p,Wy[d]);d.startsWith("origin")?(f=!0,l[d]=y):s[d]=y}}if(e.transform||(c||n?s.transform=wN(e,t.transform,n):s.transform&&(s.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:y=0}=l;s.transformOrigin=`${d} ${p} ${y}`}}const i0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ow(t,e,n){for(const s in e)!dn(e[s])&&!aw(s,n)&&(t[s]=e[s])}function AN({transformTemplate:t},e){return M.useMemo(()=>{const n=i0();return n0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function RN(t,e){const n=t.style||{},s={};return ow(s,n,t),Object.assign(s,AN(t,e)),s}function CN(t,e){const n={},s=RN(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const IN={offset:"stroke-dashoffset",array:"stroke-dasharray"},DN={offset:"strokeDashoffset",array:"strokeDasharray"};function MN(t,e,n=1,s=0,a=!0){t.pathLength=1;const l=a?IN:DN;t[l.offset]=Ce.transform(-s);const c=Ce.transform(e),f=Ce.transform(n);t[l.array]=`${c} ${f}`}function lw(t,{attrX:e,attrY:n,attrScale:s,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...f},d,p,y){if(n0(t,f,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:E}=t;T.transform&&(E.transform=T.transform,delete T.transform),(E.transform||T.transformOrigin)&&(E.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),E.transform&&(E.transformBox=y?.transformBox??"fill-box",delete T.transformBox),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),s!==void 0&&(T.scale=s),a!==void 0&&MN(T,a,l,c,!1)}const uw=()=>({...i0(),attrs:{}}),cw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function NN(t,e,n,s){const a=M.useMemo(()=>{const l=uw();return lw(l,e,cw(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};ow(l,t.style,t),a.style={...l,...a.style}}return a}const VN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function s0(t){return typeof t!="string"||t.includes("-")?!1:!!(VN.indexOf(t)>-1||/[A-Z]/u.test(t))}function ON(t,e,n,{latestValues:s},a,l=!1){const f=(s0(t)?NN:CN)(e,s,a,t),d=_N(e,typeof t=="string",l),p=t!==M.Fragment?{...d,...f,ref:n}:{},{children:y}=e,T=M.useMemo(()=>dn(y)?y.get():y,[y]);return M.createElement(t,{...p,children:T})}function db(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function r0(t,e,n,s){if(typeof e=="function"){const[a,l]=db(s);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=db(s);e=e(n!==void 0?n:t.custom,a,l)}return e}function Tf(t){return dn(t)?t.get():t}function PN({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,a){return{latestValues:kN(n,s,a,t),renderState:e()}}function kN(t,e,n,s){const a={},l=s(t,{});for(const E in l)a[E]=Tf(l[E]);let{initial:c,animate:f}=t;const d=gd(t),p=rw(t);e&&p&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const T=y?f:c;if(T&&typeof T!="boolean"&&!pd(T)){const E=Array.isArray(T)?T:[T];for(let w=0;w<E.length;w++){const V=r0(t,E[w]);if(V){const{transitionEnd:O,transition:I,...P}=V;for(const z in P){let F=P[z];if(Array.isArray(F)){const ue=y?F.length-1:0;F=F[ue]}F!==null&&(a[z]=F)}for(const z in O)a[z]=O[z]}}}return a}const hw=t=>(e,n)=>{const s=M.useContext(md),a=M.useContext(fd),l=()=>PN(t,e,s,a);return n?l():Qr(l)};function a0(t,e,n){const{style:s}=t,a={};for(const l in s)(dn(s[l])||e.style&&dn(e.style[l])||aw(l,t)||n?.getValue(l)?.liveStyle!==void 0)&&(a[l]=s[l]);return a}const jN=hw({scrapeMotionValuesFromProps:a0,createRenderState:i0});function fw(t,e,n){const s=a0(t,e,n);for(const a in t)if(dn(t[a])||dn(e[a])){const l=ml.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=t[a]}return s}const LN=hw({scrapeMotionValuesFromProps:fw,createRenderState:uw}),UN=Symbol.for("motionComponentSymbol");function Ko(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zN(t,e,n){return M.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Ko(n)&&(n.current=s))},[e])}const o0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BN="framerAppearId",dw="data-"+o0(BN),mw=M.createContext({});function FN(t,e,n,s,a){const{visualElement:l}=M.useContext(md),c=M.useContext(iw),f=M.useContext(fd),d=M.useContext(dd).reducedMotion,p=M.useRef(null);s=s||c.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:l,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:d}));const y=p.current,T=M.useContext(mw);y&&!y.projection&&a&&(y.type==="html"||y.type==="svg")&&HN(p.current,n,a,T);const E=M.useRef(!1);M.useInsertionEffect(()=>{y&&E.current&&y.update(n,f)});const w=n[dw],V=M.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return Vy(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),V.current&&y.animationState&&y.animationState.animateChanges())}),M.useEffect(()=>{y&&(!V.current&&y.animationState&&y.animationState.animateChanges(),V.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),V.current=!1),y.enteringChildren=void 0)}),y}function HN(t,e,n,s){const{layoutId:a,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:p,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pw(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||f&&Ko(f),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:d,layoutRoot:p})}function pw(t){if(t)return t.options.allowProjection!==!1?t.projection:pw(t.parent)}function tg(t,{forwardMotionProps:e=!1}={},n,s){n&&gN(n);const a=s0(t)?LN:jN;function l(f,d){let p;const y={...M.useContext(dd),...f,layoutId:qN(f)},{isStatic:T}=y,E=bN(f),w=a(f,T);if(!T&&Ny){GN();const V=$N(y);p=V.MeasureLayout,E.visualElement=FN(t,w,y,s,V.ProjectionNode)}return v.jsxs(md.Provider,{value:E,children:[p&&E.visualElement?v.jsx(p,{visualElement:E.visualElement,...y}):null,ON(t,f,zN(w,E.visualElement,d),w,T,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=M.forwardRef(l);return c[UN]=t,c}function qN({layoutId:t}){const e=M.useContext(My).id;return e&&t!==void 0?e+"-"+t:t}function GN(t,e){M.useContext(iw).strict}function $N(t){const{drag:e,layout:n}=rl;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function KN(t,e){if(typeof Proxy>"u")return tg;const n=new Map,s=(l,c)=>tg(l,c,t,e),a=(l,c)=>s(l,c);return new Proxy(a,{get:(l,c)=>c==="create"?s:(n.has(c)||n.set(c,tg(c,void 0,t,e)),n.get(c))})}function gw({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function YN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function QN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function ng(t){return t===void 0||t===1}function Hg({scale:t,scaleX:e,scaleY:n}){return!ng(t)||!ng(e)||!ng(n)}function Da(t){return Hg(t)||yw(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yw(t){return mb(t.x)||mb(t.y)}function mb(t){return t&&t!=="0%"}function Uf(t,e,n){const s=t-n,a=e*s;return n+a}function pb(t,e,n,s,a){return a!==void 0&&(t=Uf(t,a,s)),Uf(t,n,s)+e}function qg(t,e=0,n=1,s,a){t.min=pb(t.min,e,n,s,a),t.max=pb(t.max,e,n,s,a)}function vw(t,{x:e,y:n}){qg(t.x,e.translate,e.scale,e.originPoint),qg(t.y,n.translate,n.scale,n.originPoint)}const gb=.999999999999,yb=1.0000000000001;function XN(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,c;for(let f=0;f<a;f++){l=n[f],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Qo(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,vw(t,c)),s&&Da(l.latestValues)&&Qo(t,l.latestValues))}e.x<yb&&e.x>gb&&(e.x=1),e.y<yb&&e.y>gb&&(e.y=1)}function Yo(t,e){t.min=t.min+e,t.max=t.max+e}function vb(t,e,n,s,a=.5){const l=_t(t.min,t.max,a);qg(t,e,n,l,s)}function Qo(t,e){vb(t.x,e.x,e.scaleX,e.scale,e.originX),vb(t.y,e.y,e.scaleY,e.scale,e.originY)}function _w(t,e){return gw(QN(t.getBoundingClientRect(),e))}function WN(t,e,n){const s=_w(t,n),{scroll:a}=e;return a&&(Yo(s.x,a.offset.x),Yo(s.y,a.offset.y)),s}const _b=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xo=()=>({x:_b(),y:_b()}),Tb=()=>({min:0,max:0}),Yt=()=>({x:Tb(),y:Tb()}),Gg={current:null},Tw={current:!1};function JN(){if(Tw.current=!0,!!Ny)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gg.current=t.matches;t.addEventListener("change",e),e()}else Gg.current=!1}const ZN=new WeakMap;function eV(t,e,n){for(const s in e){const a=e[s],l=n[s];if(dn(a))t.addValue(s,a);else if(dn(l))t.addValue(s,Ba(a,{owner:t}));else if(l!==a)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(s);t.addValue(s,Ba(c!==void 0?c:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const bb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tV{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Pn.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,gt.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=gd(n),this.isVariantNode=rw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in T){const w=T[E];d[E]!==void 0&&dn(w)&&w.set(d[E])}}mount(e){this.current=e,ZN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Tw.current||JN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gg.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zs(this.notifyUpdate),zs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=pl.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&gt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in rl){const n=rl[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<bb.length;s++){const a=bb[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=eV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Ba(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(cx(s)||fx(s))?s=parseFloat(s):!uN(s)&&zr.test(n)&&(s=Qx(e,n)),this.setBaseTarget(e,dn(s)?s.get():s)),dn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const l=r0(this.props,n,this.presenceContext?.custom);l&&(s=l[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!dn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ly),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Jy.render(this.render)}}class bw extends tV{constructor(){super(...arguments),this.KeyframeResolver=XM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ew(t,{style:e,vars:n},s,a){const l=t.style;let c;for(c in e)l[c]=e[c];a?.applyProjectionStyles(l,s);for(c in n)l.setProperty(c,n[c])}function nV(t){return window.getComputedStyle(t)}class iV extends bw{constructor(){super(...arguments),this.type="html",this.renderInstance=Ew}readValueFromInstance(e,n){if(pl.has(n))return this.projection?.isProjecting?Pg(n):pM(e,n);{const s=nV(e),a=(Ax(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _w(e,n)}build(e,n,s){n0(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return a0(e,n,s)}}const Sw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sV(t,e,n,s){Ew(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(Sw.has(a)?a:o0(a),e.attrs[a])}class rV extends bw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(pl.has(n)){const s=Yx(n);return s&&s.default||0}return n=Sw.has(n)?n:o0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return fw(e,n,s)}build(e,n,s){lw(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,a){sV(e,n,s,a)}mount(e){this.isSVGTag=cw(e.tagName),super.mount(e)}}const aV=(t,e)=>s0(t)?new rV(e):new iV(e,{allowProjection:t!==M.Fragment});function Jo(t,e,n){const s=t.getProps();return r0(s,e,n!==void 0?n:s.custom,t)}const $g=t=>Array.isArray(t);function oV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ba(n))}function lV(t){return $g(t)?t[t.length-1]||0:t}function uV(t,e){const n=Jo(t,e);let{transitionEnd:s={},transition:a={},...l}=n||{};l={...l,...s};for(const c in l){const f=lV(l[c]);oV(t,c,f)}}function cV(t){return!!(dn(t)&&t.add)}function Kg(t,e){const n=t.getValue("willChange");if(cV(n))return n.add(e);if(!n&&Us.WillChange){const s=new Us.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function xw(t){return t.props[dw]}const hV=t=>t!==null;function fV(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(hV),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[l]}const dV={type:"spring",stiffness:500,damping:25,restSpeed:10},mV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pV={type:"keyframes",duration:.8},gV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yV=(t,{keyframes:e})=>e.length>2?pV:pl.has(t)?t.startsWith("scale")?mV(e[1]):dV:gV;function vV({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:f,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const l0=(t,e,n,s={},a,l)=>c=>{const f=Xy(s,t)||{},d=f.delay||s.delay||0;let{elapsed:p=0}=s;p=p-ss(d);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-p,onUpdate:E=>{e.set(E),f.onUpdate&&f.onUpdate(E)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:l?void 0:a};vV(f)||Object.assign(y,yV(t,y)),y.duration&&(y.duration=ss(y.duration)),y.repeatDelay&&(y.repeatDelay=ss(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let T=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(zg(y),y.delay===0&&(T=!0)),(Us.instantAnimations||Us.skipAnimations)&&(T=!0,zg(y),y.delay=0),y.allowFlatten=!f.type&&!f.ease,T&&!l&&e.get()!==void 0){const E=fV(y.keyframes,f);if(E!==void 0){gt.update(()=>{y.onUpdate(E),y.onComplete()});return}}return f.isSync?new Yy(y):new LM(y)};function _V({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function ww(t,e,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=e;s&&(l=s);const d=[],p=a&&t.animationState&&t.animationState.getState()[a];for(const y in f){const T=t.getValue(y,t.latestValues[y]??null),E=f[y];if(E===void 0||p&&_V(p,y))continue;const w={delay:n,...Xy(l||{},y)},V=T.get();if(V!==void 0&&!T.isAnimating&&!Array.isArray(E)&&E===V&&!w.velocity)continue;let O=!1;if(window.MotionHandoffAnimation){const P=xw(t);if(P){const z=window.MotionHandoffAnimation(P,y,gt);z!==null&&(w.startTime=z,O=!0)}}Kg(t,y),T.start(l0(y,T,E,t.shouldReduceMotion&&Gx.has(y)?{type:!1}:w,t,O));const I=T.animation;I&&d.push(I)}return c&&Promise.all(d).then(()=>{gt.update(()=>{c&&uV(t,c)})}),d}function Aw(t,e,n,s=0,a=1){const l=Array.from(t).sort((p,y)=>p.sortNodePosition(y)).indexOf(e),c=t.size,f=(c-1)*s;return typeof n=="function"?n(l,c):a===1?l*s:f-l*s}function Yg(t,e,n={}){const s=Jo(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const l=s?()=>Promise.all(ww(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:T}=a;return TV(t,e,d,p,y,T,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[d,p]=f==="beforeChildren"?[l,c]:[c,l];return d().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function TV(t,e,n=0,s=0,a=0,l=1,c){const f=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),f.push(Yg(d,e,{...c,delay:n+(typeof s=="function"?0:s)+Aw(t.variantChildren,d,s,a,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function bV(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>Yg(t,l,n));s=Promise.all(a)}else if(typeof e=="string")s=Yg(t,e,n);else{const a=typeof e=="function"?Jo(t,e,n.custom):e;s=Promise.all(ww(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Rw(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const EV=t0.length;function Cw(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Cw(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<EV;n++){const s=t0[n],a=t.props[s];(Ju(a)||a===!1)&&(e[s]=a)}return e}const SV=[...e0].reverse(),xV=e0.length;function wV(t){return e=>Promise.all(e.map(({animation:n,options:s})=>bV(t,n,s)))}function AV(t){let e=wV(t),n=Eb(),s=!0;const a=d=>(p,y)=>{const T=Jo(t,y,d==="exit"?t.presenceContext?.custom:void 0);if(T){const{transition:E,transitionEnd:w,...V}=T;p={...p,...V,...w}}return p};function l(d){e=d(t)}function c(d){const{props:p}=t,y=Cw(t.parent)||{},T=[],E=new Set;let w={},V=1/0;for(let I=0;I<xV;I++){const P=SV[I],z=n[P],F=p[P]!==void 0?p[P]:y[P],ue=Ju(F),Y=P===d?z.isActive:null;Y===!1&&(V=I);let ae=F===y[P]&&F!==p[P]&&ue;if(ae&&s&&t.manuallyAnimateOnMount&&(ae=!1),z.protectedKeys={...w},!z.isActive&&Y===null||!F&&!z.prevProp||pd(F)||typeof F=="boolean")continue;const C=RV(z.prevProp,F);let A=C||P===d&&z.isActive&&!ae&&ue||I>V&&ue,N=!1;const L=Array.isArray(F)?F:[F];let j=L.reduce(a(P),{});Y===!1&&(j={});const{prevResolvedValues:H={}}=z,D={...H,...j},_e=oe=>{A=!0,E.has(oe)&&(N=!0,E.delete(oe)),z.needsAnimating[oe]=!0;const ne=t.getValue(oe);ne&&(ne.liveStyle=!1)};for(const oe in D){const ne=j[oe],ye=H[oe];if(w.hasOwnProperty(oe))continue;let Te=!1;$g(ne)&&$g(ye)?Te=!Rw(ne,ye):Te=ne!==ye,Te?ne!=null?_e(oe):E.add(oe):ne!==void 0&&E.has(oe)?_e(oe):z.protectedKeys[oe]=!0}z.prevProp=F,z.prevResolvedValues=j,z.isActive&&(w={...w,...j}),s&&t.blockInitialAnimation&&(A=!1);const Ne=ae&&C;A&&(!Ne||N)&&T.push(...L.map(oe=>{const ne={type:P};if(typeof oe=="string"&&s&&!Ne&&t.manuallyAnimateOnMount&&t.parent){const{parent:ye}=t,Te=Jo(ye,oe);if(ye.enteringChildren&&Te){const{delayChildren:U}=Te.transition||{};ne.delay=Aw(ye.enteringChildren,t,U)}}return{animation:oe,options:ne}}))}if(E.size){const I={};if(typeof p.initial!="boolean"){const P=Jo(t,Array.isArray(p.initial)?p.initial[0]:p.initial);P&&P.transition&&(I.transition=P.transition)}E.forEach(P=>{const z=t.getBaseTarget(P),F=t.getValue(P);F&&(F.liveStyle=!0),I[P]=z??null}),T.push({animation:I})}let O=!!T.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(O=!1),s=!1,O?e(T):Promise.resolve()}function f(d,p){if(n[d].isActive===p)return Promise.resolve();t.variantChildren?.forEach(T=>T.animationState?.setActive(d,p)),n[d].isActive=p;const y=c(d);for(const T in n)n[T].protectedKeys={};return y}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>n,reset:()=>{n=Eb()}}}function RV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Rw(e,t):!1}function Ia(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Eb(){return{animate:Ia(!0),whileInView:Ia(),whileHover:Ia(),whileTap:Ia(),whileDrag:Ia(),whileFocus:Ia(),exit:Ia()}}class Xr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class CV extends Xr{constructor(e){super(e),e.animationState||(e.animationState=AV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let IV=0;class DV extends Xr{constructor(){super(...arguments),this.id=IV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const MV={animation:{Feature:CV},exit:{Feature:DV}};function Zu(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function pc(t){return{point:{x:t.pageX,y:t.pageY}}}const NV=t=>e=>Zy(e)&&t(e,pc(e));function Lu(t,e,n,s){return Zu(t,e,NV(n),s)}const Iw=1e-4,VV=1-Iw,OV=1+Iw,Dw=.01,PV=0-Dw,kV=0+Dw;function Sn(t){return t.max-t.min}function jV(t,e,n){return Math.abs(t-e)<=n}function Sb(t,e,n,s=.5){t.origin=s,t.originPoint=_t(e.min,e.max,t.origin),t.scale=Sn(n)/Sn(e),t.translate=_t(n.min,n.max,t.origin)-t.originPoint,(t.scale>=VV&&t.scale<=OV||isNaN(t.scale))&&(t.scale=1),(t.translate>=PV&&t.translate<=kV||isNaN(t.translate))&&(t.translate=0)}function Uu(t,e,n,s){Sb(t.x,e.x,n.x,s?s.originX:void 0),Sb(t.y,e.y,n.y,s?s.originY:void 0)}function xb(t,e,n){t.min=n.min+e.min,t.max=t.min+Sn(e)}function LV(t,e,n){xb(t.x,e.x,n.x),xb(t.y,e.y,n.y)}function wb(t,e,n){t.min=e.min-n.min,t.max=t.min+Sn(e)}function zf(t,e,n){wb(t.x,e.x,n.x),wb(t.y,e.y,n.y)}function ai(t){return[t("x"),t("y")]}const Mw=({current:t})=>t?t.ownerDocument.defaultView:null,Ab=(t,e)=>Math.abs(t-e);function UV(t,e){const n=Ab(t.x,e.x),s=Ab(t.y,e.y);return Math.sqrt(n**2+s**2)}class Nw{constructor(e,n,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=sg(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,V=UV(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!V)return;const{point:O}=E,{timestamp:I}=cn;this.history.push({...O,timestamp:I});const{onStart:P,onMove:z}=this.handlers;w||(P&&P(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,E)},this.handlePointerMove=(E,w)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=ig(w,this.transformPagePoint),gt.update(this.updatePoint,!0)},this.handlePointerUp=(E,w)=>{this.end();const{onEnd:V,onSessionEnd:O,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=sg(E.type==="pointercancel"?this.lastMoveEventInfo:ig(w,this.transformPagePoint),this.history);this.startEvent&&V&&V(E,P),O&&O(E,P)},!Zy(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=a||window;const f=pc(e),d=ig(f,this.transformPagePoint),{point:p}=d,{timestamp:y}=cn;this.history=[{...p,timestamp:y}];const{onSessionStart:T}=n;T&&T(e,sg(d,this.history)),this.removeListeners=fc(Lu(this.contextWindow,"pointermove",this.handlePointerMove),Lu(this.contextWindow,"pointerup",this.handlePointerUp),Lu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zs(this.updatePoint)}}function ig(t,e){return e?{point:e(t.point)}:t}function Rb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function sg({point:t},e){return{point:t,delta:Rb(t,Vw(e)),offset:Rb(t,zV(e)),velocity:BV(e,.1)}}function zV(t){return t[0]}function Vw(t){return t[t.length-1]}function BV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=Vw(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>ss(e)));)n--;if(!s)return{x:0,y:0};const l=ui(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function FV(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?_t(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?_t(n,t,s.max):Math.min(t,n)),t}function Cb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function HV(t,{top:e,left:n,bottom:s,right:a}){return{x:Cb(t.x,n,a),y:Cb(t.y,e,s)}}function Ib(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function qV(t,e){return{x:Ib(t.x,e.x),y:Ib(t.y,e.y)}}function GV(t,e){let n=.5;const s=Sn(t),a=Sn(e);return a>s?n=Qu(e.min,e.max-s,t.min):s>a&&(n=Qu(t.min,t.max-a,e.min)),Ls(0,1,n)}function $V(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Qg=.35;function KV(t=Qg){return t===!1?t=0:t===!0&&(t=Qg),{x:Db(t,"left","right"),y:Db(t,"top","bottom")}}function Db(t,e,n){return{min:Mb(t,e),max:Mb(t,n)}}function Mb(t,e){return typeof t=="number"?t:t[e]||0}const YV=new WeakMap;class QV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=T=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pc(T).point)},c=(T,E)=>{const{drag:w,dragPropagation:V,onDragStart:O}=this.getProps();if(w&&!V&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eN(w),!this.openDragLock))return;this.latestPointerEvent=T,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ai(P=>{let z=this.getAxisMotionValue(P).get()||0;if(rs.test(z)){const{projection:F}=this.visualElement;if(F&&F.layout){const ue=F.layout.layoutBox[P];ue&&(z=Sn(ue)*(parseFloat(z)/100))}}this.originPoint[P]=z}),O&&gt.postRender(()=>O(T,E)),Kg(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},f=(T,E)=>{this.latestPointerEvent=T,this.latestPanInfo=E;const{dragPropagation:w,dragDirectionLock:V,onDirectionLock:O,onDrag:I}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:P}=E;if(V&&this.currentDirection===null){this.currentDirection=XV(P),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",E.point,P),this.updateAxis("y",E.point,P),this.visualElement.render(),I&&I(T,E)},d=(T,E)=>{this.latestPointerEvent=T,this.latestPanInfo=E,this.stop(T,E),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>ai(T=>this.getAnimationState(T)==="paused"&&this.getAxisMotionValue(T).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new Nw(e,{onSessionStart:l,onStart:c,onMove:f,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:Mw(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,a=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!s)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&gt.postRender(()=>f(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!lf(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=FV(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Ko(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=HV(s.layoutBox,e):this.constraints=!1,this.elastic=KV(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ai(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=$V(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ko(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=WN(s,a.root,this.visualElement.getTransformPagePoint());let c=qV(a.layout.layoutBox,l);if(n){const f=n(YN(c));this.hasMutatedConstraints=!!f,f&&(c=gw(f))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},p=ai(y=>{if(!lf(y,n,this.currentDirection))return;let T=d&&d[y]||{};c&&(T={min:0,max:0});const E=a?200:1e6,w=a?40:1e7,V={type:"inertia",velocity:s?e[y]:0,bounceStiffness:E,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...l,...T};return this.startAxisValueAnimation(y,V)});return Promise.all(p).then(f)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Kg(this.visualElement,e),s.start(l0(e,s,0,n,this.visualElement,!1))}stopAnimation(){ai(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ai(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ai(n=>{const{drag:s}=this.getProps();if(!lf(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:f}=a.layout.layoutBox[n];l.set(e[n]-_t(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Ko(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ai(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();a[c]=GV({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ai(c=>{if(!lf(c,e,null))return;const f=this.getAxisMotionValue(c),{min:d,max:p}=this.constraints[c];f.set(_t(d,p,a[c]))})}addListeners(){if(!this.visualElement.current)return;YV.set(this.visualElement,this);const e=this.visualElement.current,n=Lu(e,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Ko(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),gt.read(s);const c=Zu(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(ai(y=>{const T=this.getAxisMotionValue(y);T&&(this.originPoint[y]+=d[y].translate,T.set(T.get()+d[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=Qg,dragMomentum:f=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function lf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function XV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class WV extends Xr{constructor(e){super(e),this.removeGroupControls=ci,this.removeListeners=ci,this.controls=new QV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ci}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nb=t=>(e,n)=>{t&&gt.postRender(()=>t(e,n))};class JV extends Xr{constructor(){super(...arguments),this.removePointerDownListener=ci}onPointerDown(e){this.session=new Nw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Nb(e),onStart:Nb(n),onMove:s,onEnd:(l,c)=>{delete this.session,a&&gt.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=Lu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let rg=!1;class ZV extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),s&&s.register&&a&&s.register(l),rg&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),bf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:l}=this.props,{projection:c}=s;return c&&(c.isPresent=l,rg=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||gt.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Jy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;rg=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ow(t){const[e,n]=nw(),s=M.useContext(My);return v.jsx(ZV,{...t,layoutGroup:s,switchLayoutGroup:M.useContext(mw),isPresent:e,safeToRemove:n})}function eO(t,e,n){const s=dn(t)?t:Ba(t);return s.start(l0("",s,e,n)),s.animation}const tO=(t,e)=>t.depth-e.depth;class nO{constructor(){this.children=[],this.isDirty=!1}add(e){Oy(this.children,e),this.isDirty=!0}remove(e){Py(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tO),this.isDirty=!1,this.children.forEach(e)}}function iO(t,e){const n=Pn.now(),s=({timestamp:a})=>{const l=a-n;l>=e&&(zs(s),t(l-e))};return gt.setup(s,!0),()=>zs(s)}const Pw=["TopLeft","TopRight","BottomLeft","BottomRight"],sO=Pw.length,Vb=t=>typeof t=="string"?parseFloat(t):t,Ob=t=>typeof t=="number"||Ce.test(t);function rO(t,e,n,s,a,l){a?(t.opacity=_t(0,n.opacity??1,aO(s)),t.opacityExit=_t(e.opacity??1,0,oO(s))):l&&(t.opacity=_t(e.opacity??1,n.opacity??1,s));for(let c=0;c<sO;c++){const f=`border${Pw[c]}Radius`;let d=Pb(e,f),p=Pb(n,f);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||Ob(d)===Ob(p)?(t[f]=Math.max(_t(Vb(d),Vb(p),s),0),(rs.test(p)||rs.test(d))&&(t[f]+="%")):t[f]=p}(e.rotate||n.rotate)&&(t.rotate=_t(e.rotate||0,n.rotate||0,s))}function Pb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aO=kw(0,.5,Tx),oO=kw(.5,.95,ci);function kw(t,e,n){return s=>s<t?0:s>e?1:n(Qu(t,e,s))}function kb(t,e){t.min=e.min,t.max=e.max}function Ai(t,e){kb(t.x,e.x),kb(t.y,e.y)}function jb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Lb(t,e,n,s,a){return t-=e,t=Uf(t,1/n,s),a!==void 0&&(t=Uf(t,1/a,s)),t}function lO(t,e=0,n=1,s=.5,a,l=t,c=t){if(rs.test(e)&&(e=parseFloat(e),e=_t(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=_t(l.min,l.max,s);t===l&&(f-=e),t.min=Lb(t.min,e,n,f,a),t.max=Lb(t.max,e,n,f,a)}function Ub(t,e,[n,s,a],l,c){lO(t,e[n],e[s],e[a],e.scale,l,c)}const uO=["x","scaleX","originX"],cO=["y","scaleY","originY"];function zb(t,e,n,s){Ub(t.x,e,uO,n?n.x:void 0,s?s.x:void 0),Ub(t.y,e,cO,n?n.y:void 0,s?s.y:void 0)}function Bb(t){return t.translate===0&&t.scale===1}function jw(t){return Bb(t.x)&&Bb(t.y)}function Fb(t,e){return t.min===e.min&&t.max===e.max}function hO(t,e){return Fb(t.x,e.x)&&Fb(t.y,e.y)}function Hb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Lw(t,e){return Hb(t.x,e.x)&&Hb(t.y,e.y)}function qb(t){return Sn(t.x)/Sn(t.y)}function Gb(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class fO{constructor(){this.members=[]}add(e){Oy(this.members,e),e.scheduleRender()}remove(e){if(Py(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dO(t,e,n){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=n?.z||0;if((a||l||c)&&(s=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:T,rotateY:E,skewX:w,skewY:V}=n;p&&(s=`perspective(${p}px) ${s}`),y&&(s+=`rotate(${y}deg) `),T&&(s+=`rotateX(${T}deg) `),E&&(s+=`rotateY(${E}deg) `),w&&(s+=`skewX(${w}deg) `),V&&(s+=`skewY(${V}deg) `)}const f=t.x.scale*e.x,d=t.y.scale*e.y;return(f!==1||d!==1)&&(s+=`scale(${f}, ${d})`),s||"none"}const ag=["","X","Y","Z"],mO=1e3;let pO=0;function og(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Uw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xw(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",gt,!(a||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Uw(s)}function zw({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(c={},f=e?.()){this.id=pO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vO),this.nodes.forEach(EO),this.nodes.forEach(SO),this.nodes.forEach(_O)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new nO)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Ly),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=tw(c)&&!aN(c),this.instance=c;const{layoutId:f,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),t){let y,T=0;const E=()=>this.root.updateBlockedByResize=!1;gt.read(()=>{T=window.innerWidth}),t(c,()=>{const w=window.innerWidth;w!==T&&(T=w,this.root.updateBlockedByResize=!0,y&&y(),y=iO(E,250),bf.hasAnimatedSinceResize&&(bf.hasAnimatedSinceResize=!1,this.nodes.forEach(Yb)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&p&&(f||d)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:T,hasRelativeLayoutChanged:E,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||p.getDefaultTransition()||CO,{onLayoutAnimationStart:O,onLayoutAnimationComplete:I}=p.getProps(),P=!this.targetLayout||!Lw(this.targetLayout,w),z=!T&&E;if(this.options.layoutRoot||this.resumeFrom||z||T&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Xy(V,"layout"),onPlay:O,onComplete:I};(p.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(y,z)}else T||Yb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Uw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const T=this.path[y];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($b);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Kb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bO),this.nodes.forEach(gO),this.nodes.forEach(yO)):this.nodes.forEach(Kb),this.clearAllSnapshots();const f=Pn.now();cn.delta=Ls(0,1e3/60,f-cn.timestamp),cn.timestamp=f,cn.isProcessing=!0,Qp.update.process(cn),Qp.preRender.process(cn),Qp.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TO),this.sharedNodes.forEach(wO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!jw(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&this.instance&&(f||Da(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),IO(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Yt();const f=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(DO))){const{scroll:p}=this.root;p&&(Yo(f.x,p.offset.x),Yo(f.y,p.offset.y))}return f}removeElementScroll(c){const f=Yt();if(Ai(f,c),this.scroll?.wasRoot)return f;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:y,options:T}=p;p!==this.root&&y&&T.layoutScroll&&(y.wasRoot&&Ai(f,c),Yo(f.x,y.offset.x),Yo(f.y,y.offset.y))}return f}applyTransform(c,f=!1){const d=Yt();Ai(d,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Qo(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Da(y.latestValues)&&Qo(d,y.latestValues)}return Da(this.latestValues)&&Qo(d,this.latestValues),d}removeTransform(c){const f=Yt();Ai(f,c);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Da(p.latestValues))continue;Hg(p.latestValues)&&p.updateSnapshot();const y=Yt(),T=p.measurePageBox();Ai(y,T),zb(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Da(this.latestValues)&&zb(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:T}=this.options;if(!this.layout||!(y||T))return;this.resolvedRelativeTargetAt=cn.timestamp;const E=this.getClosestProjectingParent();E&&this.linkedParentVersion!==E.layoutVersion&&!E.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(E&&E.layout?this.createRelativeTarget(E,this.layout.layoutBox,E.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ai(this.target,this.layout.layoutBox),vw(this.target,this.targetDelta)):Ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?this.createRelativeTarget(E,this.target,E.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Hg(this.parent.latestValues)||yw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,f,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),zf(this.relativeTargetOrigin,f,d),Ai(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(d=!1),d)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;Ai(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,E=this.treeScale.y;XN(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Yt());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jb(this.prevProjectionDelta.x,this.projectionDelta.x),jb(this.prevProjectionDelta.y,this.projectionDelta.y)),Uu(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==E||!Gb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xo(),this.projectionDelta=Xo(),this.projectionDeltaWithTransform=Xo()}setAnimationOrigin(c,f=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},T=Xo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const E=Yt(),w=d?d.source:void 0,V=this.layout?this.layout.source:void 0,O=w!==V,I=this.getStack(),P=!I||I.members.length<=1,z=!!(O&&!P&&this.options.crossfade===!0&&!this.path.some(RO));this.animationProgress=0;let F;this.mixTargetDelta=ue=>{const Y=ue/1e3;Qb(T.x,c.x,Y),Qb(T.y,c.y,Y),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zf(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AO(this.relativeTarget,this.relativeTargetOrigin,E,Y),F&&hO(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Yt()),Ai(F,this.relativeTarget)),O&&(this.animationValues=y,rO(y,p,this.latestValues,Y,z,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gt.update(()=>{bf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ba(0)),this.currentAnimation=eO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:p,latestValues:y}=c;if(!(!f||!d||!p)){if(this!==c&&this.layout&&p&&Bw(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Yt();const T=Sn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+T;const E=Sn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+E}Ai(f,d),Qo(f,y),Uu(this.projectionDeltaWithTransform,this.layoutCorrected,f,y)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new fO),this.sharedNodes.get(c).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const p={};d.z&&og("z",c,p,this.animationValues);for(let y=0;y<ag.length;y++)og(`rotate${ag[y]}`,c,p,this.animationValues),og(`skew${ag[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}applyProjectionStyles(c,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Tf(f?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Tf(f?.pointerEvents)||""),this.hasProjected&&!Da(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const y=p.animationValues||p.latestValues;this.applyTransformsToTarget();let T=dO(this.projectionDeltaWithTransform,this.treeScale,y);d&&(T=d(y,T)),c.transform=T;const{x:E,y:w}=this.projectionDelta;c.transformOrigin=`${E.origin*100}% ${w.origin*100}% 0`,p.animationValues?c.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:c.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const V in Fg){if(y[V]===void 0)continue;const{correct:O,applyTo:I,isCSSVariable:P}=Fg[V],z=T==="none"?y[V]:O(y[V],p);if(I){const F=I.length;for(let ue=0;ue<F;ue++)c[I[ue]]=z}else P?this.options.visualElement.renderState.vars[V]=z:c[V]=z}this.options.layoutId&&(c.pointerEvents=p===this?Tf(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach($b),this.root.sharedNodes.clear()}}}function gO(t){t.updateLayout()}function yO(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?ai(y=>{const T=l?e.measuredBox[y]:e.layoutBox[y],E=Sn(T);T.min=n[y].min,T.max=T.min+E}):Bw(a,e.layoutBox,n)&&ai(y=>{const T=l?e.measuredBox[y]:e.layoutBox[y],E=Sn(n[y]);T.max=T.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+E)});const c=Xo();Uu(c,n,e.layoutBox);const f=Xo();l?Uu(f,t.applyTransform(s,!0),e.measuredBox):Uu(f,n,e.layoutBox);const d=!jw(c);let p=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:T,layout:E}=y;if(T&&E){const w=Yt();zf(w,e.layoutBox,T.layoutBox);const V=Yt();zf(V,n,E.layoutBox),Lw(w,V)||(p=!0),y.options.layoutRoot&&(t.relativeTarget=V,t.relativeTargetOrigin=w,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:f,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function vO(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _O(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function TO(t){t.clearSnapshot()}function $b(t){t.clearMeasurements()}function Kb(t){t.isLayoutDirty=!1}function bO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Yb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EO(t){t.resolveTargetDelta()}function SO(t){t.calcProjection()}function xO(t){t.resetSkewAndRotation()}function wO(t){t.removeLeadSnapshot()}function Qb(t,e,n){t.translate=_t(e.translate,0,n),t.scale=_t(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Xb(t,e,n,s){t.min=_t(e.min,n.min,s),t.max=_t(e.max,n.max,s)}function AO(t,e,n,s){Xb(t.x,e.x,n.x,s),Xb(t.y,e.y,n.y,s)}function RO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const CO={duration:.45,ease:[.4,0,.1,1]},Wb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Jb=Wb("applewebkit/")&&!Wb("chrome/")?Math.round:ci;function Zb(t){t.min=Jb(t.min),t.max=Jb(t.max)}function IO(t){Zb(t.x),Zb(t.y)}function Bw(t,e,n){return t==="position"||t==="preserve-aspect"&&!jV(qb(e),qb(n),.2)}function DO(t){return t!==t.root&&t.scroll?.wasRoot}const MO=zw({attachResizeListener:(t,e)=>Zu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lg={current:void 0},Fw=zw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!lg.current){const t=new MO({});t.mount(window),t.setOptions({layoutScroll:!0}),lg.current=t}return lg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NO={pan:{Feature:JV},drag:{Feature:WV,ProjectionNode:Fw,MeasureLayout:Ow}};function eE(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=s[a];l&&gt.postRender(()=>l(e,pc(e)))}class VO extends Xr{mount(){const{current:e}=this.node;e&&(this.unmount=tN(e,(n,s)=>(eE(this.node,s,"Start"),a=>eE(this.node,a,"End"))))}unmount(){}}class OO extends Xr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fc(Zu(this.node.current,"focus",()=>this.onFocus()),Zu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tE(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=s[a];l&&gt.postRender(()=>l(e,pc(e)))}class PO extends Xr{mount(){const{current:e}=this.node;e&&(this.unmount=rN(e,(n,s)=>(tE(this.node,s,"Start"),(a,{success:l})=>tE(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xg=new WeakMap,ug=new WeakMap,kO=t=>{const e=Xg.get(t.target);e&&e(t)},jO=t=>{t.forEach(kO)};function LO({root:t,...e}){const n=t||document;ug.has(n)||ug.set(n,{});const s=ug.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(jO,{root:t,...e})),s[a]}function UO(t,e,n){const s=LO(e);return Xg.set(t,n),s.observe(t),()=>{Xg.delete(t),s.unobserve(t)}}const zO={some:0,all:1};class BO extends Xr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:zO[a]},f=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:T}=this.node.getProps(),E=p?y:T;E&&E(d)};return UO(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(FO(e,n))&&this.startObserver()}unmount(){}}function FO({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const HO={inView:{Feature:BO},tap:{Feature:PO},focus:{Feature:OO},hover:{Feature:VO}},qO={layout:{ProjectionNode:Fw,MeasureLayout:Ow}},GO={...MV,...HO,...NO,...qO},tt=KN(GO,aV);function Hw(t){const e=Qr(()=>Ba(t)),{isStatic:n}=M.useContext(dd);if(n){const[,s]=M.useState(t);M.useEffect(()=>e.on("change",s),[])}return e}function qw(t,e){const n=Hw(e()),s=()=>n.set(e());return s(),Vy(()=>{const a=()=>gt.preRender(s,!1,!0),l=t.map(c=>c.on("change",a));return()=>{l.forEach(c=>c()),zs(s)}}),n}function $O(t){ju.current=[],t();const e=qw(ju.current,t);return ju.current=void 0,e}function KO(t,e,n,s){if(typeof t=="function")return $O(t);const a=typeof e=="function"?e:oN(e,n,s);return Array.isArray(t)?nE(t,a):nE([t],([l])=>a(l))}function nE(t,e){const n=Qr(()=>[]);return qw(t,()=>{n.length=0;const s=t.length;for(let a=0;a<s;a++)n[a]=t[a].get();return e(n)})}class YO{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(s=>{s.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const QO=()=>new YO;function XO(){return Qr(QO)}const Gw=M.createContext(null);function WO(t,e,n,s){if(!s)return t;const a=t.findIndex(y=>y.value===e);if(a===-1)return t;const l=s>0?1:-1,c=t[a+l];if(!c)return t;const f=t[a],d=c.layout,p=_t(d.min,d.max,.5);return l===1&&f.layout.max+n>p||l===-1&&f.layout.min+n<p?dD(t,a,a+l):t}function JO({children:t,as:e="ul",axis:n="y",onReorder:s,values:a,...l},c){const f=Qr(()=>tt[e]),d=[],p=M.useRef(!1),y={axis:n,registerItem:(T,E)=>{const w=d.findIndex(V=>T===V.value);w!==-1?d[w].layout=E[n]:d.push({value:T,layout:E[n]}),d.sort(tP)},updateOrder:(T,E,w)=>{if(p.current)return;const V=WO(d,T,E,w);d!==V&&(p.current=!0,s(V.map(eP).filter(O=>a.indexOf(O)!==-1)))}};return M.useEffect(()=>{p.current=!1}),v.jsx(f,{...l,ref:c,ignoreStrict:!0,children:v.jsx(Gw.Provider,{value:y,children:t})})}const ZO=M.forwardRef(JO);function eP(t){return t.value}function tP(t,e){return t.layout.min-e.layout.min}function iE(t,e=0){return dn(t)?t:Hw(e)}function nP({children:t,style:e={},value:n,as:s="li",onDrag:a,layout:l=!0,...c},f){const d=Qr(()=>tt[s]),p=M.useContext(Gw),y={x:iE(e.x),y:iE(e.y)},T=KO([y.x,y.y],([O,I])=>O||I?1:"unset"),{axis:E,registerItem:w,updateOrder:V}=p;return v.jsx(d,{drag:E,...c,dragSnapToOrigin:!0,style:{...e,x:y.x,y:y.y,zIndex:T},layout:l,onDrag:(O,I)=>{const{velocity:P}=I;P[E]&&V(n,y[E].get(),P[E]),a&&a(O,I)},onLayoutMeasure:O=>w(n,O),ref:f,ignoreStrict:!0,children:t})}const iP=M.forwardRef(nP);const sP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),sE=t=>{const e=rP(t);return e.charAt(0).toUpperCase()+e.slice(1)},$w=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),aP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var oP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lP=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:c,...f},d)=>M.createElement("svg",{ref:d,...oP,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:$w("lucide",a),...!l&&!aP(f)&&{"aria-hidden":"true"},...f},[...c.map(([p,y])=>M.createElement(p,y)),...Array.isArray(l)?l:[l]]));const Ue=(t,e)=>{const n=M.forwardRef(({className:s,...a},l)=>M.createElement(lP,{ref:l,iconNode:e,className:$w(`lucide-${sP(sE(t))}`,`lucide-${t}`,s),...a}));return n.displayName=sE(t),n};const uP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],u0=Ue("arrow-left",uP);const cP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yd=Ue("arrow-right",cP);const hP=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Kw=Ue("chart-no-axes-column",hP);const fP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vs=Ue("check",fP);const dP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mP=Ue("circle-check-big",dP);const pP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zu=Ue("circle-question-mark",pP);const gP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yP=Ue("clock",gP);const vP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_P=Ue("copy",vP);const TP=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],bP=Ue("crown",TP);const EP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],SP=Ue("download",EP);const xP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],wP=Ue("external-link",xP);const AP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],RP=Ue("eye-off",AP);const CP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],IP=Ue("eye",CP);const DP=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],Yw=Ue("gavel",DP);const MP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],NP=Ue("grip-vertical",MP);const VP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Qw=Ue("house",VP);const OP=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],PP=Ue("log-in",OP);const kP=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],jP=Ue("medal",kP);const LP=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],UP=Ue("mic",LP);const zP=[["path",{d:"M5 12h14",key:"1ays0h"}]],rE=Ue("minus",zP);const BP=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],FP=Ue("moon",BP);const HP=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],qP=Ue("pause",HP);const GP=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$P=Ue("play",GP);const KP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ua=Ue("plus",KP);const YP=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],QP=Ue("rotate-ccw",YP);const XP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Du=Ue("search",XP);const WP=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xw=Ue("settings",WP);const JP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ef=Ue("shield",JP);const ZP=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Oa=Ue("skull",ZP);const ek=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ww=Ue("smartphone",ek);const tk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],nk=Ue("sun",tk);const ik=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],cg=Ue("thumbs-down",ik);const sk=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],hg=Ue("thumbs-up",sk);const rk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jw=Ue("trash-2",rk);const ak=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ok=Ue("trophy",ak);const lk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zw=Ue("user",lk);const uk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],eA=Ue("users",uk);const ck=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gc=Ue("x",ck),hk=[{id:"judgement",name:"Judgement",description:"Scorepad for the prediction card game.",icon:Yw,path:"/judgement",color:"from-pink-500 to-rose-500"},{id:"mafia",name:"Mafia",description:"Role helper for the classic party game.",icon:Oa,path:"/mafia",color:"from-purple-500 to-indigo-500"}];function fk(){const[t,e]=M.useState(null);return M.useEffect(()=>{const n=localStorage.getItem("active_session_type");n==="mafia_single"?e({name:"Mafia (Pass & Play)",path:"/mafia?resume=true",icon:Oa,color:"#a78bfa"}):n==="mafia_multi"?e({name:"Mafia (Multiplayer)",path:"/mafia?resume=true",icon:eA,color:"#22d3ee"}):n==="judgement"&&e({name:"Judgement",path:"/judgement?resume=true",icon:Yw,color:"#f472b6"})},[]),v.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",width:"100%"},children:[v.jsxs("header",{style:{marginBottom:"3rem",textAlign:"center"},children:[v.jsx(tt.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-gradient",style:{fontSize:"2.5rem",marginBottom:"1rem",fontWeight:800},children:"The Game App"}),v.jsx("p",{style:{color:"var(--text-dim)"},children:"Select a game to begin"})]}),t&&v.jsx(Yu,{to:t.path,style:{textDecoration:"none",display:"block",marginBottom:"2rem"},children:v.jsxs(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-panel",whileHover:{scale:1.02},whileTap:{scale:.98},style:{padding:"1.5rem",borderRadius:"1.2rem",display:"flex",alignItems:"center",gap:"1.5rem",background:`linear-gradient(135deg, ${t.color}22 0%, rgba(255,255,255,0.05) 100%)`,border:`1px solid ${t.color}44`,flexWrap:"wrap"},children:[v.jsx("div",{style:{padding:"1rem",background:`${t.color}33`,borderRadius:"50%",color:t.color,boxShadow:`0 0 15px ${t.color}44`},children:v.jsx(t.icon,{size:32})}),v.jsxs("div",{style:{flex:1,minWidth:"180px"},children:[v.jsxs("h3",{style:{margin:0,fontSize:"1.2rem",color:"white"},children:["Resume ",t.name]}),v.jsx("p",{style:{margin:0,color:"var(--text-dim)",fontSize:"0.9rem"},children:"Continue your previous session"})]}),v.jsx("div",{style:{color:t.color,fontWeight:600,whiteSpace:"nowrap"},children:"RESUME "})]})}),v.jsx("div",{style:{display:"grid",gap:"1.5rem",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},children:hk.map((n,s)=>v.jsx(Yu,{to:n.path,style:{textDecoration:"none"},children:v.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:s*.1},whileHover:{scale:1.03,translateY:-5},whileTap:{scale:.98},className:"glass-panel",style:{padding:"2rem",borderRadius:"1.5rem",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",position:"relative",overflow:"hidden"},children:[v.jsx("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(255,255,255,0.05)",borderRadius:"50%",color:n.id==="mafia"?"var(--secondary)":"var(--primary)"},children:v.jsx(n.icon,{size:48})}),v.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"0.5rem",color:"var(--text)"},children:n.name}),v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"0.95rem"},children:n.description})]})},n.id))})]})}function dk({onNext:t}){const[e,n]=M.useState(["",""]),s=(d,p)=>{const y=[...e];y[d]=p,n(y)},a=()=>{n([...e,""])},l=d=>{if(e.length<=2)return;const p=e.filter((y,T)=>T!==d);n(p)},c=e.filter(d=>d.trim().length>0).length>=2,f=()=>{const d=e.map(p=>p.trim()).filter(p=>p.length>0);d.length<2||t(d)};return v.jsxs(tt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"setup-screen",children:[v.jsxs("header",{style:{marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h2",{className:"text-gradient",style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Add Players"}),v.jsx("p",{style:{color:"var(--text-dim)"},children:"Enter names of all participants"})]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"2rem"},children:e.map((d,p)=>v.jsxs(tt.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"player-input-row",style:{display:"flex",gap:"0.5rem"},children:[v.jsx("input",{type:"text",placeholder:`Player ${p+1}`,value:d,onChange:y=>s(p,y.target.value),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",padding:"0.75rem 1rem",borderRadius:"0.5rem",color:"white",width:"100%",fontSize:"1rem",outline:"none"},onKeyDown:y=>{y.key==="Enter"&&a()}}),e.length>2&&v.jsx("button",{onClick:()=>l(p),style:{background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",border:"none",borderRadius:"0.5rem",width:"3rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:v.jsx(gc,{size:20})})]},p))}),v.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[v.jsxs("button",{onClick:a,className:"btn-ghost",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Ua,{size:20})," Add Player"]}),v.jsxs("button",{onClick:f,className:"btn-primary",disabled:!c,style:{display:"flex",alignItems:"center",gap:"0.5rem",opacity:c?1:.5,cursor:c?"pointer":"not-allowed"},children:["Next ",v.jsx(yd,{size:20})]})]})]})}const Sf=[{id:"villager",label:"Villager",icon:Zw,color:"#10b981"},{id:"mafia",label:"Mafia",icon:Oa,color:"#ef4444"},{id:"doctor",label:"Doctor",icon:Ef,color:"#3b82f6"},{id:"detective",label:"Detective",icon:Du,color:"#f59e0b"},{id:"godfather",label:"Godfather",icon:bP,color:"#8b5cf6"},{id:"presenter",label:"Presenter",icon:UP,color:"#ec4899"}];function tA({players:t,onNext:e,onBack:n}){const[s,a]=M.useState({}),[l,c]=M.useState([]),[f,d]=M.useState(""),[p,y]=M.useState(!0);M.useEffect(()=>{const Y={};Sf.forEach(ae=>Y[ae.id]=0),a(Y)},[]);const T=Object.values(s).reduce((Y,ae)=>Y+ae,0),E=l.reduce((Y,ae)=>Y+ae.count,0),w=T+E,V=t.length,O=V-w,I=O===0,P=(Y,ae)=>{const A=(s[Y]||0)+ae;A<0||ae>0&&O<=0||a({...s,[Y]:A})},z=()=>{if(!f.trim())return;const Y=`custom_${Date.now()}`;c([...l,{id:Y,label:f,count:0,icon:zu,color:"#8b5cf6"}]),d("")},F=(Y,ae)=>{c(C=>C.map(A=>{if(A.id!==Y)return A;const N=A.count+ae;return N<0||ae>0&&O<=0?A:{...A,count:N}}))},ue=()=>{if(!I)return;const Y=[];Object.entries(s).forEach(([C,A])=>{for(let N=0;N<A;N++)Y.push(C)}),l.forEach(C=>{for(let A=0;A<C.count;A++)Y.push(C.id)});for(let C=Y.length-1;C>0;C--){const A=Math.floor(Math.random()*(C+1));[Y[C],Y[A]]=[Y[A],Y[C]]}const ae=t.map((C,A)=>{const N=Y[A];let L=Sf.find(j=>j.id===N);if(!L){const j=l.find(H=>H.id===N);j&&(L={...j,icon:zu,color:"#a855f7"})}return{player:C,role:N,roleData:L}});e({counts:s,assignments:ae,detailedMode:p})};return v.jsxs(tt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"config-screen",children:[v.jsxs("header",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[v.jsx("h2",{className:"text-gradient",style:{fontSize:"2rem"},children:"Assign Roles"}),v.jsx("p",{style:{color:I?"var(--success)":"var(--text-dim)"},children:O===0?"Ready to start!":`For ${V} players, assign ${O} more`}),v.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx("input",{type:"checkbox",id:"detailedMode",checked:p,onChange:Y=>y(Y.target.checked),style:{width:"20px",height:"20px",accentColor:"var(--primary)"}}),v.jsx("label",{htmlFor:"detailedMode",style:{color:"var(--text-dim)",cursor:"pointer"},children:"Enable Detailed Simulation"})]})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem",maxHeight:"60vh",overflowY:"auto",paddingRight:"0.5rem"},children:[Sf.map(Y=>{const ae=s[Y.id]||0;return v.jsxs("div",{className:"glass-panel",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",borderRadius:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("div",{style:{color:Y.color,background:"rgba(255,255,255,0.05)",padding:"0.5rem",borderRadius:"50%"},children:v.jsx(Y.icon,{size:24})}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500},children:Y.label})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("button",{onClick:()=>P(Y.id,-1),disabled:ae===0,className:"btn-icon",style:{background:"transparent",border:"1px solid var(--surface-highlight)",color:ae===0?"var(--text-dim)":"var(--text)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:ae===0?"default":"pointer"},children:v.jsx(rE,{size:16})}),v.jsx("span",{style:{width:"20px",textAlign:"center",fontWeight:"bold"},children:ae}),v.jsx("button",{onClick:()=>P(Y.id,1),disabled:O===0,style:{background:"transparent",border:"1px solid var(--surface-highlight)",color:O===0?"var(--text-dim)":"var(--text)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:O===0?"default":"pointer"},children:v.jsx(Ua,{size:16})})]})]},Y.id)}),l.map(Y=>v.jsxs("div",{className:"glass-panel",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",borderRadius:"1rem",position:"relative"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("div",{style:{color:Y.color,background:"rgba(255,255,255,0.05)",padding:"0.5rem",borderRadius:"50%"},children:v.jsx(zu,{size:24})}),v.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500},children:Y.label}),v.jsxs("button",{onClick:()=>{c(ae=>ae.filter(C=>C.id!==Y.id))},style:{background:"none",border:"none",color:"var(--danger)",fontSize:"0.75rem",padding:0,marginTop:"0.2rem",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.2rem"},children:[v.jsx(Jw,{size:12})," Remove Role"]})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("button",{onClick:()=>F(Y.id,-1),disabled:Y.count===0,className:"btn-icon",style:{background:"transparent",border:"1px solid var(--surface-highlight)",color:Y.count===0?"var(--text-dim)":"var(--text)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:Y.count===0?"default":"pointer"},children:v.jsx(rE,{size:16})}),v.jsx("span",{style:{width:"20px",textAlign:"center",fontWeight:"bold"},children:Y.count}),v.jsx("button",{onClick:()=>F(Y.id,1),disabled:O===0,style:{background:"transparent",border:"1px solid var(--surface-highlight)",color:O===0?"var(--text-dim)":"var(--text)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:O===0?"default":"pointer"},children:v.jsx(Ua,{size:16})})]})]},Y.id)),v.jsxs("div",{className:"glass-panel",style:{padding:"1rem",borderRadius:"1rem",border:"1px dashed var(--surface-highlight)",display:"flex",gap:"0.5rem",alignItems:"center"},children:[v.jsx(Ua,{size:20,style:{color:"var(--text-dim)"}}),v.jsx("input",{placeholder:"Create new role (e.g. Jester)...",value:f,onChange:Y=>d(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&z(),style:{flex:1,background:"transparent",border:"none",color:"white",outline:"none",fontSize:"1rem"}}),v.jsx("button",{onClick:z,disabled:!f.trim(),className:"btn-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"0.5rem",opacity:f.trim()?1:.5},children:"Add"})]})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[v.jsxs("button",{onClick:n,className:"btn-ghost",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(u0,{size:20})," Back"]}),v.jsxs("button",{onClick:ue,className:"btn-primary",disabled:!I,style:{display:"flex",alignItems:"center",gap:"0.5rem",opacity:I?1:.5,cursor:I?"pointer":"not-allowed"},children:["Start Game ",v.jsx(yd,{size:20})]})]})]})}function mk({assignments:t,onComplete:e}){const[n,s]=M.useState(0),[a,l]=M.useState(!1),c=t[n],f=n>=t.length,d=()=>{a?(l(!1),setTimeout(()=>{n+1>=t.length?e():s(n+1)},300)):l(!0)};return f?null:v.jsx("div",{style:{perspective:"1000px",minHeight:"85vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"2rem"},children:v.jsx(Qa,{mode:"wait",children:v.jsx(tt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},style:{width:"100%",maxWidth:"320px",aspectRatio:"2/3",position:"relative"},children:v.jsxs(tt.div,{animate:{rotateY:a?180:0},transition:{duration:.6,type:"spring",stiffness:260,damping:20},style:{width:"100%",height:"100%",position:"relative",transformStyle:"preserve-3d"},children:[v.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",background:"linear-gradient(135deg, var(--surface), var(--background))",border:"2px solid var(--primary)",borderRadius:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",boxShadow:"0 10px 30px -10px var(--primary-glow)"},onClick:()=>!a&&d(),children:[v.jsx(Zw,{size:64,color:"var(--primary)",style:{marginBottom:"1.5rem"}}),v.jsx("h3",{style:{color:"var(--text-dim)",marginBottom:"0.5rem"},children:"Pass the phone to"}),v.jsx("h2",{className:"text-gradient",style:{fontSize:"2rem",textAlign:"center"},children:c.player}),v.jsx("p",{style:{marginTop:"2rem",color:"var(--text-dim)",fontSize:"0.9rem"},children:"Tap to reveal role"})]}),v.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",background:"linear-gradient(135deg, #000, var(--surface))",border:`2px solid ${c.roleData.color}`,borderRadius:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",boxShadow:`0 10px 30px -10px ${c.roleData.color}80`},onClick:()=>a&&d(),children:[v.jsx("div",{style:{color:c.roleData.color,marginBottom:"2rem"},children:v.jsx(c.roleData.icon,{size:80})}),v.jsx("h2",{style:{fontSize:"2.5rem",color:c.roleData.color,marginBottom:"1rem",textShadow:`0 0 20px ${c.roleData.color}80`},children:c.roleData.label}),v.jsx("p",{style:{color:"var(--text-dim)",textAlign:"center"},children:"Keep this secret!"}),v.jsx("button",{className:"btn-primary",style:{marginTop:"3rem"},children:n===t.length-1?"Finish":"Pass to Next"})]})]})},n)})})}function pk({assignments:t,onNewGame:e}){const[n,s]=M.useState(0),[a,l]=M.useState(!1),[c,f]=M.useState("60"),[d,p]=M.useState(!1);M.useEffect(()=>{const V=localStorage.getItem("mafia_timer_state");if(V)try{const{timeLeft:O,isActive:I,lastTick:P,customTime:z}=JSON.parse(V);if(f(z||"60"),I&&O>0){const F=Date.now(),ue=Math.floor((F-P)/1e3),Y=Math.max(0,O-ue);s(Y),l(Y>0)}else s(O),l(I)}catch(O){console.error("Failed to restore timer",O)}},[]),M.useEffect(()=>{let V=null;return a&&n>0?V=setInterval(()=>{s(O=>{const I=O-1;return localStorage.setItem("mafia_timer_state",JSON.stringify({timeLeft:I,isActive:!0,lastTick:Date.now(),customTime:c})),I})},1e3):n===0&&(l(!1),localStorage.setItem("mafia_timer_state",JSON.stringify({timeLeft:0,isActive:!1,customTime:c}))),a||localStorage.setItem("mafia_timer_state",JSON.stringify({timeLeft:n,isActive:!1,lastTick:Date.now(),customTime:c})),()=>clearInterval(V)},[a,n,c]);const y=()=>l(!a),T=()=>{l(!1),s(parseInt(c)||0)},E=V=>{const O=V.target.value;if(f(O),!a){const I=parseInt(O)||0;s(I)}},w=V=>{const O=Math.floor(V/60),I=V%60;return`${O}:${I.toString().padStart(2,"0")}`};return v.jsxs("div",{className:"dashboard-screen",style:{paddingBottom:"4rem"},children:[v.jsxs("div",{className:"glass-panel",style:{padding:"1.5rem",borderRadius:"1rem",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h3",{style:{marginBottom:"1rem",color:"var(--text-dim)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"1px"},children:"Timer"}),v.jsx("div",{style:{fontSize:"3.5rem",fontFamily:"monospace",fontWeight:"bold",marginBottom:"1rem",color:n<10&&n>0?"var(--danger)":"white"},children:w(n)}),v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginBottom:"1.5rem"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(255,255,255,0.05)",padding:"0.5rem",borderRadius:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-dim)"},children:"Set (s):"}),v.jsx("input",{type:"number",value:c,onChange:E,style:{width:"60px",background:"transparent",border:"none",color:"white",fontWeight:"bold",textAlign:"center",borderBottom:"1px solid var(--text-dim)"}})]})}),v.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[v.jsx("button",{onClick:y,className:"btn-primary",style:{borderRadius:"50%",width:"56px",height:"56px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px var(--primary-glow)"},children:a?v.jsx(qP,{size:28}):v.jsx($P,{size:28,fill:"white",style:{marginLeft:"4px"}})}),v.jsx("button",{onClick:T,className:"btn-ghost",style:{borderRadius:"50%",width:"56px",height:"56px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255,255,255,0.1)"},children:v.jsx(QP,{size:24})})]})]}),v.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h3",{style:{color:"var(--text-dim)",paddingLeft:"0.5rem",margin:0},children:"Player Roles"}),v.jsxs("button",{onClick:()=>p(!d),className:"btn-ghost",style:{padding:"0.5rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[d?v.jsx(RP,{size:18}):v.jsx(IP,{size:18}),d?"Hide":"Show"]})]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.map((V,O)=>v.jsxs("div",{className:"glass-panel",style:{padding:"1rem",borderRadius:"0.8rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsx("span",{style:{fontWeight:600,fontSize:"1.1rem"},children:V.player}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:V.roleData.color,filter:d?"none":"blur(8px)",transition:"filter 0.3s",userSelect:d?"auto":"none"},children:[v.jsx(V.roleData.icon,{size:20}),v.jsx("span",{style:{fontWeight:500},children:V.roleData.label})]})]},O))}),v.jsxs("div",{style:{marginTop:"3rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsx("button",{onClick:()=>{localStorage.removeItem("mafia_timer_state"),e()},className:"btn-ghost",style:{width:"100%",borderStyle:"dashed"},children:"Start New Game"}),v.jsx(Yu,{to:"/",style:{textDecoration:"none"},children:v.jsxs("button",{className:"btn-ghost",style:{width:"100%",borderColor:"transparent",color:"var(--text-dim)"},children:[v.jsx(Qw,{size:18,style:{marginRight:"0.5rem",verticalAlign:"text-bottom"}})," Return Home"]})})]})]})}function gk({onSelectMode:t}){return v.jsxs("div",{style:{padding:"2rem",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2rem"},children:[v.jsx(tt.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-gradient",style:{fontSize:"3rem",textAlign:"center",marginBottom:"1rem"},children:"Mafia"}),v.jsxs("div",{style:{width:"100%",maxWidth:"400px",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[v.jsxs(tt.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onClick:()=>t("single"),className:"glass-panel",style:{width:"100%",padding:"2rem",display:"flex",alignItems:"center",gap:"1.5rem",cursor:"pointer",textAlign:"left",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1.5rem",position:"relative",overflow:"hidden"},whileHover:{scale:1.02,translateY:-2,backgroundColor:"rgba(255,255,255,0.08)"},whileTap:{scale:.98},children:[v.jsx("div",{style:{padding:"1.5rem",background:"rgba(139, 92, 246, 0.15)",borderRadius:"50%",color:"#a78bfa",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 20px rgba(139, 92, 246, 0.2)"},children:v.jsx(Ww,{size:36})}),v.jsxs("div",{children:[v.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"0.5rem",color:"var(--text)",fontWeight:600},children:"Pass & Play"}),v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"0.95rem",lineHeight:1.5},children:"Single device. Pass it around."})]})]}),v.jsxs(tt.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},onClick:()=>t("multi"),className:"glass-panel",style:{width:"100%",padding:"2rem",display:"flex",alignItems:"center",gap:"1.5rem",cursor:"pointer",textAlign:"left",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1.5rem",position:"relative",overflow:"hidden"},whileHover:{scale:1.02,translateY:-2,backgroundColor:"rgba(255,255,255,0.08)"},whileTap:{scale:.98},children:[v.jsx("div",{style:{padding:"1.5rem",background:"rgba(6, 182, 212, 0.15)",borderRadius:"50%",color:"#22d3ee",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 20px rgba(6, 182, 212, 0.2)"},children:v.jsx(eA,{size:36})}),v.jsxs("div",{children:[v.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"0.5rem",color:"var(--text)",fontWeight:600},children:"Online Multiplayer"}),v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"0.95rem",lineHeight:1.5},children:"Play with friends on your own phones."})]})]})]})]})}const yk=()=>{};var aE={};const nA=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},vk=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],f=t[n++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],c=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},iA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,f=c?t[a+1]:0,d=a+2<t.length,p=d?t[a+2]:0,y=l>>2,T=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,w=p&63;d||(w=64,c||(E=64)),s.push(n[y],n[T],n[E],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],f=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const T=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||f==null||p==null||T==null)throw new _k;const E=l<<2|f>>4;if(s.push(E),p!==64){const w=f<<4&240|p>>2;if(s.push(w),T!==64){const V=p<<6&192|T;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tk=function(t){const e=nA(t);return iA.encodeByteArray(e,!0)},Bf=function(t){return Tk(t).replace(/\./g,"")},sA=function(t){try{return iA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ek=()=>bk().__FIREBASE_DEFAULTS__,Sk=()=>{if(typeof process>"u"||typeof aE>"u")return;const t=aE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sA(t[1]);return e&&JSON.parse(e)},vd=()=>{try{return yk()||Ek()||Sk()||xk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rA=t=>vd()?.emulatorHosts?.[t],wk=t=>{const e=rA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},aA=()=>vd()?.config,oA=t=>vd()?.[`_${t}`];class Ak{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function gl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lA(t){return(await fetch(t,{credentials:"include"})).ok}function Rk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bf(JSON.stringify(n)),Bf(JSON.stringify(c)),""].join(".")}const Bu={};function Ck(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bu))Bu[e]?t.emulator.push(e):t.prod.push(e);return t}function Ik(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let oE=!1;function uA(t,e){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Bu[t]===e||Bu[t]||oE)return;Bu[t]=e;function n(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=Ck().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{oE=!0,c()},E}function y(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=Ik(s),w=n("text"),V=document.getElementById(w)||document.createElement("span"),O=n("learnmore"),I=document.getElementById(O)||document.createElement("a"),P=n("preprendIcon"),z=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;f(F),y(I,O);const ue=p();d(z,P),F.append(z,V,I,ue),document.body.appendChild(F)}l?(V.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function Mk(){const t=vd()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ok(){const t=_n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Pk(){return!Mk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hA(){try{return typeof indexedDB=="object"}catch{return!1}}function fA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}function kk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const jk="FirebaseError";class Pi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=jk,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?Lk(l,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Pi(a,f,s)}}function Lk(t,e){return t.replace(Uk,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Uk=/\{\$([^}]+)}/g;function zk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Br(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const l=t[a],c=e[a];if(lE(l)&&lE(c)){if(!Br(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function lE(t){return t!==null&&typeof t=="object"}function yc(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bk(t,e){const n=new Fk(t,e);return n.subscribe.bind(n)}class Fk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Hk(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=fg),a.error===void 0&&(a.error=fg),a.complete===void 0&&(a.complete=fg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fg(){}const qk=1e3,Gk=2,$k=14400*1e3,Kk=.5;function uE(t,e=qk,n=Gk){const s=e*Math.pow(n,t),a=Math.round(Kk*s*(Math.random()-.5)*2);return Math.min($k,s+a)}function Xt(t){return t&&t._delegate?t._delegate:t}class Ni{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ma="[DEFAULT]";class Yk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Ak;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xk(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Qk(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qk(t){return t===Ma?void 0:t}function Xk(t){return t.instantiationMode==="EAGER"}class Wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const Jk={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Zk=qe.INFO,e4={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},t4=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=e4[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _d{constructor(e){this.name=e,this._logLevel=Zk,this._logHandler=t4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const n4=(t,e)=>e.some(n=>t instanceof n);let cE,hE;function i4(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s4(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dA=new WeakMap,Wg=new WeakMap,mA=new WeakMap,dg=new WeakMap,c0=new WeakMap;function r4(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Or(t.result)),a()},c=()=>{s(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&dA.set(n,t)}).catch(()=>{}),c0.set(e,t),e}function a4(t){if(Wg.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});Wg.set(t,e)}let Jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function o4(t){Jg=t(Jg)}function l4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(mg(this),e,...n);return mA.set(s,e.sort?e.sort():[e]),Or(s)}:s4().includes(t)?function(...e){return t.apply(mg(this),e),Or(dA.get(this))}:function(...e){return Or(t.apply(mg(this),e))}}function u4(t){return typeof t=="function"?l4(t):(t instanceof IDBTransaction&&a4(t),n4(t,i4())?new Proxy(t,Jg):t)}function Or(t){if(t instanceof IDBRequest)return r4(t);if(dg.has(t))return dg.get(t);const e=u4(t);return e!==t&&(dg.set(t,e),c0.set(e,t)),e}const mg=t=>c0.get(t);function pA(t,e,{blocked:n,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),f=Or(c);return s&&c.addEventListener("upgradeneeded",d=>{s(Or(c.result),d.oldVersion,d.newVersion,Or(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const c4=["get","getKey","getAll","getAllKeys","count"],h4=["put","add","delete","clear"],pg=new Map;function fE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pg.get(e))return pg.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=h4.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||c4.includes(n)))return;const l=async function(c,...f){const d=this.transaction(c,a?"readwrite":"readonly");let p=d.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),a&&d.done]))[0]};return pg.set(e,l),l}o4(t=>({...t,get:(e,n,s)=>fE(e,n)||t.get(e,n,s),has:(e,n)=>!!fE(e,n)||t.has(e,n)}));class f4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d4(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function d4(t){return t.getComponent()?.type==="VERSION"}const Zg="@firebase/app",dE="0.14.6";const Bs=new _d("@firebase/app"),m4="@firebase/app-compat",p4="@firebase/analytics-compat",g4="@firebase/analytics",y4="@firebase/app-check-compat",v4="@firebase/app-check",_4="@firebase/auth",T4="@firebase/auth-compat",b4="@firebase/database",E4="@firebase/data-connect",S4="@firebase/database-compat",x4="@firebase/functions",w4="@firebase/functions-compat",A4="@firebase/installations",R4="@firebase/installations-compat",C4="@firebase/messaging",I4="@firebase/messaging-compat",D4="@firebase/performance",M4="@firebase/performance-compat",N4="@firebase/remote-config",V4="@firebase/remote-config-compat",O4="@firebase/storage",P4="@firebase/storage-compat",k4="@firebase/firestore",j4="@firebase/ai",L4="@firebase/firestore-compat",U4="firebase",z4="12.6.0";const ey="[DEFAULT]",B4={[Zg]:"fire-core",[m4]:"fire-core-compat",[g4]:"fire-analytics",[p4]:"fire-analytics-compat",[v4]:"fire-app-check",[y4]:"fire-app-check-compat",[_4]:"fire-auth",[T4]:"fire-auth-compat",[b4]:"fire-rtdb",[E4]:"fire-data-connect",[S4]:"fire-rtdb-compat",[x4]:"fire-fn",[w4]:"fire-fn-compat",[A4]:"fire-iid",[R4]:"fire-iid-compat",[C4]:"fire-fcm",[I4]:"fire-fcm-compat",[D4]:"fire-perf",[M4]:"fire-perf-compat",[N4]:"fire-rc",[V4]:"fire-rc-compat",[O4]:"fire-gcs",[P4]:"fire-gcs-compat",[k4]:"fire-fst",[L4]:"fire-fst-compat",[j4]:"fire-vertex","fire-js":"fire-js",[U4]:"fire-js-all"};const Ff=new Map,F4=new Map,ty=new Map;function mE(t,e){try{t.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fs(t){const e=t.name;if(ty.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(const n of Ff.values())mE(n,t);for(const n of F4.values())mE(n,t);return!0}function Wa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ci(t){return t==null?!1:t.settings!==void 0}const H4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new Xa("app","Firebase",H4);class q4{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}const yl=z4;function gA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ey,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Pr.create("bad-app-name",{appName:String(a)});if(n||(n=aA()),!n)throw Pr.create("no-options");const l=Ff.get(a);if(l){if(Br(n,l.options)&&Br(s,l.config))return l;throw Pr.create("duplicate-app",{appName:a})}const c=new Wk(a);for(const d of ty.values())c.addComponent(d);const f=new q4(n,s,c);return Ff.set(a,f),f}function h0(t=ey){const e=Ff.get(t);if(!e&&t===ey&&aA())return gA();if(!e)throw Pr.create("no-app",{appName:t});return e}function hi(t,e,n){let s=B4[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(c.join(" "));return}fs(new Ni(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const G4="firebase-heartbeat-database",$4=1,ec="firebase-heartbeat-store";let gg=null;function yA(){return gg||(gg=pA(G4,$4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ec)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),gg}async function K4(t){try{const n=(await yA()).transaction(ec),s=await n.objectStore(ec).get(vA(t));return await n.done,s}catch(e){if(e instanceof Pi)Bs.warn(e.message);else{const n=Pr.create("idb-get",{originalErrorMessage:e?.message});Bs.warn(n.message)}}}async function pE(t,e){try{const s=(await yA()).transaction(ec,"readwrite");await s.objectStore(ec).put(e,vA(t)),await s.done}catch(n){if(n instanceof Pi)Bs.warn(n.message);else{const s=Pr.create("idb-set",{originalErrorMessage:n?.message});Bs.warn(s.message)}}}function vA(t){return`${t.name}!${t.options.appId}`}const Y4=1024,Q4=30;class X4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J4(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Q4){const a=Z4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gE(),{heartbeatsToSend:n,unsentEntries:s}=W4(this._heartbeatsCache.heartbeats),a=Bf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Bs.warn(e),""}}}function gE(){return new Date().toISOString().substring(0,10)}function W4(t,e=Y4){const n=[];let s=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),yE(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),yE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class J4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hA()?fA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return pE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return pE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yE(t){return Bf(JSON.stringify({version:2,heartbeats:t})).length}function Z4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function e3(t){fs(new Ni("platform-logger",e=>new f4(e),"PRIVATE")),fs(new Ni("heartbeat",e=>new X4(e),"PRIVATE")),hi(Zg,dE,t),hi(Zg,dE,"esm2020"),hi("fire-js","")}e3("");var t3="firebase",n3="12.7.0";hi(t3,n3,"app");var vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kr,_A;(function(){var t;function e(C,A){function N(){}N.prototype=A.prototype,C.F=A.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(L,j,H){for(var D=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)D[_e-2]=arguments[_e];return A.prototype[j].apply(L,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,A,N){N||(N=0);const L=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)L[j]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(j=0;j<16;++j)L[j]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=C.g[0],N=C.g[1],j=C.g[2];let H=C.g[3],D;D=A+(H^N&(j^H))+L[0]+3614090360&4294967295,A=N+(D<<7&4294967295|D>>>25),D=H+(j^A&(N^j))+L[1]+3905402710&4294967295,H=A+(D<<12&4294967295|D>>>20),D=j+(N^H&(A^N))+L[2]+606105819&4294967295,j=H+(D<<17&4294967295|D>>>15),D=N+(A^j&(H^A))+L[3]+3250441966&4294967295,N=j+(D<<22&4294967295|D>>>10),D=A+(H^N&(j^H))+L[4]+4118548399&4294967295,A=N+(D<<7&4294967295|D>>>25),D=H+(j^A&(N^j))+L[5]+1200080426&4294967295,H=A+(D<<12&4294967295|D>>>20),D=j+(N^H&(A^N))+L[6]+2821735955&4294967295,j=H+(D<<17&4294967295|D>>>15),D=N+(A^j&(H^A))+L[7]+4249261313&4294967295,N=j+(D<<22&4294967295|D>>>10),D=A+(H^N&(j^H))+L[8]+1770035416&4294967295,A=N+(D<<7&4294967295|D>>>25),D=H+(j^A&(N^j))+L[9]+2336552879&4294967295,H=A+(D<<12&4294967295|D>>>20),D=j+(N^H&(A^N))+L[10]+4294925233&4294967295,j=H+(D<<17&4294967295|D>>>15),D=N+(A^j&(H^A))+L[11]+2304563134&4294967295,N=j+(D<<22&4294967295|D>>>10),D=A+(H^N&(j^H))+L[12]+1804603682&4294967295,A=N+(D<<7&4294967295|D>>>25),D=H+(j^A&(N^j))+L[13]+4254626195&4294967295,H=A+(D<<12&4294967295|D>>>20),D=j+(N^H&(A^N))+L[14]+2792965006&4294967295,j=H+(D<<17&4294967295|D>>>15),D=N+(A^j&(H^A))+L[15]+1236535329&4294967295,N=j+(D<<22&4294967295|D>>>10),D=A+(j^H&(N^j))+L[1]+4129170786&4294967295,A=N+(D<<5&4294967295|D>>>27),D=H+(N^j&(A^N))+L[6]+3225465664&4294967295,H=A+(D<<9&4294967295|D>>>23),D=j+(A^N&(H^A))+L[11]+643717713&4294967295,j=H+(D<<14&4294967295|D>>>18),D=N+(H^A&(j^H))+L[0]+3921069994&4294967295,N=j+(D<<20&4294967295|D>>>12),D=A+(j^H&(N^j))+L[5]+3593408605&4294967295,A=N+(D<<5&4294967295|D>>>27),D=H+(N^j&(A^N))+L[10]+38016083&4294967295,H=A+(D<<9&4294967295|D>>>23),D=j+(A^N&(H^A))+L[15]+3634488961&4294967295,j=H+(D<<14&4294967295|D>>>18),D=N+(H^A&(j^H))+L[4]+3889429448&4294967295,N=j+(D<<20&4294967295|D>>>12),D=A+(j^H&(N^j))+L[9]+568446438&4294967295,A=N+(D<<5&4294967295|D>>>27),D=H+(N^j&(A^N))+L[14]+3275163606&4294967295,H=A+(D<<9&4294967295|D>>>23),D=j+(A^N&(H^A))+L[3]+4107603335&4294967295,j=H+(D<<14&4294967295|D>>>18),D=N+(H^A&(j^H))+L[8]+1163531501&4294967295,N=j+(D<<20&4294967295|D>>>12),D=A+(j^H&(N^j))+L[13]+2850285829&4294967295,A=N+(D<<5&4294967295|D>>>27),D=H+(N^j&(A^N))+L[2]+4243563512&4294967295,H=A+(D<<9&4294967295|D>>>23),D=j+(A^N&(H^A))+L[7]+1735328473&4294967295,j=H+(D<<14&4294967295|D>>>18),D=N+(H^A&(j^H))+L[12]+2368359562&4294967295,N=j+(D<<20&4294967295|D>>>12),D=A+(N^j^H)+L[5]+4294588738&4294967295,A=N+(D<<4&4294967295|D>>>28),D=H+(A^N^j)+L[8]+2272392833&4294967295,H=A+(D<<11&4294967295|D>>>21),D=j+(H^A^N)+L[11]+1839030562&4294967295,j=H+(D<<16&4294967295|D>>>16),D=N+(j^H^A)+L[14]+4259657740&4294967295,N=j+(D<<23&4294967295|D>>>9),D=A+(N^j^H)+L[1]+2763975236&4294967295,A=N+(D<<4&4294967295|D>>>28),D=H+(A^N^j)+L[4]+1272893353&4294967295,H=A+(D<<11&4294967295|D>>>21),D=j+(H^A^N)+L[7]+4139469664&4294967295,j=H+(D<<16&4294967295|D>>>16),D=N+(j^H^A)+L[10]+3200236656&4294967295,N=j+(D<<23&4294967295|D>>>9),D=A+(N^j^H)+L[13]+681279174&4294967295,A=N+(D<<4&4294967295|D>>>28),D=H+(A^N^j)+L[0]+3936430074&4294967295,H=A+(D<<11&4294967295|D>>>21),D=j+(H^A^N)+L[3]+3572445317&4294967295,j=H+(D<<16&4294967295|D>>>16),D=N+(j^H^A)+L[6]+76029189&4294967295,N=j+(D<<23&4294967295|D>>>9),D=A+(N^j^H)+L[9]+3654602809&4294967295,A=N+(D<<4&4294967295|D>>>28),D=H+(A^N^j)+L[12]+3873151461&4294967295,H=A+(D<<11&4294967295|D>>>21),D=j+(H^A^N)+L[15]+530742520&4294967295,j=H+(D<<16&4294967295|D>>>16),D=N+(j^H^A)+L[2]+3299628645&4294967295,N=j+(D<<23&4294967295|D>>>9),D=A+(j^(N|~H))+L[0]+4096336452&4294967295,A=N+(D<<6&4294967295|D>>>26),D=H+(N^(A|~j))+L[7]+1126891415&4294967295,H=A+(D<<10&4294967295|D>>>22),D=j+(A^(H|~N))+L[14]+2878612391&4294967295,j=H+(D<<15&4294967295|D>>>17),D=N+(H^(j|~A))+L[5]+4237533241&4294967295,N=j+(D<<21&4294967295|D>>>11),D=A+(j^(N|~H))+L[12]+1700485571&4294967295,A=N+(D<<6&4294967295|D>>>26),D=H+(N^(A|~j))+L[3]+2399980690&4294967295,H=A+(D<<10&4294967295|D>>>22),D=j+(A^(H|~N))+L[10]+4293915773&4294967295,j=H+(D<<15&4294967295|D>>>17),D=N+(H^(j|~A))+L[1]+2240044497&4294967295,N=j+(D<<21&4294967295|D>>>11),D=A+(j^(N|~H))+L[8]+1873313359&4294967295,A=N+(D<<6&4294967295|D>>>26),D=H+(N^(A|~j))+L[15]+4264355552&4294967295,H=A+(D<<10&4294967295|D>>>22),D=j+(A^(H|~N))+L[6]+2734768916&4294967295,j=H+(D<<15&4294967295|D>>>17),D=N+(H^(j|~A))+L[13]+1309151649&4294967295,N=j+(D<<21&4294967295|D>>>11),D=A+(j^(N|~H))+L[4]+4149444226&4294967295,A=N+(D<<6&4294967295|D>>>26),D=H+(N^(A|~j))+L[11]+3174756917&4294967295,H=A+(D<<10&4294967295|D>>>22),D=j+(A^(H|~N))+L[2]+718787259&4294967295,j=H+(D<<15&4294967295|D>>>17),D=N+(H^(j|~A))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+H&4294967295}s.prototype.v=function(C,A){A===void 0&&(A=C.length);const N=A-this.blockSize,L=this.C;let j=this.h,H=0;for(;H<A;){if(j==0)for(;H<=N;)a(this,C,H),H+=this.blockSize;if(typeof C=="string"){for(;H<A;)if(L[j++]=C.charCodeAt(H++),j==this.blockSize){a(this,L),j=0;break}}else for(;H<A;)if(L[j++]=C[H++],j==this.blockSize){a(this,L),j=0;break}}this.h=j,this.o+=A},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)C[A++]=this.g[N]>>>L&255;return C};function l(C,A){var N=f;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=A(C)}function c(C,A){this.h=A;const N=[];let L=!0;for(let j=C.length-1;j>=0;j--){const H=C[j]|0;L&&H==A||(N[j]=H,L=!1)}this.g=N}var f={};function d(C){return-128<=C&&C<128?l(C,function(A){return new c([A|0],A<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return I(p(-C));const A=[];let N=1;for(let L=0;C>=N;L++)A[L]=C/N|0,N*=4294967296;return new c(A,0)}function y(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return I(y(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(A,8));let L=T;for(let H=0;H<C.length;H+=8){var j=Math.min(8,C.length-H);const D=parseInt(C.substring(H,H+j),A);j<8?(j=p(Math.pow(A,j)),L=L.j(j).add(p(D))):(L=L.j(N),L=L.add(p(D)))}return L}var T=d(0),E=d(1),w=d(16777216);t=c.prototype,t.m=function(){if(O(this))return-I(this).m();let C=0,A=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);C+=(L>=0?L:4294967296+L)*A,A*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(O(this))return"-"+I(this).toString(C);const A=p(Math.pow(C,6));var N=this;let L="";for(;;){const j=ue(N,A).g;N=P(N,j.j(A));let H=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=j,V(N))return H+L;for(;H.length<6;)H="0"+H;L=H+L}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function O(C){return C.h==-1}t.l=function(C){return C=P(this,C),O(C)?-1:V(C)?0:1};function I(C){const A=C.g.length,N=[];for(let L=0;L<A;L++)N[L]=~C.g[L];return new c(N,~C.h).add(E)}t.abs=function(){return O(this)?I(this):this},t.add=function(C){const A=Math.max(this.g.length,C.g.length),N=[];let L=0;for(let j=0;j<=A;j++){let H=L+(this.i(j)&65535)+(C.i(j)&65535),D=(H>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);L=D>>>16,H&=65535,D&=65535,N[j]=D<<16|H}return new c(N,N[N.length-1]&-2147483648?-1:0)};function P(C,A){return C.add(I(A))}t.j=function(C){if(V(this)||V(C))return T;if(O(this))return O(C)?I(this).j(I(C)):I(I(this).j(C));if(O(C))return I(this.j(I(C)));if(this.l(w)<0&&C.l(w)<0)return p(this.m()*C.m());const A=this.g.length+C.g.length,N=[];for(var L=0;L<2*A;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let j=0;j<C.g.length;j++){const H=this.i(L)>>>16,D=this.i(L)&65535,_e=C.i(j)>>>16,Ne=C.i(j)&65535;N[2*L+2*j]+=D*Ne,z(N,2*L+2*j),N[2*L+2*j+1]+=H*Ne,z(N,2*L+2*j+1),N[2*L+2*j+1]+=D*_e,z(N,2*L+2*j+1),N[2*L+2*j+2]+=H*_e,z(N,2*L+2*j+2)}for(C=0;C<A;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=A;C<2*A;C++)N[C]=0;return new c(N,0)};function z(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function F(C,A){this.g=C,this.h=A}function ue(C,A){if(V(A))throw Error("division by zero");if(V(C))return new F(T,T);if(O(C))return A=ue(I(C),A),new F(I(A.g),I(A.h));if(O(A))return A=ue(C,I(A)),new F(I(A.g),A.h);if(C.g.length>30){if(O(C)||O(A))throw Error("slowDivide_ only works with positive integers.");for(var N=E,L=A;L.l(C)<=0;)N=Y(N),L=Y(L);var j=ae(N,1),H=ae(L,1);for(L=ae(L,2),N=ae(N,2);!V(L);){var D=H.add(L);D.l(C)<=0&&(j=j.add(N),H=D),L=ae(L,1),N=ae(N,1)}return A=P(C,j.j(A)),new F(j,A)}for(j=T;C.l(A)>=0;){for(N=Math.max(1,Math.floor(C.m()/A.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),H=p(N),D=H.j(A);O(D)||D.l(C)>0;)N-=L,H=p(N),D=H.j(A);V(H)&&(H=E),j=j.add(H),C=P(C,D)}return new F(j,C)}t.B=function(C){return ue(this,C).h},t.and=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let L=0;L<A;L++)N[L]=this.i(L)&C.i(L);return new c(N,this.h&C.h)},t.or=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let L=0;L<A;L++)N[L]=this.i(L)|C.i(L);return new c(N,this.h|C.h)},t.xor=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let L=0;L<A;L++)N[L]=this.i(L)^C.i(L);return new c(N,this.h^C.h)};function Y(C){const A=C.g.length+1,N=[];for(let L=0;L<A;L++)N[L]=C.i(L)<<1|C.i(L-1)>>>31;return new c(N,C.h)}function ae(C,A){const N=A>>5;A%=32;const L=C.g.length-N,j=[];for(let H=0;H<L;H++)j[H]=A>0?C.i(H+N)>>>A|C.i(H+N+1)<<32-A:C.i(H+N);return new c(j,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,_A=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,kr=c}).apply(typeof vE<"u"?vE:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var TA,Mu,bA,xf,ny,EA,SA,xA;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function a(h,_){if(_)e:{var S=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var G=h[R];if(!(G in S))break e;S=S[G]}h=h[h.length-1],R=S[h],_=_(R),_!=R&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var S=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&S.push([R,_[R]]);return S}});var l=l||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,S){return h.call.apply(h.bind,arguments)}function p(h,_,S){return p=d,p.apply(null,arguments)}function y(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var R=S.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function T(h,_){function S(){}S.prototype=_.prototype,h.Z=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(R,G,X){for(var fe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)fe[Pe-2]=arguments[Pe];return _.prototype[G].apply(R,fe)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const S=Array(_);for(let R=0;R<_;R++)S[R]=h[R];return S}return[]}function V(h,_){for(let R=1;R<arguments.length;R++){const G=arguments[R];var S=typeof G;if(S=S!="object"?S:G?Array.isArray(G)?"array":S:"null",S=="array"||S=="object"&&typeof G.length=="number"){S=h.length||0;const X=G.length||0;h.length=S+X;for(let fe=0;fe<X;fe++)h[S+fe]=G[fe]}else h.push(G)}}class O{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function I(h){c.setTimeout(()=>{throw h},0)}function P(){var h=C;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,S){const R=F.get();R.set(_,S),this.h?this.h.next=R:this.g=R,this.h=R}}var F=new O(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,ae=!1,C=new z,A=()=>{const h=Promise.resolve(void 0);Y=()=>{h.then(N)}};function N(){for(var h;h=P();){try{h.h.call(h.g)}catch(S){I(S)}var _=F;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}ae=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};c.addEventListener("test",S,_),c.removeEventListener("test",S,_)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function _e(h,_){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}T(_e,j),_e.prototype.init=function(h,_){const S=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),J=0;function oe(h,_,S,R,G){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!R,this.ha=G,this.key=++J,this.da=this.fa=!1}function ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ye(h,_,S){for(const R in h)_.call(S,h[R],R,h)}function Te(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function U(h){const _={};for(const S in h)_[S]=h[S];return _}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,_){let S,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(S in R)h[S]=R[S];for(let X=0;X<Z.length;X++)S=Z[X],Object.prototype.hasOwnProperty.call(R,S)&&(h[S]=R[S])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,_,S,R,G){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const fe=he(h,_,R,G);return fe>-1?(_=h[fe],S||(_.fa=!1)):(_=new oe(_,this.src,X,!!R,G),_.fa=S,h.push(_)),_};function ce(h,_){const S=_.type;if(S in h.g){var R=h.g[S],G=Array.prototype.indexOf.call(R,_,void 0),X;(X=G>=0)&&Array.prototype.splice.call(R,G,1),X&&(ne(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function he(h,_,S,R){for(let G=0;G<h.length;++G){const X=h[G];if(!X.da&&X.listener==_&&X.capture==!!S&&X.ha==R)return G}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Ae={};function Ie(h,_,S,R,G){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Ie(h,_[X],S,R,G);return null}return S=Zr(S),h&&h[Ne]?h.J(_,S,f(R)?!!R.capture:!1,G):de(h,_,S,!1,R,G)}function de(h,_,S,R,G,X){if(!_)throw Error("Invalid event type");const fe=f(G)?!!G.capture:!!G;let Pe=nn(h);if(Pe||(h[Ee]=Pe=new me(h)),S=Pe.add(_,S,R,fe,X),S.proxy)return S;if(R=Le(),S.proxy=R,R.src=h,R.listener=S,h.addEventListener)H||(G=fe),G===void 0&&(G=!1),h.addEventListener(_.toString(),R,G);else if(h.attachEvent)h.attachEvent(Gt(_.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Le(){function h(S){return _.call(h.src,h.listener,S)}const _=wn;return h}function it(h,_,S,R,G){if(Array.isArray(_))for(var X=0;X<_.length;X++)it(h,_[X],S,R,G);else R=f(R)?!!R.capture:!!R,S=Zr(S),h&&h[Ne]?(h=h.i,X=String(_).toString(),X in h.g&&(_=h.g[X],S=he(_,S,R,G),S>-1&&(ne(_[S]),Array.prototype.splice.call(_,S,1),_.length==0&&(delete h.g[X],h.h--)))):h&&(h=nn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=he(_,S,R,G)),(S=h>-1?_[h]:null)&&tn(S))}function tn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ne])ce(_.i,h);else{var S=h.type,R=h.proxy;_.removeEventListener?_.removeEventListener(S,R,h.capture):_.detachEvent?_.detachEvent(Gt(S),R):_.addListener&&_.removeListener&&_.removeListener(R),(S=nn(_))?(ce(S,h),S.h==0&&(S.src=null,_[Ee]=null)):ne(h)}}}function Gt(h){return h in Ae?Ae[h]:Ae[h]="on"+h}function wn(h,_){if(h.da)h=!0;else{_=new _e(_,this);const S=h.listener,R=h.ha||h.src;h.fa&&tn(h),h=S.call(R,_)}return h}function nn(h){return h=h[Ee],h instanceof me?h:null}var Ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zr(h){return typeof h=="function"?h:(h[Ks]||(h[Ks]=function(_){return h.handleEvent(_)}),h[Ks])}function Nt(){L.call(this),this.i=new me(this),this.M=this,this.G=null}T(Nt,L),Nt.prototype[Ne]=!0,Nt.prototype.removeEventListener=function(h,_,S,R){it(this,h,_,S,R)};function $t(h,_){var S,R=h.G;if(R)for(S=[];R;R=R.G)S.push(R);if(h=h.M,R=_.type||_,typeof _=="string")_=new j(_,h);else if(_ instanceof j)_.target=_.target||h;else{var G=_;_=new j(R,h),le(_,G)}G=!0;let X,fe;if(S)for(fe=S.length-1;fe>=0;fe--)X=_.g=S[fe],G=Ys(X,R,!0,_)&&G;if(X=_.g=h,G=Ys(X,R,!0,_)&&G,G=Ys(X,R,!1,_)&&G,S)for(fe=0;fe<S.length;fe++)X=_.g=S[fe],G=Ys(X,R,!1,_)&&G}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const S=h.g[_];for(let R=0;R<S.length;R++)ne(S[R]);delete h.g[_],h.h--}}this.G=null},Nt.prototype.J=function(h,_,S,R){return this.i.add(String(h),_,!1,S,R)},Nt.prototype.K=function(h,_,S,R){return this.i.add(String(h),_,!0,S,R)};function Ys(h,_,S,R){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let G=!0;for(let X=0;X<_.length;++X){const fe=_[X];if(fe&&!fe.da&&fe.capture==S){const Pe=fe.listener,Rt=fe.ha||fe.src;fe.fa&&ce(h.i,fe),G=Pe.call(Rt,R)!==!1&&G}}return G&&!R.defaultPrevented}function Fd(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Cc(h){h.g=Fd(()=>{h.g=null,h.i&&(h.i=!1,Cc(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Tn extends L{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Cc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(h){L.call(this),this.h=h,this.g={}}T(ea,L);var xl=[];function wl(h){ye(h.g,function(_,S){this.g.hasOwnProperty(S)&&tn(_)},h),h.g={}}ea.prototype.N=function(){ea.Z.N.call(this),wl(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=c.JSON.stringify,Hd=c.JSON.parse,Ic=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Dc(){}function Mc(){}var mi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sn(){j.call(this,"d")}T(sn,j);function Kn(){j.call(this,"c")}T(Kn,j);var At={},Nc=null;function eo(){return Nc=Nc||new Nt}At.Ia="serverreachability";function Vc(h){j.call(this,At.Ia,h)}T(Vc,j);function ki(h){const _=eo();$t(_,new Vc(_))}At.STAT_EVENT="statevent";function ta(h,_){j.call(this,At.STAT_EVENT,h),this.stat=_}T(ta,j);function Vt(h){const _=eo();$t(_,new ta(_,h))}At.Ja="timingevent";function ji(h,_){j.call(this,At.Ja,h),this.size=_}T(ji,j);function Li(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function qd(h,_,S,R,G,X){h.info(function(){if(h.g)if(X){var fe="",Pe=X.split("&");for(let Je=0;Je<Pe.length;Je++){var Rt=Pe[Je].split("=");if(Rt.length>1){const yt=Rt[0];Rt=Rt[1];const Wn=yt.split("_");fe=Wn.length>=2&&Wn[1]=="type"?fe+(yt+"="+Rt+"&"):fe+(yt+"=redacted&")}}}else fe=null;else fe=X;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+_+`
`+S+`
`+fe})}function Oc(h,_,S,R,G,X,fe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+_+`
`+S+`
`+X+" "+fe})}function Ui(h,_,S,R){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Gd(h,S)+(R?" "+R:"")})}function na(h,_){h.info(function(){return"TIMEOUT: "+_})}pi.prototype.info=function(){};function Gd(h,_){if(!h.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var S=X[h];if(!(S.length<2)){var R=S[1];if(Array.isArray(R)&&!(R.length<1)){var G=R[0];if(G!="noop"&&G!="stop"&&G!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return Qs(X)}catch{return _}}var ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rl;function sa(){}T(sa,Dc),sa.prototype.g=function(){return new XMLHttpRequest},Rl=new sa;function ms(h){return encodeURIComponent(String(h))}function Pc(h){var _=1;h=h.split(":");const S=[];for(;_>0&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function gi(h,_,S,R){this.j=h,this.i=_,this.l=S,this.S=R||1,this.V=new ea(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yi}function yi(){this.i=null,this.g="",this.h=!1}var Ot={},Wt={};function zi(h,_,S){h.M=1,h.A=ra(kt(_)),h.u=S,h.R=!0,to(h,null)}function to(h,_){h.F=Date.now(),Bi(h),h.B=kt(h.A);var S=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),ro(S.i,"t",R),h.C=0,S=h.j.L,h.h=new yi,h.g=Xc(h.j,S?_:null,!h.u),h.P>0&&(h.O=new Tn(p(h.Y,h,h.g),h.P)),_=h.V,S=h.g,R=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(xl[0]=G.toString()),G=xl);for(let X=0;X<G.length;X++){const fe=Ie(S,G[X],R||_.handleEvent,!1,_.h||_);if(!fe)break;_.g[fe.key]=fe}_=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),ki(),qd(h.i,h.v,h.B,h.l,h.S,h.u)}gi.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ti(h)==3?_.j():this.Y(h)},gi.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=Ti(this.g),Rt=this.g.ya(),Je=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||rn(this.g)))){this.K||Pe!=4||Rt==7||(Rt==8||Je<=0?ki(3):ki(2)),Fi(this);var _=this.g.ca();this.X=_;var S=$d(this);if(this.o=_==200,Oc(this.i,this.v,this.B,this.l,this.S,Pe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var X=R;break t}}X=null}if(h=X)Ui(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hi(this,h);else{this.o=!1,this.m=3,Vt(12),kn(this),Yn(this);break e}}if(this.R){h=!0;let yt;for(;!this.K&&this.C<S.length;)if(yt=jc(this,S),yt==Wt){Pe==4&&(this.m=4,Vt(14),h=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Ot){this.m=4,Vt(15),Ui(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else Ui(this.i,this.l,yt,null),Hi(this,yt);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||S.length!=0||this.h.h||(this.m=1,Vt(16),h=!1),this.o=this.o&&h,!h)Ui(this.i,this.l,S,"[Invalid Chunked Response]"),kn(this),Yn(this);else if(S.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Fl(fe),fe.P=!0,Vt(11))}}else Ui(this.i,this.l,S,null),Hi(this,S);Pe==4&&kn(this),this.o&&!this.K&&(Pe==4?$c(this.j,this):(this.o=!1,Bi(this)))}else gs(this.g),_==400&&S.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),kn(this),Yn(this)}}}catch{}};function $d(h){if(!kc(h))return h.g.la();const _=rn(h.g);if(_==="")return"";let S="";const R=_.length,G=Ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return kn(h),Yn(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<R;X++)h.h.h=!0,S+=h.h.i.decode(_[X],{stream:!(G&&X==R-1)});return _.length=0,h.h.g+=S,h.C=0,h.h.g}function kc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function jc(h,_){var S=h.C,R=_.indexOf(`
`,S);return R==-1?Wt:(S=Number(_.substring(S,R)),isNaN(S)?Ot:(R+=1,R+S>_.length?Wt:(_=_.slice(R,R+S),h.C=R+S,_)))}gi.prototype.cancel=function(){this.K=!0,kn(this)};function Bi(h){h.T=Date.now()+h.H,no(h,h.H)}function no(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Li(p(h.aa,h),_)}function Fi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}gi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(na(this.i,this.B),this.M!=2&&(ki(),Vt(17)),kn(this),this.m=2,Yn(this)):no(this,this.T-h)};function Yn(h){h.j.I==0||h.K||$c(h.j,h)}function kn(h){Fi(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,wl(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Hi(h,_){try{var S=h.j;if(S.I!=0&&(S.g==h||Gi(S.h,h))){if(!h.L&&Gi(S.h,h)&&S.I==3){try{var R=S.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)co(S),ir(S);else break e;fa(S),Vt(18)}}else S.xa=G[1],0<S.xa-S.K&&G[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Li(p(S.Va,S),6e3));qi(S.h)<=1&&S.ta&&(S.ta=void 0)}else Wi(S,11)}else if((h.L||S.g==h)&&co(S),!D(_))for(G=S.Ba.g.parse(_),_=0;_<G.length;_++){let Je=G[_];const yt=Je[0];if(!(yt<=S.K))if(S.K=yt,Je=Je[1],S.I==2)if(Je[0]=="c"){S.M=Je[1],S.ba=Je[2];const Wn=Je[3];Wn!=null&&(S.ka=Wn,S.j.info("VER="+S.ka));const Ji=Je[4];Ji!=null&&(S.za=Ji,S.j.info("SVER="+S.za));const bi=Je[5];bi!=null&&typeof bi=="number"&&bi>0&&(R=1.5*bi,S.O=R,S.j.info("backChannelRequestTimeoutMs_="+R)),R=S;const Ei=h.g;if(Ei){const da=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var X=R.h;X.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Dl(X,X.h),X.h=null))}if(R.G){const ho=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(R.wa=ho,st(R.J,R.G,ho))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),R=S;var fe=h;if(R.na=Qc(R,R.L?R.ba:null,R.W),fe.L){Ml(R.h,fe);var Pe=fe,Rt=R.O;Rt&&(Pe.H=Rt),Pe.D&&(Fi(Pe),Bi(Pe)),R.g=fe}else qc(R);S.i.length>0&&Xi(S)}else Je[0]!="stop"&&Je[0]!="close"||Wi(S,7);else S.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Wi(S,7):zl(S):Je[0]!="noop"&&S.l&&S.l.qa(Je),S.A=0)}}ki(4)}catch{}}var Pt=class{constructor(h,_){this.g=h,this.map=_}};function Cl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qi(h){return h.h?1:h.g?h.g.size:0}function Gi(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Dl(h,_){h.g?h.g.add(_):h.h=_}function Ml(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Cl.prototype.cancel=function(){if(this.i=Nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.G);return _}return w(h.i)}var Lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function io(h,_){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const R=h[S].indexOf("=");let G,X=null;R>=0?(G=h[S].substring(0,R),X=h[S].substring(R+1)):G=h[S],_(G,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function jn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof jn?(this.l=h.l,Jt(this,h.j),this.o=h.o,this.g=h.g,Xs(this,h.u),this.h=h.h,Vl(this,Fc(h.i)),this.m=h.m):h&&(_=String(h).match(Lc))?(this.l=!1,Jt(this,_[1]||"",!0),this.o=$i(_[2]||""),this.g=$i(_[3]||"",!0),Xs(this,_[4]),this.h=$i(_[5]||"",!0),Vl(this,_[6]||"",!0),this.m=$i(_[7]||"")):(this.l=!1,this.i=new Js(null,this.l))}jn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(aa(_,so,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push(aa(_,so,!0),"@"),h.push(ms(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(aa(S,S.charAt(0)=="/"?Ol:Uc,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",aa(S,zc)),h.join("")},jn.prototype.resolve=function(h){const _=kt(this);let S=!!h.j;S?Jt(_,h.j):S=!!h.o,S?_.o=h.o:S=!!h.g,S?_.g=h.g:S=h.u!=null;var R=h.h;if(S)Xs(_,h.u);else if(S=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var G=_.h.lastIndexOf("/");G!=-1&&(R=_.h.slice(0,G+1)+R)}if(G=R,G==".."||G==".")R="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){R=G.lastIndexOf("/",0)==0,G=G.split("/");const X=[];for(let fe=0;fe<G.length;){const Pe=G[fe++];Pe=="."?R&&fe==G.length&&X.push(""):Pe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&fe==G.length&&X.push("")):(X.push(Pe),R=!0)}R=X.join("/")}else R=G}return S?_.h=R:S=h.i.toString()!=="",S?Vl(_,Fc(h.i)):S=!!h.m,S&&(_.m=h.m),_};function kt(h){return new jn(h)}function Jt(h,_,S){h.j=S?$i(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Xs(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Vl(h,_,S){_ instanceof Js?(h.i=_,ao(h.i,h.l)):(S||(_=aa(_,Ws)),h.i=new Js(_,h.l))}function st(h,_,S){h.i.set(_,S)}function ra(h){return st(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function $i(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function aa(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,An),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function An(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var so=/[#\/\?@]/g,Uc=/[#\?:]/g,Ol=/[#\?]/g,Ws=/[#\?@]/g,zc=/#/g;function Js(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Rn(h){h.g||(h.g=new Map,h.h=0,h.i&&io(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}t=Js.prototype,t.add=function(h,_){Rn(this),this.i=null,h=Zs(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function Bc(h,_){Rn(h),_=Zs(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Pl(h,_){return Rn(h),_=Zs(h,_),h.g.has(_)}t.forEach=function(h,_){Rn(this),this.g.forEach(function(S,R){S.forEach(function(G){h.call(_,G,R,this)},this)},this)};function kl(h,_){Rn(h);let S=[];if(typeof _=="string")Pl(h,_)&&(S=S.concat(h.g.get(Zs(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)S=S.concat(h[_]);return S}t.set=function(h,_){return Rn(this),this.i=null,h=Zs(this,h),Pl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=kl(this,h),h.length>0?String(h[0]):_):_};function ro(h,_,S){Bc(h,_),S.length>0&&(h.i=null,h.g.set(Zs(h,_),w(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var S=_[R];const G=ms(S);S=kl(this,S);for(let X=0;X<S.length;X++){let fe=G;S[X]!==""&&(fe+="="+ms(S[X])),h.push(fe)}}return this.i=h.join("&")};function Fc(h){const _=new Js;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Zs(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function ao(h,_){_&&!h.j&&(Rn(h),h.i=null,h.g.forEach(function(S,R){const G=R.toLowerCase();R!=G&&(Bc(this,R),ro(this,G,S))},h)),h.j=_}function vi(h,_){const S=new pi;if(c.Image){const R=new Image;R.onload=y(Qn,S,"TestLoadImage: loaded",!0,_,R),R.onerror=y(Qn,S,"TestLoadImage: error",!1,_,R),R.onabort=y(Qn,S,"TestLoadImage: abort",!1,_,R),R.ontimeout=y(Qn,S,"TestLoadImage: timeout",!1,_,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else _(!1)}function jl(h,_){const S=new pi,R=new AbortController,G=setTimeout(()=>{R.abort(),Qn(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(G),X.ok?Qn(S,"TestPingServer: ok",!0,_):Qn(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),Qn(S,"TestPingServer: error",!1,_)})}function Qn(h,_,S,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(S)}catch{}}function er(){this.g=new Ic}function Ki(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ki,Dc),Ki.prototype.g=function(){return new oa(this.i,this.h)};function oa(h,_){Nt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(oa,Nt),t=oa.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,_i(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;oo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function oo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?tr(this):_i(this),this.readyState==3&&oo(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,tr(this))},t.Na=function(h){this.g&&(this.response=h,tr(this))},t.ga=function(){this.g&&tr(this)};function tr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,_i(h)}t.setRequestHeader=function(h,_){this.A.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function _i(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xn(h){let _="";return ye(h,function(S,R){_+=R,_+=":",_+=S,_+=`\r
`}),_}function la(h,_,S){e:{for(R in S){var R=!1;break e}R=!0}R||(S=Xn(S),typeof h=="string"?S!=null&&ms(S):st(h,_,S))}function ot(h){Nt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ot,Nt);var Yi=/^https?$/i,Ll=["POST","PUT"];t=ot.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,_,S,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rl.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){ua(this,X);return}if(h=S||"",S=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)S.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())S.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(S.keys()).find(X=>X.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ll,_,void 0)>=0)||R||G||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,fe]of S)this.g.setRequestHeader(X,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){ua(this,X)}};function ua(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Ul(h),ps(h)}function Ul(h){h.A||(h.A=!0,$t(h,"complete"),$t(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,$t(this,"complete"),$t(this,"abort"),ps(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ps(this,!0)),ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ca(this):this.Xa())},t.Xa=function(){ca(this)};function ca(h){if(h.h&&typeof l<"u"){if(h.v&&Ti(h)==4)setTimeout(h.Ca.bind(h),0);else if($t(h,"readystatechange"),Ti(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var R;if(R=X===0){let fe=String(h.D).match(Lc)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),R=!Yi.test(fe?fe.toLowerCase():"")}S=R}if(S)$t(h,"complete"),$t(h,"success");else{h.o=6;try{var G=Ti(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Ul(h)}}finally{ps(h)}}}}function ps(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,_||$t(h,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ti(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Ti(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Hd(_)}};function rn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function gs(h){const _={};h=(h.g&&Ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(D(h[R]))continue;var S=Pc(h[R]);const G=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const X=_[G]||[];_[G]=X,X.push(S)}Te(_,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function nr(h){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qi("baseRetryDelayMs",5e3,h),this.Za=Qi("retryDelaySeedMs",1e4,h),this.Ta=Qi("forwardChannelMaxRetries",2,h),this.va=Qi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Cl(h&&h.concurrentRequestLimit),this.Ba=new er,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=nr.prototype,t.ka=8,t.I=1,t.connect=function(h,_,S,R){Vt(0),this.W=h,this.H=_||{},S&&R!==void 0&&(this.H.OSID=S,this.H.OAID=R),this.F=this.X,this.J=Qc(this,null,this.W),Xi(this)};function zl(h){if(lo(h),h.I==3){var _=h.V++,S=kt(h.J);if(st(S,"SID",h.M),st(S,"RID",_),st(S,"TYPE","terminate"),ha(h,S),_=new gi(h,h.j,_),_.M=2,_.A=ra(kt(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!S&&c.Image&&(new Image().src=_.A,S=!0),S||(_.g=Xc(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Bi(_)}Yc(h)}function ir(h){h.g&&(Fl(h),h.g.cancel(),h.g=null)}function lo(h){ir(h),h.v&&(c.clearTimeout(h.v),h.v=null),co(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Xi(h){if(!Il(h.h)&&!h.m){h.m=!0;var _=h.Ea;Y||A(),ae||(Y(),ae=!0),C.add(_,h),h.D=0}}function uo(h,_){return qi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Li(p(h.Ea,h,_),Kc(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new gi(this,this.j,h);let X=this.o;if(this.U&&(X?(X=U(X),le(X,this.U)):X=this.U),this.u!==null||this.R||(G.J=X,X=null),this.S)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var R=this.i[S];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=Hc(this,G,_),S=kt(this.J),st(S,"RID",h),st(S,"CVER",22),this.G&&st(S,"X-HTTP-Session-Id",this.G),ha(this,S),X&&(this.R?_="headers="+ms(Xn(X))+"&"+_:this.u&&la(S,this.u,X)),Dl(this.h,G),this.Ra&&st(S,"TYPE","init"),this.S?(st(S,"$req",_),st(S,"SID","null"),G.U=!0,zi(G,S,null)):zi(G,S,_),this.I=2}}else this.I==3&&(h?Bl(this,h):this.i.length==0||Il(this.h)||Bl(this))};function Bl(h,_){var S;_?S=_.l:S=h.V++;const R=kt(h.J);st(R,"SID",h.M),st(R,"RID",S),st(R,"AID",h.K),ha(h,R),h.u&&h.o&&la(R,h.u,h.o),S=new gi(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Hc(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Dl(h.h,S),zi(S,R,_)}function ha(h,_){h.H&&ye(h.H,function(S,R){st(_,R,S)}),h.l&&ye({},function(S,R){st(_,R,S)})}function Hc(h,_,S){S=Math.min(h.i.length,S);const R=h.l?p(h.l.Ka,h.l,h):null;e:{var G=h.i;let Pe=-1;for(;;){const Rt=["count="+S];Pe==-1?S>0?(Pe=G[0].g,Rt.push("ofs="+Pe)):Pe=0:Rt.push("ofs="+Pe);let Je=!0;for(let yt=0;yt<S;yt++){var X=G[yt].g;const Wn=G[yt].map;if(X-=Pe,X<0)Pe=Math.max(0,G[yt].g-100),Je=!1;else try{X="req"+X+"_"||"";try{var fe=Wn instanceof Map?Wn:Object.entries(Wn);for(const[Ji,bi]of fe){let Ei=bi;f(bi)&&(Ei=Qs(bi)),Rt.push(X+Ji+"="+encodeURIComponent(Ei))}}catch(Ji){throw Rt.push(X+"type="+encodeURIComponent("_badmap")),Ji}}catch{R&&R(Wn)}}if(Je){fe=Rt.join("&");break e}}fe=void 0}return h=h.i.splice(0,S),_.G=h,fe}function qc(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;Y||A(),ae||(Y(),ae=!0),C.add(_,h),h.A=0}}function fa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Li(p(h.Da,h),Kc(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Li(p(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),ir(this),Gc(this))};function Fl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Gc(h){h.g=new gi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=kt(h.na);st(_,"RID","rpc"),st(_,"SID",h.M),st(_,"AID",h.K),st(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&st(_,"TO",h.ia),st(_,"TYPE","xmlhttp"),ha(h,_),h.u&&h.o&&la(_,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=ra(kt(_)),S.u=null,S.R=!0,to(S,h)}t.Va=function(){this.C!=null&&(this.C=null,ir(this),fa(this),Vt(19))};function co(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function $c(h,_){var S=null;if(h.g==_){co(h),Fl(h),h.g=null;var R=2}else if(Gi(h.h,_))S=_.G,Ml(h.h,_),R=1;else return;if(h.I!=0){if(_.o)if(R==1){S=_.u?_.u.length:0,_=Date.now()-_.F;var G=h.D;R=eo(),$t(R,new ji(R,S)),Xi(h)}else qc(h);else if(G=_.m,G==3||G==0&&_.X>0||!(R==1&&uo(h,_)||R==2&&fa(h)))switch(S&&S.length>0&&(_=h.h,_.i=_.i.concat(S)),G){case 1:Wi(h,5);break;case 4:Wi(h,10);break;case 3:Wi(h,6);break;default:Wi(h,2)}}}function Kc(h,_){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*_}function Wi(h,_){if(h.j.info("Error code "+_),_==2){var S=p(h.bb,h),R=h.Ua;const G=!R;R=new jn(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(R,"https"),ra(R),G?vi(R.toString(),S):jl(R.toString(),S)}else Vt(2);h.I=0,h.l&&h.l.pa(_),Yc(h),lo(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Yc(h){if(h.I=0,h.ja=[],h.l){const _=Nl(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ja,_),V(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Qc(h,_,S){var R=S instanceof jn?kt(S):new jn(S);if(R.g!="")_&&(R.g=_+"."+R.g),Xs(R,R.u);else{var G=c.location;R=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;const X=new jn(null);R&&Jt(X,R),_&&(X.g=_),G&&Xs(X,G),S&&(X.h=S),R=X}return S=h.G,_=h.wa,S&&_&&st(R,S,_),st(R,"VER",h.ka),ha(h,R),R}function Xc(h,_,S){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new ot(new Ki({ab:S})):new ot(h.ma),_.Fa(h.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}t=Wc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function sr(){}sr.prototype.g=function(h,_){return new bn(h,_)};function bn(h,_){Nt.call(this),this.g=new nr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!D(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ys(this)}T(bn,Nt),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){zl(this.g)},bn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=Qs(h),h=S);_.i.push(new Pt(_.Ya++,h)),_.I==3&&Xi(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,bn.Z.N.call(this)};function Jc(h){sn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}T(Jc,sn);function Zc(){Kn.call(this),this.status=1}T(Zc,Kn);function ys(h){this.g=h}T(ys,Wc),ys.prototype.ra=function(){$t(this.g,"a")},ys.prototype.qa=function(h){$t(this.g,new Jc(h))},ys.prototype.pa=function(h){$t(this.g,new Zc)},ys.prototype.oa=function(){$t(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,xA=function(){return new sr},SA=function(){return eo()},EA=At,ny={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,xf=ia,Al.COMPLETE="complete",bA=Al,Mc.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Mu=Mc,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,TA=ot}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const _E="@firebase/firestore",TE="4.9.3";class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let vl="12.7.0";const Fa=new _d("@firebase/firestore");function Fo(){return Fa.logLevel}function ge(t,...e){if(Fa.logLevel<=qe.DEBUG){const n=e.map(f0);Fa.debug(`Firestore (${vl}): ${t}`,...n)}}function Fs(t,...e){if(Fa.logLevel<=qe.ERROR){const n=e.map(f0);Fa.error(`Firestore (${vl}): ${t}`,...n)}}function al(t,...e){if(Fa.logLevel<=qe.WARN){const n=e.map(f0);Fa.warn(`Firestore (${vl}): ${t}`,...n)}}function f0(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Re(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,wA(t,s,n)}function wA(t,e,n){let s=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Fs(s),new Error(s)}function nt(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||wA(e,a,s)}function Oe(t,e){return t}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class AA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yn.UNAUTHENTICATED)))}shutdown(){}}class s3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class r3{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let s=this.i;const a=d=>this.i!==s?(s=this.i,n(d)):Promise.resolve();let l=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new jr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},f=d=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new jr)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new AA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class a3{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o3{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new a3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function u3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class d0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=u3(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<n&&(s+=e.charAt(a[l]%62))}return s}}function Ge(t,e){return t<e?-1:t>e?1:0}function iy(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),l=e.charAt(s);if(a!==l)return yg(a)===yg(l)?Ge(a,l):yg(a)?1:-1}return Ge(t.length,e.length)}const c3=55296,h3=57343;function yg(t){const e=t.charCodeAt(0);return e>=c3&&e<=h3}function ol(t,e,n){return t.length===e.length&&t.every(((s,a)=>n(s,e[a])))}const EE="__name__";class is{constructor(e,n,s){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return is.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof is?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const l=is.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Ge(e.length,n.length)}static compareSegments(e,n){const s=is.isNumericId(e),a=is.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?is.extractNumericId(e).compare(is.extractNumericId(n)):iy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}}class ft extends is{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new ft(n)}static emptyPath(){return new ft([])}}const f3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends is{construct(e,n,s){return new fn(e,n,s)}static isValidIdentifier(e){return f3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EE}static keyField(){return new fn([EE])}static fromServerFormat(e){const n=[];let s="",a=0;const l=()=>{if(s.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(l(),a++)}if(l(),c)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ft.fromString(e))}static fromName(e){return new xe(ft.fromString(e).popFirst(5))}static empty(){return new xe(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ft(e.slice()))}}function RA(t,e,n){if(!n)throw new pe(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d3(t,e,n,s){if(e===!0&&s===!0)throw new pe(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SE(t){if(!xe.isDocumentKey(t))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xE(t){if(xe.isDocumentKey(t))throw new pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Td(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Di(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Td(t);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qt(t,e){const n={typeString:t};return e&&(n.value=e),n}function vc(t,e){if(!CA(t))throw new pe(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const c=t[s];if(a&&typeof c!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${s}' field to equal '${l.value}'`;break}}if(n)throw new pe(se.INVALID_ARGUMENT,n);return!0}const wE=-62135596800,AE=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*AE);return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wE)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AE}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:qt("string",pt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new pt(0,0))}static max(){return new Me(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const tc=-1;function m3(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=Me.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new Fr(a,xe.empty(),e)}function p3(t){return new Fr(t.readTime,t.key,tc)}class Fr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Fr(Me.min(),xe.empty(),tc)}static max(){return new Fr(Me.max(),xe.empty(),tc)}}function g3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}const y3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _l(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==y3)throw t;ge("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,s)=>{n(e)}))}static reject(e){return new re(((n,s)=>{s(e)}))}static waitFor(e){return new re(((n,s)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&n()}),(d=>s(d)))})),c=!0,l===a&&n()}))}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next((a=>a?re.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,l)=>{s.push(n.call(this,a,l))})),this.waitFor(s)}static mapArray(e,n){return new re(((s,a)=>{const l=e.length,c=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;n(e[p]).next((y=>{c[p]=y,++f,f===l&&s(c)}),(y=>a(y)))}}))}static doWhile(e,n){return new re(((s,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):s()};l()}))}}function _3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(t){return t.name==="IndexedDbTransactionError"}class bd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bd.ce=-1;const m0=-1;function Ed(t){return t==null}function Hf(t){return t===0&&1/t==-1/0}function T3(t){return typeof t=="number"&&Number.isInteger(t)&&!Hf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const IA="";function b3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=RE(e)),e=E3(t.get(n),e);return RE(e)}function E3(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case IA:n+="";break;default:n+=l}}return n}function RE(t){return t+IA+""}function CE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class bt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,s,a,l){this.key=e,this.value=n,this.color=s??hn.RED,this.left=a??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,l){return new hn(e??this.key,n??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,s),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,s,a,l){return this}insert(e,n,s){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new Qt(fn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class MA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new MA("Invalid base64 string: "+l):l}})(e);return new mn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const S3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=S3.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}const NA="server_timestamp",VA="__type__",OA="__previous_value__",PA="__local_write_time__";function p0(t){return(t?.mapValue?.fields||{})[VA]?.stringValue===NA}function Sd(t){const e=t.mapValue.fields[OA];return p0(e)?Sd(e):e}function nc(t){const e=Hr(t.mapValue.fields[PA].timestampValue);return new pt(e.seconds,e.nanos)}class x3{constructor(e,n,s,a,l,c,f,d,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const qf="(default)";class ic{constructor(e,n){this.projectId=e,this.database=n||qf}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}const kA="__type__",w3="__max__",hf={mapValue:{}},jA="__vector__",Gf="value";function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?p0(t)?4:R3(t)?9007199254740991:A3(t)?10:11:Re(28295,{value:t})}function ds(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Hr(a.timestampValue),f=Hr(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return qr(a.bytesValue).isEqual(qr(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Mt(a.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(a.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Mt(a.integerValue)===Mt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Mt(a.doubleValue),f=Mt(l.doubleValue);return c===f?Hf(c)===Hf(f):isNaN(c)&&isNaN(f)}return!1})(t,e);case 9:return ol(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(CE(c)!==CE(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!ds(c[d],f[d])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function sc(t,e){return(t.values||[]).find((n=>ds(n,e)))!==void 0}function ll(t,e){if(t===e)return 0;const n=Gr(t),s=Gr(e);if(n!==s)return Ge(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Mt(l.integerValue||l.doubleValue),d=Mt(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(t,e);case 3:return DE(t.timestampValue,e.timestampValue);case 4:return DE(nc(t),nc(e));case 5:return iy(t.stringValue,e.stringValue);case 6:return(function(l,c){const f=qr(l),d=qr(c);return f.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),d=c.split("/");for(let p=0;p<f.length&&p<d.length;p++){const y=Ge(f[p],d[p]);if(y!==0)return y}return Ge(f.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Ge(Mt(l.latitude),Mt(c.latitude));return f!==0?f:Ge(Mt(l.longitude),Mt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ME(t.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},d=c.fields||{},p=f[Gf]?.arrayValue,y=d[Gf]?.arrayValue,T=Ge(p?.values?.length||0,y?.values?.length||0);return T!==0?T:ME(p,y)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===hf.mapValue&&c===hf.mapValue)return 0;if(l===hf.mapValue)return 1;if(c===hf.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=c.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let T=0;T<d.length&&T<y.length;++T){const E=iy(d[T],y[T]);if(E!==0)return E;const w=ll(f[d[T]],p[y[T]]);if(w!==0)return w}return Ge(d.length,y.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function DE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=Hr(t),s=Hr(e),a=Ge(n.seconds,s.seconds);return a!==0?a:Ge(n.nanos,s.nanos)}function ME(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const l=ll(n[a],s[a]);if(l)return l}return Ge(n.length,s.length)}function ul(t){return sy(t)}function sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Hr(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return qr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return xe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",a=!0;for(const l of n.values||[])a?a=!1:s+=",",s+=sy(l);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${sy(n.fields[c])}`;return a+"}"})(t.mapValue):Re(61005,{value:t})}function wf(t){switch(Gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sd(t);return e?16+wf(e):16;case 5:return 2*t.stringValue.length;case 6:return qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+wf(l)),0)})(t.arrayValue);case 10:case 11:return(function(s){let a=0;return Wr(s.fields,((l,c)=>{a+=l.length+wf(c)})),a})(t.mapValue);default:throw Re(13486,{value:t})}}function NE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ry(t){return!!t&&"integerValue"in t}function g0(t){return!!t&&"arrayValue"in t}function VE(t){return!!t&&"nullValue"in t}function OE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Af(t){return!!t&&"mapValue"in t}function A3(t){return(t?.mapValue?.fields||{})[kA]?.stringValue===jA}function Fu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Fu(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fu(t.arrayValue.values[n]);return e}return{...t}}function R3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===w3}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(n)}setAll(e){let n=fn.emptyPath(),s={},a=[];e.forEach(((c,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,s,a),s={},a=[],n=f.popLast()}c?s[f.lastSegment()]=Fu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,s,a)}delete(e){const n=this.field(e.popLast());Af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Af(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Wr(n,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new On(Fu(this.value))}}function LA(t){const e=[];return Wr(t.fields,((n,s)=>{const a=new fn([n]);if(Af(s)){const l=LA(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Gn(e)}class vn{constructor(e,n,s,a,l,c,f){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new vn(e,0,Me.min(),Me.min(),Me.min(),On.empty(),0)}static newFoundDocument(e,n,s,a){return new vn(e,1,n,Me.min(),s,a,0)}static newNoDocument(e,n){return new vn(e,2,n,Me.min(),Me.min(),On.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Me.min(),Me.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $f{constructor(e,n){this.position=e,this.inclusive=n}}function PE(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(c.referenceValue),n.key):s=ll(c,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function kE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ds(t.position[n],e.position[n]))return!1;return!0}class Kf{constructor(e,n="asc"){this.field=e,this.dir=n}}function C3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class UA{}class Ht extends UA{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new D3(e,n,s):n==="array-contains"?new V3(e,s):n==="in"?new O3(e,s):n==="not-in"?new P3(e,s):n==="array-contains-any"?new k3(e,s):new Ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new M3(e,s):new N3(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ll(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends UA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vi(e,n)}matches(e){return zA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zA(t){return t.op==="and"}function BA(t){return I3(t)&&zA(t)}function I3(t){for(const e of t.filters)if(e instanceof Vi)return!1;return!0}function ay(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(BA(t))return t.filters.map((e=>ay(e))).join(",");{const e=t.filters.map((n=>ay(n))).join(",");return`${t.op}(${e})`}}function FA(t,e){return t instanceof Ht?(function(s,a){return a instanceof Ht&&s.op===a.op&&s.field.isEqual(a.field)&&ds(s.value,a.value)})(t,e):t instanceof Vi?(function(s,a){return a instanceof Vi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,f)=>l&&FA(c,a.filters[f])),!0):!1})(t,e):void Re(19439)}function HA(t){return t instanceof Ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`})(t):t instanceof Vi?(function(n){return n.op.toString()+" {"+n.getFilters().map(HA).join(" ,")+"}"})(t):"Filter"}class D3 extends Ht{constructor(e,n,s){super(e,n,s),this.key=xe.fromName(s.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class M3 extends Ht{constructor(e,n){super(e,"in",n),this.keys=qA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class N3 extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=qA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function qA(t,e){return(e.arrayValue?.values||[]).map((n=>xe.fromName(n.referenceValue)))}class V3 extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return g0(n)&&sc(n.arrayValue,this.value)}}class O3 extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}}class P3 extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sc(this.value.arrayValue,n)}}class k3 extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!g0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>sc(this.value.arrayValue,s)))}}class j3{constructor(e,n=null,s=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function jE(t,e=null,n=[],s=[],a=null,l=null,c=null){return new j3(t,e,n,s,a,l,c)}function y0(t){const e=Oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>ay(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Ed(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>ul(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>ul(s))).join(",")),e.Te=n}return e.Te}function v0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kE(t.startAt,e.startAt)&&kE(t.endAt,e.endAt)}function oy(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class _c{constructor(e,n=null,s=[],a=[],l=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L3(t,e,n,s,a,l,c,f){return new _c(t,e,n,s,a,l,c,f)}function xd(t){return new _c(t)}function LE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GA(t){return t.collectionGroup!==null}function Hu(t){const e=Oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Qt(fn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Kf(l,s))})),n.has(fn.keyField().canonicalString())||e.Ie.push(new Kf(fn.keyField(),s))}return e.Ie}function as(t){const e=Oe(t);return e.Ee||(e.Ee=U3(e,Hu(t))),e.Ee}function U3(t,e){if(t.limitType==="F")return jE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Kf(a.field,l)}));const n=t.endAt?new $f(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new $f(t.startAt.position,t.startAt.inclusive):null;return jE(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function ly(t,e){const n=t.filters.concat([e]);return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uy(t,e,n){return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return v0(as(t),as(e))&&t.limitType===e.limitType}function $A(t){return`${y0(as(t))}|lt:${t.limitType}`}function Ho(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>HA(a))).join(", ")}]`),Ed(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>ul(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>ul(a))).join(",")),`Target(${s})`})(as(t))}; limitType=${t.limitType})`}function Ad(t,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):xe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(t,e)&&(function(s,a){for(const l of Hu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(s,a){return!(s.startAt&&!(function(c,f,d){const p=PE(c,f,d);return c.inclusive?p<=0:p<0})(s.startAt,Hu(s),a)||s.endAt&&!(function(c,f,d){const p=PE(c,f,d);return c.inclusive?p>=0:p>0})(s.endAt,Hu(s),a))})(t,e)}function z3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KA(t){return(e,n)=>{let s=!1;for(const a of Hu(t)){const l=B3(a,e,n);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function B3(t,e,n){const s=t.field.isKeyField()?xe.comparator(e.key,n.key):(function(l,c,f){const d=c.data.field(l),p=f.data.field(l);return d!==null&&p!==null?ll(d,p):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:t.dir})}}class Ja{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,((n,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}const F3=new bt(xe.comparator);function Hs(){return F3}const YA=new bt(xe.comparator);function Nu(...t){let e=YA;for(const n of t)e=e.insert(n.key,n);return e}function QA(t){let e=YA;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Pa(){return qu()}function XA(){return qu()}function qu(){return new Ja((t=>t.toString()),((t,e)=>t.isEqual(e)))}const H3=new bt(xe.comparator),q3=new Qt(xe.comparator);function $e(...t){let e=q3;for(const n of t)e=e.add(n);return e}const G3=new Qt(Ge);function $3(){return G3}function _0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(e)?"-0":e}}function WA(t){return{integerValue:""+t}}function K3(t,e){return T3(e)?WA(e):_0(t,e)}class Rd{constructor(){this._=void 0}}function Y3(t,e,n){return t instanceof Yf?(function(a,l){const c={fields:{[VA]:{stringValue:NA},[PA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&p0(l)&&(l=Sd(l)),l&&(c.fields[OA]=l),{mapValue:c}})(n,e):t instanceof rc?ZA(t,e):t instanceof ac?e2(t,e):(function(a,l){const c=JA(a,l),f=UE(c)+UE(a.Ae);return ry(c)&&ry(a.Ae)?WA(f):_0(a.serializer,f)})(t,e)}function Q3(t,e,n){return t instanceof rc?ZA(t,e):t instanceof ac?e2(t,e):n}function JA(t,e){return t instanceof Qf?(function(s){return ry(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Yf extends Rd{}class rc extends Rd{constructor(e){super(),this.elements=e}}function ZA(t,e){const n=t2(e);for(const s of t.elements)n.some((a=>ds(a,s)))||n.push(s);return{arrayValue:{values:n}}}class ac extends Rd{constructor(e){super(),this.elements=e}}function e2(t,e){let n=t2(e);for(const s of t.elements)n=n.filter((a=>!ds(a,s)));return{arrayValue:{values:n}}}class Qf extends Rd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function UE(t){return Mt(t.integerValue||t.doubleValue)}function t2(t){return g0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function X3(t,e){return t.field.isEqual(e.field)&&(function(s,a){return s instanceof rc&&a instanceof rc||s instanceof ac&&a instanceof ac?ol(s.elements,a.elements,ds):s instanceof Qf&&a instanceof Qf?ds(s.Ae,a.Ae):s instanceof Yf&&a instanceof Yf})(t.transform,e.transform)}class W3{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cd{}function n2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new T0(t.key,Mi.none()):new Tc(t.key,t.data,Mi.none());{const n=t.data,s=On.empty();let a=new Qt(fn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new Jr(t.key,s,new Gn(a.toArray()),Mi.none())}}function J3(t,e,n){t instanceof Tc?(function(a,l,c){const f=a.value.clone(),d=BE(a.fieldTransforms,l,c.transformResults);f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):t instanceof Jr?(function(a,l,c){if(!Rf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=BE(a.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(i2(a)),d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function Gu(t,e,n,s){return t instanceof Tc?(function(l,c,f,d){if(!Rf(l.precondition,c))return f;const p=l.value.clone(),y=FE(l.fieldTransforms,d,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(t,e,n,s):t instanceof Jr?(function(l,c,f,d){if(!Rf(l.precondition,c))return f;const p=FE(l.fieldTransforms,d,c),y=c.data;return y.setAll(i2(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(t,e,n,s):(function(l,c,f){return Rf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(t,e,n)}function Z3(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),l=JA(s.transform,a||null);l!=null&&(n===null&&(n=On.empty()),n.set(s.field,l))}return n||null}function zE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&ol(s,a,((l,c)=>X3(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends Cd{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Jr extends Cd{constructor(e,n,s,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function i2(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function BE(t,e,n){const s=new Map;nt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,f=e.data.field(l.field);s.set(l.field,Q3(c,f,n[a]))}return s}function FE(t,e,n){const s=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);s.set(a.field,Y3(l,c,e))}return s}class T0 extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ej extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tj{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&J3(l,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Gu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Gu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=XA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=n.has(a.key)?null:f;const d=n2(c,f);d!==null&&s.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(Me.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),$e())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,((n,s)=>zE(n,s)))&&ol(this.baseMutations,e.baseMutations,((n,s)=>zE(n,s)))}}class b0{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return H3})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new b0(e,n,s,a)}}class nj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ij{constructor(e,n){this.count=e,this.unchangedNames=n}}var Bt,Ye;function sj(t){switch(t){case se.OK:return Re(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function s2(t){if(t===void 0)return Fs("GRPC error has no .code"),se.UNKNOWN;switch(t){case Bt.OK:return se.OK;case Bt.CANCELLED:return se.CANCELLED;case Bt.UNKNOWN:return se.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return se.INTERNAL;case Bt.UNAVAILABLE:return se.UNAVAILABLE;case Bt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Bt.NOT_FOUND:return se.NOT_FOUND;case Bt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Bt.ABORTED:return se.ABORTED;case Bt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Bt.DATA_LOSS:return se.DATA_LOSS;default:return Re(39323,{code:t})}}(Ye=Bt||(Bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function rj(){return new TextEncoder}const aj=new kr([4294967295,4294967295],0);function HE(t){const e=rj().encode(t),n=new _A;return n.update(e),new Uint8Array(n.digest())}function qE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new kr([n,s],0),new kr([a,l],0)]}class E0{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Vu(`Invalid padding: ${n}`);if(s<0)throw new Vu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=kr.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(kr.fromNumber(s)));return a.compare(aj)===1&&(a=new kr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=HE(e),[s,a]=qE(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new E0(l,a,n);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const n=HE(e),[s,a]=qE(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Id{constructor(e,n,s,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Id(Me.min(),a,new bt(Ge),Hs(),$e())}}class bc{constructor(e,n,s,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bc(s,n,$e(),$e(),$e())}}class Cf{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class r2{constructor(e,n){this.targetId=e,this.Ce=n}}class a2{constructor(e,n,s=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class GE{constructor(){this.ve=0,this.Fe=$E(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),n=$e(),s=$e();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Re(38017,{changeType:l})}})),new bc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=$E()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hs(),this.Je=ff(),this.He=ff(),this.Ye=new bt(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(oy(l))if(s===0){const c=new xe(l.path);this.et(n,c,vn.newNoDocument(c,Me.min()))}else nt(s===1,20013,{expectedCount:s});else{const c=this._t(n);if(c!==s){const f=this.ut(e),d=f?this.ct(f,e,c):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=n;let c,f;try{c=qr(s).toUint8Array()}catch(d){if(d instanceof MA)return al("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new E0(c,a,l)}catch(d){return al(d instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&oy(f.target)){const d=new xe(f.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,vn.newNoDocument(d,e))}l.Be&&(n.set(c,l.ke()),l.qe())}}));let s=$e();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Id(e,n,this.Ye,this.je,s);return this.je=Hs(),this.Je=ff(),this.He=ff(),this.Ye=new bt(Ge),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new GE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qt(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qt(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ff(){return new bt(xe.comparator)}function $E(){return new bt(xe.comparator)}const lj={asc:"ASCENDING",desc:"DESCENDING"},uj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cj={and:"AND",or:"OR"};class hj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cy(t,e){return t.useProto3Json||Ed(e)?e:{value:e}}function Xf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fj(t,e){return Xf(t,e.toTimestamp())}function os(t){return nt(!!t,49232),Me.fromTimestamp((function(n){const s=Hr(n);return new pt(s.seconds,s.nanos)})(t))}function S0(t,e){return hy(t,e).canonicalString()}function hy(t,e){const n=(function(a){return new ft(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function l2(t){const e=ft.fromString(t);return nt(d2(e),10190,{key:e.toString()}),e}function fy(t,e){return S0(t.databaseId,e.path)}function vg(t,e){const n=l2(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(c2(n))}function u2(t,e){return S0(t.databaseId,e)}function dj(t){const e=l2(t);return e.length===4?ft.emptyPath():c2(e)}function dy(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function c2(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KE(t,e,n){return{name:fy(t,e),fields:n.value.mapValue.fields}}function mj(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(nt(y===void 0||typeof y=="string",58123),mn.fromBase64String(y||"")):(nt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),mn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?se.UNKNOWN:s2(p.code);return new pe(y,p.message||"")})(c);n=new a2(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=vg(t,s.document.name),l=os(s.document.updateTime),c=s.document.createTime?os(s.document.createTime):Me.min(),f=new On({mapValue:{fields:s.document.fields}}),d=vn.newFoundDocument(a,l,c,f),p=s.targetIds||[],y=s.removedTargetIds||[];n=new Cf(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=vg(t,s.document),l=s.readTime?os(s.readTime):Me.min(),c=vn.newNoDocument(a,l),f=s.removedTargetIds||[];n=new Cf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=vg(t,s.document),l=s.removedTargetIds||[];n=new Cf([],l,a,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new ij(a,l),f=s.targetId;n=new r2(f,c)}}return n}function pj(t,e){let n;if(e instanceof Tc)n={update:KE(t,e.key,e.value)};else if(e instanceof T0)n={delete:fy(t,e.key)};else if(e instanceof Jr)n={update:KE(t,e.key,e.data),updateMask:xj(e.fieldMask)};else{if(!(e instanceof ej))return Re(16599,{Vt:e.type});n={verify:fy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof Yf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof rc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ac)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qf)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Re(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:fj(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(t,e.precondition)),n}function gj(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?os(a.updateTime):os(l);return c.isEqual(Me.min())&&(c=os(l)),new W3(c,a.transformResults||[])})(n,e)))):[]}function yj(t,e){return{documents:[u2(t,e.path)]}}function vj(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=u2(t,a);const l=(function(p){if(p.length!==0)return f2(Vi.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(E){return{field:qo(E.field),direction:bj(E.dir)}})(y)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const f=cy(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:a}}function _j(t){let e=dj(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){nt(s===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=(function(T){const E=h2(T);return E instanceof Vi&&BA(E)?E.getFilters():[E]})(n.where));let c=[];n.orderBy&&(c=(function(T){return T.map((E=>(function(V){return new Kf(Go(V.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(E)))})(n.orderBy));let f=null;n.limit&&(f=(function(T){let E;return E=typeof T=="object"?T.value:T,Ed(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(T){const E=!!T.before,w=T.values||[];return new $f(w,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const E=!T.before,w=T.values||[];return new $f(w,E)})(n.endAt)),L3(e,a,c,l,f,"F",d,p)}function Tj(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h2(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Go(n.unaryFilter.field);return Ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Go(n.unaryFilter.field);return Ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Go(n.unaryFilter.field);return Ht.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Go(n.unaryFilter.field);return Ht.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ht.create(Go(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Vi.create(n.compositeFilter.filters.map((s=>h2(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function bj(t){return lj[t]}function Ej(t){return uj[t]}function Sj(t){return cj[t]}function qo(t){return{fieldPath:t.canonicalString()}}function Go(t){return fn.fromServerFormat(t.fieldPath)}function f2(t){return t instanceof Ht?(function(n){if(n.op==="=="){if(OE(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(VE(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OE(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(VE(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:Ej(n.op),value:n.value}}})(t):t instanceof Vi?(function(n){const s=n.getFilters().map((a=>f2(a)));return s.length===1?s[0]:{compositeFilter:{op:Sj(n.op),filters:s}}})(t):Re(54877,{filter:t})}function xj(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function d2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Vr{constructor(e,n,s,a,l=Me.min(),c=Me.min(),f=mn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wj{constructor(e){this.yt=e}}function Aj(t){const e=_j({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uy(e,e.limit,"L"):e}class Rj{constructor(){this.Cn=new Cj}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Fr.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class Cj{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Qt(ft.comparator),l=!a.has(s);return this.index[n]=a.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Qt(ft.comparator)).toArray()}}const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m2=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(m2,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new cl(0)}static cr(){return new cl(-1)}}const QE="LruGarbageCollector",Ij=1048576;function XE([t,e],[n,s]){const a=Ge(t,n);return a===0?Ge(e,s):a}class Dj{constructor(e){this.Ir=e,this.buffer=new Qt(XE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();XE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mj{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(QE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?ge(QE,"Ignoring IndexedDB error during garbage collection: ",n):await _l(n)}await this.Vr(3e5)}))}}class Nj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(bd.ce);const s=new Dj(n);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(YE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,l,c,f,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,n)))).next((T=>(l=T,d=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Fo()<=qe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${T} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function Vj(t,e){return new Nj(t,e)}class Oj{constructor(){this.changes=new Ja((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class kj{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&Gu(s.mutation,a,Gn.empty(),pt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=$e()){const a=Pa();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((l=>{let c=Nu();return l.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const s=Pa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,$e())))}populateOverlays(e,n,s){const a=[];return s.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{n.set(c,f)}))}))}computeViews(e,n,s,a){let l=Hs();const c=qu(),f=(function(){return qu()})();return n.forEach(((d,p)=>{const y=s.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Jr)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Gu(y.mutation,p,y.mutation.getFieldMask(),pt.now())):c.set(p.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((p,y)=>c.set(p,y))),n.forEach(((p,y)=>f.set(p,new Pj(y,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,n){const s=qu();let a=new bt(((c,f)=>c-f)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const f of c)f.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let y=s.get(d)||Gn.empty();y=f.applyToLocalView(p,y),s.set(d,y);const T=(a.get(f.batchId)||$e()).add(d);a=a.insert(f.batchId,T)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,y=d.value,T=XA();y.forEach((E=>{if(!l.has(E)){const w=n2(n.get(E),s.get(E));w!==null&&T.set(E,w),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-l.size):re.resolve(Pa());let f=tc,d=l;return c.next((p=>re.forEach(p,((y,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(y)?re.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{d=d.insert(y,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,d,p,$e()))).next((y=>({batchId:f,changes:QA(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next((s=>{let a=Nu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const l=n.collectionGroup;let c=Nu();return this.indexManager.getCollectionParents(e,l).next((f=>re.forEach(f,(d=>{const p=(function(T,E){return new _c(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next((y=>{y.forEach(((T,E)=>{c=c.insert(T,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,a)))).next((c=>{l.forEach(((d,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,vn.newInvalidDocument(y)))}));let f=Nu();return c.forEach(((d,p)=>{const y=l.get(d);y!==void 0&&Gu(y.mutation,p,Gn.empty(),pt.now()),Ad(n,p)&&(f=f.insert(d,p))})),f}))}}class jj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:os(a.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:Aj(a.bundledQuery),readTime:os(a.readTime)}})(n)),re.resolve()}}class Lj{constructor(){this.overlays=new bt(xe.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Pa();return re.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,l)=>{this.St(e,n,l)})),re.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const a=Pa(),l=n.length+1,c=new xe(n.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>s&&a.set(d.getKey(),d)}return re.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let l=new bt(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let y=l.get(p.largestBatchId);y===null&&(y=Pa(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=Pa(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return re.resolve(f)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new nj(n,s));let l=this.qr.get(n);l===void 0&&(l=$e(),this.qr.set(n,l)),this.qr.set(n,l.add(s.key))}}class Uj{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class x0{constructor(){this.Qr=new Qt(en.$r),this.Ur=new Qt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new en(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new en(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new xe(new ft([])),s=new en(n,e),a=new en(n,e+1),l=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new xe(new ft([])),s=new en(n,e),a=new en(n,e+1);let l=$e();return this.Ur.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new en(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class en{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return xe.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||xe.comparator(e.key,n.key)}}class zj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(en.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new tj(l,n,s,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new en(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?m0:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new en(n,0),a=new en(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Qt(Ge);return n.forEach((a=>{const l=new en(a,0),c=new en(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const c=new en(new xe(l),0);let f=new Qt(Ge);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(f=f.add(d.Yr)),!0)}),c),re.resolve(this.ti(f))}ti(e){const n=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,(a=>{const l=new en(a.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new en(n,0),a=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Bj{constructor(e){this.ri=e,this.docs=(function(){return new bt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let s=Hs();return n.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():vn.newInvalidDocument(a))})),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let l=Hs();const c=n.path,f=new xe(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||g3(p3(y),s)<=0||(a.has(y.key)||Ad(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,n,s,a){Re(9500)}ii(e,n){return re.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new Fj(this)}getSize(e){return re.resolve(this.size)}}class Fj extends Oj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Hj{constructor(e){this.persistence=e,this.si=new Ja((n=>y0(n)),v0),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new x0,this.targetCount=0,this.ai=cl.ur()}forEachTarget(e,n){return this.si.forEach(((s,a)=>n(a))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new cl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=n&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),re.waitFor(l).next((()=>a))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}class p2{constructor(e,n){this.ui={},this.overlays={},this.ci=new bd(0),this.li=!1,this.li=!0,this.hi=new Uj,this.referenceDelegate=e(this),this.Pi=new Hj(this),this.indexManager=new Rj,this.remoteDocumentCache=(function(a){return new Bj(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new wj(n),this.Ii=new jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new zj(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const a=new qj(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class qj extends v3{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Ri=new x0,this.Vi=null}static mi(e){return new w0(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const a=xe.fromPath(s);return this.gi(e,a).next((l=>{l||n.removeEntry(a,Me.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wf{constructor(e,n){this.persistence=e,this.pi=new Ja((s=>b3(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=Vj(this,n)}static mi(e,n){return new Wf(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return re.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?re.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((f=>{f||(s++,l.removeEntry(c,Me.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wf(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return re.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class A0{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=$e(),a=$e();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new A0(e,n.fromCache,s,a)}}class Gj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $j{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Pk()?8:_3(_n())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const l={result:null};return this.ys(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,n,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Gj;return this.Ss(e,n,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,n,c,f.size)}))})).next((()=>l.result))}bs(e,n,s,a){return s.documentReadCount<this.fs?(Fo()<=qe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Fo()<=qe.DEBUG&&ge("QueryEngine","Query:",Ho(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Fo()<=qe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(n))):re.resolve())}ys(e,n){if(LE(n))return re.resolve(null);let s=as(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=uy(n,null,"F"),s=as(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=$e(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((d=>{const p=this.Ds(n,f);return this.Cs(n,p,c,d.readTime)?this.ys(e,uy(n,null,"F")):this.vs(e,p,n,d)}))))})))))}ws(e,n,s,a){return LE(n)||a.isEqual(Me.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(n,l);return this.Cs(n,c,s,a)?re.resolve(null):(Fo()<=qe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ho(n)),this.vs(e,c,n,m3(a,tc)).next((f=>f)))}))}Ds(e,n){let s=new Qt(KA(e));return n.forEach(((a,l)=>{Ad(e,l)&&(s=s.add(l))})),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,s){return Fo()<=qe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ho(n)),this.ps.getDocumentsMatchingQuery(e,n,Fr.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const R0="LocalStore",Kj=3e8;class Yj{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new bt(Ge),this.xs=new Ja((l=>y0(l)),v0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Qj(t,e,n,s){return new Yj(t,e,n,s)}async function g2(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let d=$e();for(const p of a){c.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(s,d).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function Xj(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,d,p,y){const T=p.batch,E=T.keys();let w=re.resolve();return E.forEach((V=>{w=w.next((()=>y.getEntry(d,V))).next((O=>{const I=p.docVersions.get(V);nt(I!==null,48541),O.version.compareTo(I)<0&&(T.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),y.addEntry(O)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(d,T)))})(n,s,e,l).next((()=>l.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let d=$e();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function y2(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Wj(t,e){const n=Oe(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const f=[];e.targetChanges.forEach(((y,T)=>{const E=a.get(T);if(!E)return;f.push(n.Pi.removeMatchingKeys(l,y.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(l,y.addedDocuments,T))));let w=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(mn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,s)),a=a.insert(T,w),(function(O,I,P){return O.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Kj?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(E,w,y)&&f.push(n.Pi.updateTargetData(l,w))}));let d=Hs(),p=$e();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(Jj(l,c,e.documentUpdates).next((y=>{d=y.ks,p=y.qs}))),!s.isEqual(Me.min())){const y=n.Pi.getLastRemoteSnapshotVersion(l).next((T=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(y)}return re.waitFor(f).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(n.Ms=a,l)))}function Jj(t,e,n){let s=$e(),a=$e();return n.forEach((l=>s=s.add(l))),e.getEntries(t,s).next((l=>{let c=Hs();return n.forEach(((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),d.isNoDocument()&&d.version.isEqual(Me.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):ge(R0,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)})),{ks:c,qs:a}}))}function Zj(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=m0),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function e6(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,e).next((l=>l?(a=l,re.resolve(a)):n.Pi.allocateTargetId(s).next((c=>(a=new Vr(e,c,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function my(t,e,n){const s=Oe(t),a=s.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Tl(c))throw c;ge(R0,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function WE(t,e,n){const s=Oe(t);let a=Me.min(),l=$e();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,p,y){const T=Oe(d),E=T.xs.get(y);return E!==void 0?re.resolve(T.Ms.get(E)):T.Pi.getTargetData(p,y)})(s,c,as(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((d=>{l=d}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,n?a:Me.min(),n?l:$e()))).next((f=>(t6(s,z3(e),f),{documents:f,Qs:l})))))}function t6(t,e,n){let s=t.Os.get(e)||Me.min();n.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),t.Os.set(e,s)}class JE{constructor(){this.activeTargetIds=$3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n6{constructor(){this.Mo=new JE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class i6{Oo(e){}shutdown(){}}const ZE="ConnectivityMonitor";class eS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(ZE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(ZE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let df=null;function py(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}const _g="RestConnection",s6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===qf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,l){const c=py(),f=this.zo(e,n.toUriEncodedString());ge(_g,`Sending RPC '${e}' ${c}:`,f,s);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,l);const{host:p}=new URL(f),y=gl(p);return this.Jo(e,f,d,s,y).then((T=>(ge(_g,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw al(_g,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",s),T}))}Ho(e,n,s,a,l,c){return this.Go(e,n,s,a,l)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const s=s6[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class a6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gn="WebChannelConnection";class o6 extends r6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,l){const c=py();return new Promise(((f,d)=>{const p=new TA;p.setWithCredentials(!0),p.listenOnce(bA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case xf.NO_ERROR:const T=p.getResponseJson();ge(gn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case xf.TIMEOUT:ge(gn,`RPC '${e}' ${c} timed out`),d(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const E=p.getStatus();if(ge(gn,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const V=w?.error;if(V&&V.status&&V.message){const O=(function(P){const z=P.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(z)>=0?z:se.UNKNOWN})(V.status);d(new pe(O,V.message))}else d(new pe(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new pe(se.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(gn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ge(gn,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,s,15)}))}T_(e,n,s){const a=py(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=xA(),f=SA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,s),d.encodeInitMessageHeaders=!0;const y=l.join("");ge(gn,`Creating RPC '${e}' stream ${a}: ${y}`,d);const T=c.createWebChannel(y,d);this.I_(T);let E=!1,w=!1;const V=new a6({Yo:I=>{w?ge(gn,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(E||(ge(gn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),E=!0),ge(gn,`RPC '${e}' stream ${a} sending:`,I),T.send(I))},Zo:()=>T.close()}),O=(I,P,z)=>{I.listen(P,(F=>{try{z(F)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return O(T,Mu.EventType.OPEN,(()=>{w||(ge(gn,`RPC '${e}' stream ${a} transport opened.`),V.o_())})),O(T,Mu.EventType.CLOSE,(()=>{w||(w=!0,ge(gn,`RPC '${e}' stream ${a} transport closed`),V.a_(),this.E_(T))})),O(T,Mu.EventType.ERROR,(I=>{w||(w=!0,al(gn,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),V.a_(new pe(se.UNAVAILABLE,"The operation could not be completed")))})),O(T,Mu.EventType.MESSAGE,(I=>{if(!w){const P=I.data[0];nt(!!P,16349);const z=P,F=z?.error||z[0]?.error;if(F){ge(gn,`RPC '${e}' stream ${a} received error:`,F);const ue=F.status;let Y=(function(A){const N=Bt[A];if(N!==void 0)return s2(N)})(ue),ae=F.message;Y===void 0&&(Y=se.INTERNAL,ae="Unknown error status: "+ue+" with message "+F.message),w=!0,V.a_(new pe(Y,ae)),T.close()}else ge(gn,`RPC '${e}' stream ${a} received:`,P),V.u_(P)}})),O(f,EA.STAT_EVENT,(I=>{I.stat===ny.PROXY?ge(gn,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===ny.NOPROXY&&ge(gn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Tg(){return typeof document<"u"?document:null}function Dd(t){return new hj(t,!0)}class v2{constructor(e,n,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const tS="PersistentStream";class _2{constructor(e,n,s,a,l,c,f,d){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new v2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Fs(n.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{e((()=>{const a=new pe(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(tS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(tS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l6 extends _2{constructor(e,n,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mj(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Me.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Me.min():c.readTime?os(c.readTime):Me.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=dy(this.serializer),n.addTarget=(function(l,c){let f;const d=c.target;if(f=oy(d)?{documents:yj(l,d)}:{query:vj(l,d).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=o2(l,c.resumeToken);const p=cy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Me.min())>0){f.readTime=Xf(l,c.snapshotVersion.toTimestamp());const p=cy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const s=Tj(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=dy(this.serializer),n.removeTarget=e,this.q_(n)}}class u6 extends _2{constructor(e,n,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=gj(e.writeResults,e.commitTime),s=os(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=dy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>pj(this.serializer,s)))};this.q_(n)}}class c6{}class h6 extends c6{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,hy(n,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(se.UNKNOWN,l.toString())}))}Ho(e,n,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,hy(n,s),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class f6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fs(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ha="RemoteStore";class d6{constructor(e,n,s,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Za(this)&&(ge(Ha,"Restarting streams for network reachability change."),await(async function(d){const p=Oe(d);p.Ea.add(4),await Ec(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Md(p)})(this))}))})),this.Ra=new f6(s,a)}}async function Md(t){if(Za(t))for(const e of t.da)await e(!0)}async function Ec(t){for(const e of t.da)await e(!1)}function T2(t,e){const n=Oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),M0(n)?D0(n):bl(n).O_()&&I0(n,e))}function C0(t,e){const n=Oe(t),s=bl(n);n.Ia.delete(e),s.O_()&&b2(n,e),n.Ia.size===0&&(s.O_()?s.L_():Za(n)&&n.Ra.set("Unknown"))}function I0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bl(t).Y_(e)}function b2(t,e){t.Va.Ue(e),bl(t).Z_(e)}function D0(t){t.Va=new oj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bl(t).start(),t.Ra.ua()}function M0(t){return Za(t)&&!bl(t).x_()&&t.Ia.size>0}function Za(t){return Oe(t).Ea.size===0}function E2(t){t.Va=void 0}async function m6(t){t.Ra.set("Online")}async function p6(t){t.Ia.forEach(((e,n)=>{I0(t,e)}))}async function g6(t,e){E2(t),M0(t)?(t.Ra.ha(e),D0(t)):t.Ra.set("Unknown")}async function y6(t,e,n){if(t.Ra.set("Online"),e instanceof a2&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(t,e)}catch(s){ge(Ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Jf(t,s)}else if(e instanceof Cf?t.Va.Ze(e):e instanceof r2?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const s=await y2(t.localStore);n.compareTo(s)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,p)=>{const y=l.Ia.get(d);if(!y)return;l.Ia.set(d,y.withResumeToken(mn.EMPTY_BYTE_STRING,y.snapshotVersion)),b2(l,d);const T=new Vr(y.target,d,p,y.sequenceNumber);I0(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(s){ge(Ha,"Failed to raise snapshot:",s),await Jf(t,s)}}async function Jf(t,e,n){if(!Tl(e))throw e;t.Ea.add(1),await Ec(t),t.Ra.set("Offline"),n||(n=()=>y2(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ge(Ha,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Md(t)}))}function S2(t,e){return e().catch((n=>Jf(t,n,e)))}async function Nd(t){const e=Oe(t),n=$r(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:m0;for(;v6(e);)try{const a=await Zj(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,_6(e,a)}catch(a){await Jf(e,a)}x2(e)&&w2(e)}function v6(t){return Za(t)&&t.Ta.length<10}function _6(t,e){t.Ta.push(e);const n=$r(t);n.O_()&&n.X_&&n.ea(e.mutations)}function x2(t){return Za(t)&&!$r(t).x_()&&t.Ta.length>0}function w2(t){$r(t).start()}async function T6(t){$r(t).ra()}async function b6(t){const e=$r(t);for(const n of t.Ta)e.ea(n.mutations)}async function E6(t,e,n){const s=t.Ta.shift(),a=b0.from(s,e,n);await S2(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Nd(t)}async function S6(t,e){e&&$r(t).X_&&await(async function(s,a){if((function(c){return sj(c)&&c!==se.ABORTED})(a.code)){const l=s.Ta.shift();$r(s).B_(),await S2(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Nd(s)}})(t,e),x2(t)&&w2(t)}async function nS(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),ge(Ha,"RemoteStore received new credentials");const s=Za(n);n.Ea.add(3),await Ec(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Md(n)}async function x6(t,e){const n=Oe(t);e?(n.Ea.delete(2),await Md(n)):e||(n.Ea.add(2),await Ec(n),n.Ra.set("Unknown"))}function bl(t){return t.ma||(t.ma=(function(n,s,a){const l=Oe(n);return l.sa(),new l6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:m6.bind(null,t),t_:p6.bind(null,t),r_:g6.bind(null,t),H_:y6.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),M0(t)?D0(t):t.Ra.set("Unknown")):(await t.ma.stop(),E2(t))}))),t.ma}function $r(t){return t.fa||(t.fa=(function(n,s,a){const l=Oe(n);return l.sa(),new u6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:T6.bind(null,t),r_:S6.bind(null,t),ta:b6.bind(null,t),na:E6.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Nd(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(Ha,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class N0{constructor(e,n,s,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,l){const c=Date.now()+s,f=new N0(e,n,c,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function V0(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),Tl(t))return new pe(se.UNAVAILABLE,`${e}: ${t}`);throw t}class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||xe.comparator(n.key,s.key):(n,s)=>xe.comparator(n.key,s.key),this.keyedMap=Nu(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class iS{constructor(){this.ga=new bt(xe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class hl{constructor(e,n,s,a,l,c,f,d,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,a,l){const c=[];return n.forEach((f=>{c.push({type:0,doc:f})})),new hl(e,n,Zo.emptySet(n),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}class w6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class A6{constructor(){this.queries=sS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Oe(n),l=a.queries;a.queries=sS(),l.forEach(((c,f)=>{for(const d of f.Sa)d.onError(s)}))})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function sS(){return new Ja((t=>$A(t)),wd)}async function A2(t,e){const n=Oe(t);let s=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new w6,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const f=V0(c,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(f)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&O0(n)}async function R2(t,e){const n=Oe(t),s=e.query;let a=3;const l=n.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function R6(t,e){const n=Oe(t);let s=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(s=!0);c.wa=a}}s&&O0(n)}function C6(t,e,n){const s=Oe(t),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);s.queries.delete(e)}function O0(t){t.Ca.forEach((e=>{e.next()}))}var gy,rS;(rS=gy||(gy={})).Ma="default",rS.Cache="cache";class C2{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new hl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gy.Cache}}class I2{constructor(e){this.key=e}}class D2{constructor(e){this.key=e}}class I6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=KA(e),this.tu=new Zo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new iS,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,f=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,T)=>{const E=a.get(y),w=Ad(this.query,T)?T:null,V=!!E&&this.mutatedKeys.has(E.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let I=!1;E&&w?E.data.isEqual(w.data)?V!==O&&(s.track({type:3,doc:w}),I=!0):this.su(E,w)||(s.track({type:2,doc:w}),I=!0,(d&&this.eu(w,d)>0||p&&this.eu(w,p)<0)&&(f=!0)):!E&&w?(s.track({type:0,doc:w}),I=!0):E&&!w&&(s.track({type:1,doc:E}),I=!0,(d||p)&&(f=!0)),I&&(w?(c=c.add(w),l=O?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,T)=>(function(w,V){const O=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:I})}};return O(w)-O(V)})(y.type,T.type)||this.eu(y.doc,T.doc))),this.ou(s),a=a??!1;const f=n&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,p=d!==this.Za;return this.Za=d,c.length!==0||p?{snapshot:new hl(this.query,e.tu,l,c,e.mutatedKeys,d===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new D2(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new I2(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=$e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const P0="SyncEngine";class D6{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class M6{constructor(e){this.key=e,this.hu=!1}}class N6{constructor(e,n,s,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ja((f=>$A(f)),wd),this.Iu=new Map,this.Eu=new Set,this.du=new bt(xe.comparator),this.Au=new Map,this.Ru=new x0,this.Vu={},this.mu=new Map,this.fu=cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V6(t,e,n=!0){const s=k2(t);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await M2(s,e,n,!0),a}async function O6(t,e){const n=k2(t);await M2(n,e,!0,!1)}async function M2(t,e,n,s){const a=await e6(t.localStore,as(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let f;return s&&(f=await P6(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&T2(t.remoteStore,a),f}async function P6(t,e,n,s,a){t.pu=(T,E,w)=>(async function(O,I,P,z){let F=I.view.ru(P);F.Cs&&(F=await WE(O.localStore,I.query,!1).then((({documents:C})=>I.view.ru(C,F))));const ue=z&&z.targetChanges.get(I.targetId),Y=z&&z.targetMismatches.get(I.targetId)!=null,ae=I.view.applyChanges(F,O.isPrimaryClient,ue,Y);return oS(O,I.targetId,ae.au),ae.snapshot})(t,T,E,w);const l=await WE(t.localStore,e,!0),c=new I6(e,l.Qs),f=c.ru(l.documents),d=bc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),p=c.applyChanges(f,t.isPrimaryClient,d);oS(t,n,p.au);const y=new D6(e,n,c);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function k6(t,e,n){const s=Oe(t),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((c=>!wd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await my(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&C0(s.remoteStore,a.targetId),yy(s,a.targetId)})).catch(_l)):(yy(s,a.targetId),await my(s.localStore,a.targetId,!0))}async function j6(t,e){const n=Oe(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),C0(n.remoteStore,s.targetId))}async function L6(t,e,n){const s=G6(t);try{const a=await(function(c,f){const d=Oe(c),p=pt.now(),y=f.reduce(((w,V)=>w.add(V.key)),$e());let T,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=Hs(),O=$e();return d.Ns.getEntries(w,y).next((I=>{V=I,V.forEach(((P,z)=>{z.isValidDocument()||(O=O.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,V))).next((I=>{T=I;const P=[];for(const z of f){const F=Z3(z,T.get(z.key).overlayedDocument);F!=null&&P.push(new Jr(z.key,F,LA(F.value.mapValue),Mi.exists(!0)))}return d.mutationQueue.addMutationBatch(w,p,P,f)})).next((I=>{E=I;const P=I.applyToLocalDocumentSet(T,O);return d.documentOverlayCache.saveOverlays(w,I.batchId,P)}))})).then((()=>({batchId:E.batchId,changes:QA(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,f,d){let p=c.Vu[c.currentUser.toKey()];p||(p=new bt(Ge)),p=p.insert(f,d),c.Vu[c.currentUser.toKey()]=p})(s,a.batchId,n),await Sc(s,a.changes),await Nd(s.remoteStore)}catch(a){const l=V0(a,"Failed to persist write");n.reject(l)}}async function N2(t,e){const n=Oe(t);try{const s=await Wj(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Au.get(l);c&&(nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?nt(c.hu,14607):a.removedDocuments.size>0&&(nt(c.hu,42227),c.hu=!1))})),await Sc(n,s,e)}catch(s){await _l(s)}}function aS(t,e,n){const s=Oe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const d=Oe(c);d.onlineState=f;let p=!1;d.queries.forEach(((y,T)=>{for(const E of T.Sa)E.va(f)&&(p=!0)})),p&&O0(d)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function U6(t,e,n){const s=Oe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new bt(xe.comparator);c=c.insert(l,vn.newNoDocument(l,Me.min()));const f=$e().add(l),d=new Id(Me.min(),new Map,new bt(Ge),c,f);await N2(s,d),s.du=s.du.remove(l),s.Au.delete(e),k0(s)}else await my(s.localStore,e,!1).then((()=>yy(s,e,n))).catch(_l)}async function z6(t,e){const n=Oe(t),s=e.batch.batchId;try{const a=await Xj(n.localStore,e);O2(n,s,null),V2(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Sc(n,a)}catch(a){await _l(a)}}async function B6(t,e,n){const s=Oe(t);try{const a=await(function(c,f){const d=Oe(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,f).next((T=>(nt(T!==null,37113),y=T.keys(),d.mutationQueue.removeMutationBatch(p,T)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(s.localStore,e);O2(s,e,n),V2(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Sc(s,a)}catch(a){await _l(a)}}function V2(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function O2(t,e,n){const s=Oe(t);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function yy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||P2(t,s)}))}function P2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(C0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),k0(t))}function oS(t,e,n){for(const s of n)s instanceof I2?(t.Ru.addReference(s.key,e),F6(t,s)):s instanceof D2?(ge(P0,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||P2(t,s.key)):Re(19791,{wu:s})}function F6(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ge(P0,"New document in limbo: "+n),t.Eu.add(s),k0(t))}function k0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new xe(ft.fromString(e)),s=t.fu.next();t.Au.set(s,new M6(n)),t.du=t.du.insert(n,s),T2(t.remoteStore,new Vr(as(xd(n.path)),s,"TargetPurposeLimboResolution",bd.ce))}}async function Sc(t,e,n){const s=Oe(t),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,d)=>{c.push(s.pu(d,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const y=p?!p.fromCache:n?.targetChanges.get(d.targetId)?.current;s.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){a.push(p);const y=A0.As(d.targetId,p);l.push(y)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(d,p){const y=Oe(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(p,(E=>re.forEach(E.Es,(w=>y.persistence.referenceDelegate.addReference(T,E.targetId,w))).next((()=>re.forEach(E.ds,(w=>y.persistence.referenceDelegate.removeReference(T,E.targetId,w)))))))))}catch(T){if(!Tl(T))throw T;ge(R0,"Failed to update sequence numbers: "+T)}for(const T of p){const E=T.targetId;if(!T.fromCache){const w=y.Ms.get(E),V=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(V);y.Ms=y.Ms.insert(E,O)}}})(s.localStore,l))}async function H6(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){ge(P0,"User change. New user:",e.toKey());const s=await g2(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((d=>{d.reject(new pe(se.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Sc(n,s.Ls)}}function q6(t,e){const n=Oe(t),s=n.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let a=$e();const l=n.Iu.get(e);if(!l)return a;for(const c of l){const f=n.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function k2(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=N2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U6.bind(null,e),e.Pu.H_=R6.bind(null,e.eventManager),e.Pu.yu=C6.bind(null,e.eventManager),e}function G6(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B6.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Qj(this.persistence,new $j,e.initialUser,this.serializer)}Cu(e){return new p2(w0.mi,this.serializer)}Du(e){return new n6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class $6 extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nt(this.persistence.referenceDelegate instanceof Wf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Mj(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new p2((s=>Wf.mi(s,n)),this.serializer)}}class vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>aS(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=H6.bind(null,this.syncEngine),await x6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new A6})()}createDatastore(e){const n=Dd(e.databaseInfo.databaseId),s=(function(l){return new o6(l)})(e.databaseInfo);return(function(l,c,f,d){return new h6(l,c,f,d)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,l,c,f){return new d6(s,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>aS(this.syncEngine,n,0)),(function(){return eS.v()?new eS:new i6})())}createSyncEngine(e,n){return(function(a,l,c,f,d,p,y){const T=new N6(a,l,c,f,d,p);return y&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Oe(n);ge(Ha,"RemoteStore shutting down."),s.Ea.add(5),await Ec(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vy.provider={build:()=>new vy};class j2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Kr="FirestoreClient";class K6{constructor(e,n,s,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=yn.UNAUTHENTICATED,this.clientId=d0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ge(Kr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ge(Kr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=V0(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bg(t,e){t.asyncQueue.verifyOperationInProgress(),ge(Kr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async a=>{s.isEqual(a)||(await g2(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function lS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Y6(t);ge(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>nS(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,a)=>nS(e.remoteStore,a))),t._onlineComponents=e}async function Y6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(Kr,"Using user provided OfflineComponentProvider");try{await bg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;al("Error using user provided cache. Falling back to memory cache: "+n),await bg(t,new Zf)}}else ge(Kr,"Using default OfflineComponentProvider"),await bg(t,new $6(void 0));return t._offlineComponents}async function L2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(Kr,"Using user provided OnlineComponentProvider"),await lS(t,t._uninitializedComponentsProvider._online)):(ge(Kr,"Using default OnlineComponentProvider"),await lS(t,new vy))),t._onlineComponents}function Q6(t){return L2(t).then((e=>e.syncEngine))}async function _y(t){const e=await L2(t),n=e.eventManager;return n.onListen=V6.bind(null,e.syncEngine),n.onUnlisten=k6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=O6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j6.bind(null,e.syncEngine),n}function X6(t,e,n={}){const s=new jr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new j2({next:E=>{y.Nu(),c.enqueueAndForget((()=>R2(l,T)));const w=E.docs.has(f);!w&&E.fromCache?p.reject(new pe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&E.fromCache&&d&&d.source==="server"?p.reject(new pe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),T=new C2(xd(f.path),y,{includeMetadataChanges:!0,qa:!0});return A2(l,T)})(await _y(t),t.asyncQueue,e,n,s))),s.promise}function U2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const uS=new Map;const z2="firestore.googleapis.com",cS=!0;class hS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z2,this.ssl=cS}else this.host=e.host,this.ssl=e.ssl??cS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ij)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U2(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new i3;switch(s.type){case"firstParty":return new o3(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=uS.get(n);s&&(ge("ComponentProvider","Removing Datastore"),uS.delete(n),s.terminate())})(this),Promise.resolve()}}function W6(t,e,n,s={}){t=Di(t,Vd);const a=gl(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;a&&(lA(`https://${f}`),uA("Firestore",!0)),l.host!==z2&&l.host!==f&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:f,ssl:a,emulatorOptions:s};if(!Br(d,c)&&(t._setSettings(d),s.mockUserToken)){let p,y;if(typeof s.mockUserToken=="string")p=s.mockUserToken,y=yn.MOCK_USER;else{p=Rk(s.mockUserToken,t._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new yn(T)}t._authCredentials=new s3(new AA(p,y))}}class El{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new El(this.firestore,e,this._query)}}class wt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(vc(n,wt._jsonSchema))return new wt(e,s||null,new xe(ft.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:qt("string",wt._jsonSchemaVersion),referencePath:qt("string")};class Lr extends El{constructor(e,n,s){super(e,n,xd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new xe(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function J6(t,e,...n){if(t=Xt(t),RA("collection","path",e),t instanceof Vd){const s=ft.fromString(e,...n);return xE(s),new Lr(t,null,s)}{if(!(t instanceof wt||t instanceof Lr))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ft.fromString(e,...n));return xE(s),new Lr(t.firestore,null,s)}}function et(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=d0.newId()),RA("doc","path",e),t instanceof Vd){const s=ft.fromString(e,...n);return SE(s),new wt(t,null,new xe(s))}{if(!(t instanceof wt||t instanceof Lr))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ft.fromString(e,...n));return SE(s),new wt(t.firestore,t instanceof Lr?t.converter:null,new xe(s))}}const fS="AsyncQueue";class dS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new v2(this,"async_queue_retry"),this._c=()=>{const s=Tg();s&&ge(fS,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Tg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tl(e))throw e;ge(fS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Fs("INTERNAL UNHANDLED ERROR: ",mS(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=N0.createAndSchedule(this,e,n,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Re(47125,{Pc:mS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function pS(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class qa extends Vd{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new dS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dS(e),this._firestoreClient=void 0,await e}}}function Z6(t,e){const n=typeof t=="object"?t:h0(),s=typeof t=="string"?t:qf,a=Wa(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=wk("firestore");l&&W6(a,...l)}return a}function j0(t){if(t._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eL(t),t._firestoreClient}function eL(t){const e=t._freezeSettings(),n=(function(a,l,c,f){return new x3(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,U2(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new K6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(t._componentsProvider))}class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(mn.fromBase64String(e))}catch(n){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new li(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vc(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:qt("string",li._jsonSchemaVersion),bytes:qt("string")};class Od{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class L0{constructor(e){this._methodName=e}}class ls{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ls._jsonSchemaVersion}}static fromJSON(e){if(vc(e,ls._jsonSchema))return new ls(e.latitude,e.longitude)}}ls._jsonSchemaVersion="firestore/geoPoint/1.0",ls._jsonSchema={type:qt("string",ls._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};class us{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vc(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new us(e.vectorValues);throw new pe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:qt("string",us._jsonSchemaVersion),vectorValues:qt("object")};const tL=/^__.*__$/;class nL{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class B2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function F2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class U0{constructor(e,n,s,a,l,c){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new U0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(F2(this.Ac)&&tL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iL{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Dd(e)}Cc(e,n,s,a=!1){return new U0({Ac:e,methodName:n,Dc:s,path:fn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z0(t){const e=t._freezeSettings(),n=Dd(t._databaseId);return new iL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sL(t,e,n,s,a,l={}){const c=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);B0("Data must be an object, but it was:",c,s);const f=H2(s,c);let d,p;if(l.merge)d=new Gn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const E=Ty(e,T,n);if(!c.contains(E))throw new pe(se.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);G2(y,E)||y.push(E)}d=new Gn(y),p=c.fieldTransforms.filter((T=>d.covers(T.field)))}else d=null,p=c.fieldTransforms;return new nL(new On(f),d,p)}class Pd extends L0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pd}}function rL(t,e,n,s){const a=t.Cc(1,e,n);B0("Data must be an object, but it was:",a,s);const l=[],c=On.empty();Wr(s,((d,p)=>{const y=F0(e,d,n);p=Xt(p);const T=a.yc(y);if(p instanceof Pd)l.push(y);else{const E=xc(p,T);E!=null&&(l.push(y),c.set(y,E))}}));const f=new Gn(l);return new B2(c,f,a.fieldTransforms)}function aL(t,e,n,s,a,l){const c=t.Cc(1,e,n),f=[Ty(e,s,n)],d=[a];if(l.length%2!=0)throw new pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Ty(e,l[E])),d.push(l[E+1]);const p=[],y=On.empty();for(let E=f.length-1;E>=0;--E)if(!G2(p,f[E])){const w=f[E];let V=d[E];V=Xt(V);const O=c.yc(w);if(V instanceof Pd)p.push(w);else{const I=xc(V,O);I!=null&&(p.push(w),y.set(w,I))}}const T=new Gn(p);return new B2(y,T,c.fieldTransforms)}function oL(t,e,n,s=!1){return xc(n,t.Cc(s?4:3,e))}function xc(t,e){if(q2(t=Xt(t)))return B0("Unsupported field value:",e,t),H2(t,e);if(t instanceof L0)return(function(s,a){if(!F2(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const f of s){let d=xc(f,a.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(t,e)}return(function(s,a){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return K3(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=pt.fromDate(s);return{timestampValue:Xf(a.serializer,l)}}if(s instanceof pt){const l=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xf(a.serializer,l)}}if(s instanceof ls)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof li)return{bytesValue:o2(a.serializer,s._byteString)};if(s instanceof wt){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:S0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof us)return(function(c,f){return{mapValue:{fields:{[kA]:{stringValue:jA},[Gf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return _0(f.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Td(s)}`)})(t,e)}function H2(t,e){const n={};return DA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,((s,a)=>{const l=xc(a,e.mc(s));l!=null&&(n[s]=l)})),{mapValue:{fields:n}}}function q2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof ls||t instanceof li||t instanceof wt||t instanceof L0||t instanceof us)}function B0(t,e,n){if(!q2(n)||!CA(n)){const s=Td(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Ty(t,e,n){if((e=Xt(e))instanceof Od)return e._internalPath;if(typeof e=="string")return F0(t,e);throw ed("Field path arguments must be of type string or ",t,!1,void 0,n)}const lL=new RegExp("[~\\*/\\[\\]]");function F0(t,e,n){if(e.search(lL)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Od(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ed(t,e,n,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${s}`),c&&(d+=` in document ${a}`),d+=")"),new pe(se.INVALID_ARGUMENT,f+t+d)}function G2(t,e){return t.some((n=>n.isEqual(e)))}class $2{constructor(e,n,s,a,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(K2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uL extends $2{data(){return super.data()}}function K2(t,e){return typeof e=="string"?F0(t,e):e instanceof Od?e._internalPath:e._delegate._internalPath}function cL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H0{}class hL extends H0{}function fL(t,e,...n){let s=[];e instanceof H0&&s.push(e),s=s.concat(n),(function(l){const c=l.filter((d=>d instanceof G0)).length,f=l.filter((d=>d instanceof q0)).length;if(c>1||c>0&&f>0)throw new pe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)t=a._apply(t);return t}class q0 extends hL{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new q0(e,n,s)}_apply(e){const n=this._parse(e);return Y2(e._query,n),new El(e.firestore,e.converter,ly(e._query,n))}_parse(e){const n=z0(e.firestore);return(function(l,c,f,d,p,y,T){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){yS(T,y);const V=[];for(const O of T)V.push(gS(d,l,O));E={arrayValue:{values:V}}}else E=gS(d,l,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||yS(T,y),E=oL(f,c,T,y==="in"||y==="not-in");return Ht.create(p,y,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class G0 extends H0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new G0(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const d of f)Y2(c,d),c=ly(c,d)})(e._query,n),new El(e.firestore,e.converter,ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gS(t,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new pe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GA(e)&&n.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!xe.isDocumentKey(s))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return NE(t,new xe(s))}if(n instanceof wt)return NE(t,n._key);throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(n)}.`)}function yS(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y2(t,e){const n=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dL{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Wr(e,((a,l)=>{s[a]=this.convertValue(l,n)})),s}convertVectorValue(e){const n=e.fields?.[Gf].arrayValue?.values?.map((s=>Mt(s.doubleValue)));return new us(n)}convertGeoPoint(e){return new ls(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Sd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);nt(d2(s),9688,{name:e});const a=new ic(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return a.isEqual(n)||Fs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function mL(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ou{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class za extends $2{constructor(e,n,s,a,l,c){super(e,n,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(K2("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=za._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}za._jsonSchemaVersion="firestore/documentSnapshot/1.0",za._jsonSchema={type:qt("string",za._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class If extends za{data(e={}){return super.data(e)}}class el{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ou(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new If(this._firestore,this._userDataWriter,s.key,s,new Ou(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const d=new If(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Ou(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new If(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Ou(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:pL(f.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=d0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}function gL(t){t=Di(t,wt);const e=Di(t.firestore,qa);return X6(j0(e),t._key).then((n=>X2(e,t,n)))}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:qt("string",el._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class Q2 extends dL{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function Dt(t,e,n){t=Di(t,wt);const s=Di(t.firestore,qa),a=mL(t.converter,e,n);return $0(s,[sL(z0(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,Mi.none())])}function td(t,e,n,...s){t=Di(t,wt);const a=Di(t.firestore,qa),l=z0(a);let c;return c=typeof(e=Xt(e))=="string"||e instanceof Od?aL(l,"updateDoc",t._key,e,n,s):rL(l,"updateDoc",t._key,e),$0(a,[c.toMutation(t._key,Mi.exists(!0))])}function yL(t){return $0(Di(t.firestore,qa),[new T0(t._key,Mi.none())])}function oc(t,...e){t=Xt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pS(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(pS(e[s])){const d=e[s];e[s]=d.next?.bind(d),e[s+1]=d.error?.bind(d),e[s+2]=d.complete?.bind(d)}let l,c,f;if(t instanceof wt)c=Di(t.firestore,qa),f=xd(t._key.path),l={next:d=>{e[s]&&e[s](X2(c,t,d))},error:e[s+1],complete:e[s+2]};else{const d=Di(t,El);c=Di(d.firestore,qa),f=d._query;const p=new Q2(c);l={next:y=>{e[s]&&e[s](new el(c,p,d,y))},error:e[s+1],complete:e[s+2]},cL(t._query)}return(function(p,y,T,E){const w=new j2(E),V=new C2(y,w,T);return p.asyncQueue.enqueueAndForget((async()=>A2(await _y(p),V))),()=>{w.Nu(),p.asyncQueue.enqueueAndForget((async()=>R2(await _y(p),V)))}})(j0(c),f,a,l)}function $0(t,e){return(function(s,a){const l=new jr;return s.asyncQueue.enqueueAndForget((async()=>L6(await Q6(s),a,l))),l.promise})(j0(t),e)}function X2(t,e,n){const s=n.docs.get(e._key),a=new Q2(t);return new za(t,a,e._key,s,new Ou(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){vl=a})(yl),fs(new Ni("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new qa(new r3(s.getProvider("auth-internal")),new l3(c,s.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(p.options.projectId,y)})(c,a),c);return l={useFetchStreams:n,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),hi(_E,TE,e),hi(_E,TE,"esm2020")})();function W2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vL=W2,J2=new Xa("auth","Firebase",W2());const nd=new _d("@firebase/auth");function _L(t,...e){nd.logLevel<=qe.WARN&&nd.warn(`Auth (${yl}): ${t}`,...e)}function Df(t,...e){nd.logLevel<=qe.ERROR&&nd.error(`Auth (${yl}): ${t}`,...e)}function qs(t,...e){throw K0(t,...e)}function cs(t,...e){return K0(t,...e)}function Z2(t,e,n){const s={...vL(),[e]:n};return new Xa("auth","Firebase",s).create(e,{appName:t.name})}function Ur(t){return Z2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K0(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return J2.create(t,...e)}function De(t,e,...n){if(!t)throw K0(e,...n)}function Os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function Gs(t,e){t||Os(e)}function by(){return typeof self<"u"&&self.location?.href||""}function TL(){return vS()==="http:"||vS()==="https:"}function vS(){return typeof self<"u"&&self.location?.protocol||null}function bL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TL()||cA()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gs(n>e,"Short delay should be less than long delay!"),this.isMobile=Dk()||Vk()}get(){return bL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Y0(t,e){Gs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class eR{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const xL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wL=new wc(3e4,6e4);function kd(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Sl(t,e,n,s,a={}){return tR(t,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=yc({key:t.config.apiKey,...c}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...l};return Nk()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&gl(t.emulatorConfig.host)&&(p.credentials="include"),eR.fetch()(await iR(t,t.config.apiHost,n,f),p)})}async function tR(t,e,n){t._canInitEmulator=!1;const s={...SL,...e};try{const a=new AL(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw mf(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw mf(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw mf(t,"user-disabled",c);const y=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Z2(t,y,p);qs(t,y)}}catch(a){if(a instanceof Pi)throw a;qs(t,"network-request-failed",{message:String(a)})}}async function nR(t,e,n,s,a={}){const l=await Sl(t,e,n,s,a);return"mfaPendingCredential"in l&&qs(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function iR(t,e,n,s){const a=`${e}${n}?${s}`,l=t,c=l.config.emulator?Y0(t.config,a):`${t.config.apiScheme}://${a}`;return xL.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class AL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cs(this.auth,"network-request-failed")),wL.get())})}}function mf(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=cs(t,e,s);return a.customData._tokenResponse=n,a}async function RL(t,e){return Sl(t,"POST","/v1/accounts:delete",e)}async function id(t,e){return Sl(t,"POST","/v1/accounts:lookup",e)}function $u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CL(t,e=!1){const n=Xt(t),s=await n.getIdToken(e),a=Q0(s);De(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:s,authTime:$u(Eg(a.auth_time)),issuedAtTime:$u(Eg(a.iat)),expirationTime:$u(Eg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Eg(t){return Number(t)*1e3}function Q0(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const a=sA(n);return a?JSON.parse(a):(Df("Failed to decode base64 JWT payload"),null)}catch(a){return Df("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _S(t){const e=Q0(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Pi&&IL(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function IL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class DL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ey{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sd(t){const e=t.auth,n=await t.getIdToken(),s=await lc(t,id(e,{idToken:n}));De(s?.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=a.providerUserInfo?.length?sR(a.providerUserInfo):[],c=NL(t.providerData,l),f=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!c?.length,p=f?d:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Ey(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function ML(t){const e=Xt(t);await sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NL(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function sR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function VL(t,e){const n=await tR(t,{},async()=>{const s=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await iR(t,a,"/v1/token",`key=${l}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:s};return t.emulatorConfig&&gl(t.emulatorConfig.host)&&(d.credentials="include"),eR.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OL(t,e){return Sl(t,"POST","/v2/accounts:revokeToken",kd(t,e))}class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_S(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=_S(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:l}=await VL(e,n);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:l}=n,c=new tl;return s&&(De(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Os("not implemented")}}function Rr(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ii{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new DL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ey(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await lc(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CL(this,e)}reload(){return ML(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await sd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await lc(this,RL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,c=n.photoURL??void 0,f=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:w,providerData:V,stsTokenManager:O}=n;De(T&&O,e,"internal-error");const I=tl.fromJSON(this.name,O);De(typeof T=="string",e,"internal-error"),Rr(s,e.name),Rr(a,e.name),De(typeof E=="boolean",e,"internal-error"),De(typeof w=="boolean",e,"internal-error"),Rr(l,e.name),Rr(c,e.name),Rr(f,e.name),Rr(d,e.name),Rr(p,e.name),Rr(y,e.name);const P=new Ii({uid:T,auth:e,email:a,emailVerified:E,displayName:s,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:I,createdAt:p,lastLoginAt:y});return V&&Array.isArray(V)&&(P.providerData=V.map(z=>({...z}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,n,s=!1){const a=new tl;a.updateFromServerResponse(n);const l=new Ii({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await sd(l),l}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?sR(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new tl;f.updateFromIdToken(s);const d=new Ii({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ey(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,p),d}}const TS=new Map;function Ps(t){Gs(t instanceof Function,"Expected a class definition");let e=TS.get(t);return e?(Gs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TS.set(t,e),e)}class rR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rR.type="NONE";const bS=rR;function Mf(t,e,n){return`firebase:${t}:${e}:${n}`}class nl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Mf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Mf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await id(this.auth,{idToken:e}).catch(()=>{});return n?Ii._fromGetAccountInfoResponse(this.auth,n,e):null}return Ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new nl(Ps(bS),e,s);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ps(bS);const c=Mf(s,e.config.apiKey,e.name);let f=null;for(const p of n)try{const y=await p._get(c);if(y){let T;if(typeof y=="string"){const E=await id(e,{idToken:y}).catch(()=>{});if(!E)break;T=await Ii._fromGetAccountInfoResponse(e,E,y)}else T=Ii._fromJSON(e,y);p!==l&&(f=T),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new nl(l,e,s):(l=d[0],f&&await l._set(c,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new nl(l,e,s))}}function ES(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hR(e))return"Blackberry";if(fR(e))return"Webos";if(oR(e))return"Safari";if((e.includes("chrome/")||lR(e))&&!e.includes("edge/"))return"Chrome";if(cR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function aR(t=_n()){return/firefox\//i.test(t)}function oR(t=_n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lR(t=_n()){return/crios\//i.test(t)}function uR(t=_n()){return/iemobile/i.test(t)}function cR(t=_n()){return/android/i.test(t)}function hR(t=_n()){return/blackberry/i.test(t)}function fR(t=_n()){return/webos/i.test(t)}function X0(t=_n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PL(t=_n()){return X0(t)&&!!window.navigator?.standalone}function kL(){return Ok()&&document.documentMode===10}function dR(t=_n()){return X0(t)||cR(t)||fR(t)||hR(t)||/windows phone/i.test(t)||uR(t)}function mR(t,e=[]){let n;switch(t){case"Browser":n=ES(_n());break;case"Worker":n=`${ES(_n())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yl}/${s}`}class jL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((c,f)=>{try{const d=e(l);c(d)}catch(d){f(d)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function LL(t,e={}){return Sl(t,"GET","/v2/passwordPolicy",kd(t,e))}const UL=6;class zL{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class BL{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SS(this),this.idTokenSubscription=new SS(this),this.beforeStateQueue=new jL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await id(this,{idToken:e}),s=await Ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ci(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(Ur(this));const n=e?Xt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LL(this),n=new zL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await OL(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ps(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,s,a);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_L(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jd(t){return Xt(t)}class SS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bk(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let W0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FL(t){W0=t}function HL(t){return W0.loadJS(t)}function qL(){return W0.gapiScript}function GL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function $L(t,e){const n=Wa(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Br(l,e??{}))return a;qs(a,"already-initialized")}return n.initialize({options:e})}function KL(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function YL(t,e,n){const s=jd(t);De(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=pR(e),{host:c,port:f}=QL(e),d=f===null?"":`:${f}`,p={url:`${l}//${c}${d}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){De(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),De(Br(p,s.config.emulator)&&Br(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,gl(c)?(lA(`${l}//${c}${d}`),uA("Auth",!0)):XL()}function pR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QL(t){const e=pR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:xS(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:xS(c)}}}function xS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class gR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,n){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}}async function il(t,e){return nR(t,"POST","/v1/accounts:signInWithIdp",kd(t,e))}const WL="http://localhost";class Ga extends gR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=n;if(!s||!a)return null;const c=new Ga(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return il(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,il(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,il(e,n)}buildRequest(){const e={requestUri:WL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yc(n)}return e}}class yR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ac extends yR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ir extends Ac{constructor(){super("facebook.com")}static credential(e){return Ga._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";class Dr extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ga._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Dr.credential(n,s)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";class Mr extends Ac{constructor(){super("github.com")}static credential(e){return Ga._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";class Nr extends Ac{constructor(){super("twitter.com")}static credential(e,n){return Ga._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";async function JL(t,e){return nR(t,"POST","/v1/accounts:signUp",kd(t,e))}class Yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const l=await Ii._fromIdTokenResponse(e,s,a),c=wS(s);return new Yr({user:l,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=wS(s);return new Yr({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function wS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function ZL(t){if(Ci(t.app))return Promise.reject(Ur(t));const e=jd(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Yr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await JL(e,{returnSecureToken:!0}),s=await Yr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}class rd extends Pi{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new rd(e,n,s,a)}}function vR(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(t,l,e,s):l})}async function e9(t,e,n=!1){const s=await lc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yr._forOperation(t,"link",s)}async function t9(t,e,n=!1){const{auth:s}=t;if(Ci(s.app))return Promise.reject(Ur(s));const a="reauthenticate";try{const l=await lc(t,vR(s,a,e,t),n);De(l.idToken,s,"internal-error");const c=Q0(l.idToken);De(c,s,"internal-error");const{sub:f}=c;return De(t.uid===f,s,"user-mismatch"),Yr._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&qs(s,"user-mismatch"),l}}async function n9(t,e,n=!1){if(Ci(t.app))return Promise.reject(Ur(t));const s="signIn",a=await vR(t,s,e),l=await Yr._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(l.user),l}function i9(t,e,n,s){return Xt(t).onIdTokenChanged(e,n,s)}function s9(t,e,n){return Xt(t).beforeAuthStateChanged(e,n)}const ad="__sak";class _R{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ad,"1"),this.storage.removeItem(ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const r9=1e3,a9=10;class TR extends _R{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);kL()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,a9):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},r9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TR.type="LOCAL";const o9=TR;class bR extends _R{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bR.type="SESSION";const ER=bR;function l9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new Ld(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async p=>p(n.origin,l)),d=await l9(f);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ld.receivers=[];function J0(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class u9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,d)=>{const p=J0("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(T){const E=T;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function hs(){return window}function c9(t){hs().location.href=t}function SR(){return typeof hs().WorkerGlobalScope<"u"&&typeof hs().importScripts=="function"}async function h9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f9(){return navigator?.serviceWorker?.controller||null}function d9(){return SR()?self:null}const xR="firebaseLocalStorageDb",m9=1,od="firebaseLocalStorage",wR="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ud(t,e){return t.transaction([od],e?"readwrite":"readonly").objectStore(od)}function p9(){const t=indexedDB.deleteDatabase(xR);return new Rc(t).toPromise()}function Sy(){const t=indexedDB.open(xR,m9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(od,{keyPath:wR})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(od)?e(s):(s.close(),await p9(),e(await Sy()))})})}async function AS(t,e,n){const s=Ud(t,!0).put({[wR]:e,value:n});return new Rc(s).toPromise()}async function g9(t,e){const n=Ud(t,!1).get(e),s=await new Rc(n).toPromise();return s===void 0?null:s.value}function RS(t,e){const n=Ud(t,!0).delete(e);return new Rc(n).toPromise()}const y9=800,v9=3;class AR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>v9)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ld._getInstance(d9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h9(),!this.activeServiceWorker)return;this.sender=new u9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await AS(e,ad,"1"),await RS(e,ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>AS(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>g9(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ud(a,!1).getAll();return new Rc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AR.type="LOCAL";const _9=AR;new wc(3e4,6e4);function T9(t,e){return e?Ps(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Z0 extends gR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return il(e,this._buildIdpRequest())}_linkToIdToken(e,n){return il(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return il(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function b9(t){return n9(t.auth,new Z0(t),t.bypassAuthState)}function E9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),t9(n,new Z0(t),t.bypassAuthState)}async function S9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),e9(n,new Z0(t),t.bypassAuthState)}class RR{constructor(e,n,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return b9;case"linkViaPopup":case"linkViaRedirect":return S9;case"reauthViaPopup":case"reauthViaRedirect":return E9;default:qs(this.auth,"internal-error")}}resolve(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const x9=new wc(2e3,1e4);class Wo extends RR{constructor(e,n,s,a,l){super(e,n,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Gs(this.filter.length===1,"Popup operations only handle one event");const e=J0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x9.get())};e()}}Wo.currentPopupAction=null;const w9="pendingRedirect",Nf=new Map;class A9 extends RR{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Nf.get(this.auth._key());if(!e){try{const s=await R9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Nf.set(this.auth._key(),e)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R9(t,e){const n=D9(e),s=I9(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function C9(t,e){Nf.set(t._key(),e)}function I9(t){return Ps(t._redirectPersistence)}function D9(t){return Mf(w9,t.config.apiKey,t.name)}async function M9(t,e,n=!1){if(Ci(t.app))return Promise.reject(Ur(t));const s=jd(t),a=T9(s,e),c=await new A9(s,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const N9=600*1e3;class V9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!CR(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(cs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N9&&this.cachedEventUids.clear(),this.cachedEventUids.has(CS(e))}saveEventToCache(e){this.cachedEventUids.add(CS(e)),this.lastProcessedEventTime=Date.now()}}function CS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function O9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CR(t);default:return!1}}async function P9(t,e={}){return Sl(t,"GET","/v1/projects",e)}const k9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j9=/^https?/;async function L9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P9(t);for(const n of e)try{if(U9(n))return}catch{}qs(t,"unauthorized-domain")}function U9(t){const e=by(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!j9.test(n))return!1;if(k9.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}const z9=new wc(3e4,6e4);function IS(){const t=hs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B9(t){return new Promise((e,n)=>{function s(){IS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IS(),n(cs(t,"network-request-failed"))},timeout:z9.get()})}if(hs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(hs().gapi?.load)s();else{const a=GL("iframefcb");return hs()[a]=()=>{gapi.load?s():n(cs(t,"network-request-failed"))},HL(`${qL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vf=null,e})}let Vf=null;function F9(t){return Vf=Vf||B9(t),Vf}const H9=new wc(5e3,15e3),q9="__/auth/iframe",G9="emulator/auth/iframe",$9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y9(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Y0(e,G9):`https://${t.config.authDomain}/${q9}`,s={apiKey:e.apiKey,appName:t.name,v:yl},a=K9.get(t.config.apiHost);a&&(s.eid=a);const l=t._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${yc(s).slice(1)}`}async function Q9(t){const e=await F9(t),n=hs().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:Y9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$9,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=cs(t,"network-request-failed"),f=hs().setTimeout(()=>{l(c)},H9.get());function d(){hs().clearTimeout(f),a(s)}s.ping(d).then(d,()=>{l(c)})}))}const X9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W9=500,J9=600,Z9="_blank",eU="http://localhost";class DS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tU(t,e,n,s=W9,a=J9){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const d={...X9,width:s.toString(),height:a.toString(),top:l,left:c},p=_n().toLowerCase();n&&(f=lR(p)?Z9:n),aR(p)&&(e=e||eU,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[w,V])=>`${E}${w}=${V},`,"");if(PL(p)&&f!=="_self")return nU(e||"",f),new DS(null);const T=window.open(e||"",f,y);De(T,t,"popup-blocked");try{T.focus()}catch{}return new DS(T)}function nU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const iU="__/auth/handler",sU="emulator/auth/handler",rU=encodeURIComponent("fac");async function MS(t,e,n,s,a,l){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:yl,eventId:a};if(e instanceof yR){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",zk(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries({}))c[y]=T}if(e instanceof Ac){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const d=await t._getAppCheckToken(),p=d?`#${rU}=${encodeURIComponent(d)}`:"";return`${aU(t)}?${yc(f).slice(1)}${p}`}function aU({config:t}){return t.emulator?Y0(t,sU):`https://${t.authDomain}/${iU}`}const Sg="webStorageSupport";class oU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ER,this._completeRedirectFn=M9,this._overrideRedirectResult=C9}async _openPopup(e,n,s,a){Gs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await MS(e,n,s,by(),a);return tU(e,l,J0())}async _openRedirect(e,n,s,a){await this._originValidation(e);const l=await MS(e,n,s,by(),a);return c9(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Gs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Q9(e),s=new V9(e);return n.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sg,{type:Sg},a=>{const l=a?.[0]?.[Sg];l!==void 0&&n(!!l),qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dR()||oR()||X0()}}const lU=oU;var NS="@firebase/auth",VS="1.12.0";class uU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hU(t){fs(new Ni("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mR(t)},p=new BL(s,a,l,d);return KL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),fs(new Ni("auth-internal",e=>{const n=jd(e.getProvider("auth").getImmediate());return(s=>new uU(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hi(NS,VS,cU(t)),hi(NS,VS,"esm2020")}const fU=300,dU=oA("authIdTokenMaxAge")||fU;let OS=null;const mU=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>dU)return;const a=n?.token;OS!==a&&(OS=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function pU(t=h0()){const e=Wa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$L(t,{popupRedirectResolver:lU,persistence:[_9,o9,ER]}),s=oA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=mU(l.toString());s9(n,c,()=>c(n.currentUser)),i9(n,f=>c(f))}}const a=rA("auth");return a&&YL(n,`http://${a}`),n}function gU(){return document.getElementsByTagName("head")?.[0]??document}FL({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const l=cs("internal-error");l.customData=a,n(l)},s.type="text/javascript",s.charset="UTF-8",gU().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hU("Browser");const IR="@firebase/installations",ev="0.6.19";const DR=1e4,MR=`w:${ev}`,NR="FIS_v2",yU="https://firebaseinstallations.googleapis.com/v1",vU=3600*1e3,_U="installations",TU="Installations";const bU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$a=new Xa(_U,TU,bU);function VR(t){return t instanceof Pi&&t.code.includes("request-failed")}function OR({projectId:t}){return`${yU}/projects/${t}/installations`}function PR(t){return{token:t.token,requestStatus:2,expiresIn:SU(t.expiresIn),creationTime:Date.now()}}async function kR(t,e){const s=(await e.json()).error;return $a.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function jR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function EU(t,{refreshToken:e}){const n=jR(t);return n.append("Authorization",xU(e)),n}async function LR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function SU(t){return Number(t.replace("s","000"))}function xU(t){return`${NR} ${t}`}async function wU({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=OR(t),a=jR(t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:n,authVersion:NR,appId:t.appId,sdkVersion:MR},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await LR(()=>fetch(s,f));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:PR(p.authToken)}}else throw await kR("Create Installation",d)}function UR(t){return new Promise(e=>{setTimeout(e,t)})}function AU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const RU=/^[cdef][\w-]{21}$/,xy="";function CU(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=IU(t);return RU.test(n)?n:xy}catch{return xy}}function IU(t){return AU(t).substr(0,22)}function zd(t){return`${t.appName}!${t.appId}`}const zR=new Map;function BR(t,e){const n=zd(t);FR(n,e),DU(n,e)}function FR(t,e){const n=zR.get(t);if(n)for(const s of n)s(e)}function DU(t,e){const n=MU();n&&n.postMessage({key:t,fid:e}),NU()}let ka=null;function MU(){return!ka&&"BroadcastChannel"in self&&(ka=new BroadcastChannel("[Firebase] FID Change"),ka.onmessage=t=>{FR(t.data.key,t.data.fid)}),ka}function NU(){zR.size===0&&ka&&(ka.close(),ka=null)}const VU="firebase-installations-database",OU=1,Ka="firebase-installations-store";let xg=null;function tv(){return xg||(xg=pA(VU,OU,{upgrade:(t,e)=>{e===0&&t.createObjectStore(Ka)}})),xg}async function ld(t,e){const n=zd(t),a=(await tv()).transaction(Ka,"readwrite"),l=a.objectStore(Ka),c=await l.get(n);return await l.put(e,n),await a.done,(!c||c.fid!==e.fid)&&BR(t,e.fid),e}async function HR(t){const e=zd(t),s=(await tv()).transaction(Ka,"readwrite");await s.objectStore(Ka).delete(e),await s.done}async function Bd(t,e){const n=zd(t),a=(await tv()).transaction(Ka,"readwrite"),l=a.objectStore(Ka),c=await l.get(n),f=e(c);return f===void 0?await l.delete(n):await l.put(f,n),await a.done,f&&(!c||c.fid!==f.fid)&&BR(t,f.fid),f}async function nv(t){let e;const n=await Bd(t.appConfig,s=>{const a=PU(s),l=kU(t,a);return e=l.registrationPromise,l.installationEntry});return n.fid===xy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function PU(t){const e=t||{fid:CU(),registrationStatus:0};return qR(e)}function kU(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject($a.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=jU(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LU(t)}:{installationEntry:e}}async function jU(t,e){try{const n=await wU(t,e);return ld(t.appConfig,n)}catch(n){throw VR(n)&&n.customData.serverCode===409?await HR(t.appConfig):await ld(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function LU(t){let e=await PS(t.appConfig);for(;e.registrationStatus===1;)await UR(100),e=await PS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await nv(t);return s||n}return e}function PS(t){return Bd(t,e=>{if(!e)throw $a.create("installation-not-found");return qR(e)})}function qR(t){return UU(t)?{fid:t.fid,registrationStatus:0}:t}function UU(t){return t.registrationStatus===1&&t.registrationTime+DR<Date.now()}async function zU({appConfig:t,heartbeatServiceProvider:e},n){const s=BU(t,n),a=EU(t,n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:MR,appId:t.appId}},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await LR(()=>fetch(s,f));if(d.ok){const p=await d.json();return PR(p)}else throw await kR("Generate Auth Token",d)}function BU(t,{fid:e}){return`${OR(t)}/${e}/authTokens:generate`}async function iv(t,e=!1){let n;const s=await Bd(t.appConfig,l=>{if(!GR(l))throw $a.create("not-registered");const c=l.authToken;if(!e&&qU(c))return l;if(c.requestStatus===1)return n=FU(t,e),l;{if(!navigator.onLine)throw $a.create("app-offline");const f=$U(l);return n=HU(t,f),f}});return n?await n:s.authToken}async function FU(t,e){let n=await kS(t.appConfig);for(;n.authToken.requestStatus===1;)await UR(100),n=await kS(t.appConfig);const s=n.authToken;return s.requestStatus===0?iv(t,e):s}function kS(t){return Bd(t,e=>{if(!GR(e))throw $a.create("not-registered");const n=e.authToken;return KU(n)?{...e,authToken:{requestStatus:0}}:e})}async function HU(t,e){try{const n=await zU(t,e),s={...e,authToken:n};return await ld(t.appConfig,s),n}catch(n){if(VR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await HR(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await ld(t.appConfig,s)}throw n}}function GR(t){return t!==void 0&&t.registrationStatus===2}function qU(t){return t.requestStatus===2&&!GU(t)}function GU(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+vU}function $U(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function KU(t){return t.requestStatus===1&&t.requestTime+DR<Date.now()}async function YU(t){const e=t,{installationEntry:n,registrationPromise:s}=await nv(e);return s?s.catch(console.error):iv(e).catch(console.error),n.fid}async function QU(t,e=!1){const n=t;return await XU(n),(await iv(n,e)).token}async function XU(t){const{registrationPromise:e}=await nv(t);e&&await e}function WU(t){if(!t||!t.options)throw wg("App Configuration");if(!t.name)throw wg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function wg(t){return $a.create("missing-app-config-values",{valueName:t})}const $R="installations",JU="installations-internal",ZU=t=>{const e=t.getProvider("app").getImmediate(),n=WU(e),s=Wa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},ez=t=>{const e=t.getProvider("app").getImmediate(),n=Wa(e,$R).getImmediate();return{getId:()=>YU(n),getToken:a=>QU(n,a)}};function tz(){fs(new Ni($R,ZU,"PUBLIC")),fs(new Ni(JU,ez,"PRIVATE"))}tz();hi(IR,ev);hi(IR,ev,"esm2020");const ud="analytics",nz="firebase_id",iz="origin",sz=60*1e3,rz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sv="https://www.googletagmanager.com/gtag/js";const xn=new _d("@firebase/analytics");const az={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$n=new Xa("analytics","Analytics",az);function oz(t){if(!t.startsWith(sv)){const e=$n.create("invalid-gtag-resource",{gtagURL:t});return xn.warn(e.message),""}return t}function KR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function lz(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function uz(t,e){const n=lz("firebase-js-sdk-policy",{createScriptURL:oz}),s=document.createElement("script"),a=`${sv}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function cz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function hz(t,e,n,s,a,l){const c=s[a];try{if(c)await e[c];else{const d=(await KR(n)).find(p=>p.measurementId===a);d&&await e[d.appId]}}catch(f){xn.error(f)}t("config",a,l)}async function fz(t,e,n,s,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const f=await KR(n);for(const d of c){const p=f.find(T=>T.measurementId===d),y=p&&e[p.appId];if(y)l.push(y);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",s,a||{})}catch(l){xn.error(l)}}function dz(t,e,n,s){async function a(l,...c){try{if(l==="event"){const[f,d]=c;await fz(t,e,n,f,d)}else if(l==="config"){const[f,d]=c;await hz(t,e,n,s,f,d)}else if(l==="consent"){const[f,d]=c;t("consent",f,d)}else if(l==="get"){const[f,d,p]=c;t("get",f,d,p)}else if(l==="set"){const[f]=c;t("set",f)}else t(l,...c)}catch(f){xn.error(f)}}return a}function mz(t,e,n,s,a){let l=function(...c){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=dz(l,t,e,n),{gtagCore:l,wrappedGtag:window[a]}}function pz(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(sv)&&n.src.includes(t))return n;return null}const gz=30,yz=1e3;class vz{constructor(e={},n=yz){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const YR=new vz;function _z(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Tz(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:_z(n)},a=rz.replace("{app-id}",e),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let c="";try{const f=await l.json();f.error?.message&&(c=f.error.message)}catch{}throw $n.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function bz(t,e=YR,n){const{appId:s,apiKey:a,measurementId:l}=t.options;if(!s)throw $n.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw $n.create("no-api-key")}const c=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new xz;return setTimeout(async()=>{f.abort()},sz),QR({appId:s,apiKey:a,measurementId:l},c,f,e)}async function QR(t,{throttleEndTimeMillis:e,backoffCount:n},s,a=YR){const{appId:l,measurementId:c}=t;try{await Ez(s,e)}catch(f){if(c)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:c};throw f}try{const f=await Tz(t);return a.deleteThrottleMetadata(l),f}catch(f){const d=f;if(!Sz(d)){if(a.deleteThrottleMetadata(l),c)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:c};throw f}const p=Number(d?.customData?.httpStatus)===503?uE(n,a.intervalMillis,gz):uE(n,a.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return a.setThrottleMetadata(l,y),xn.debug(`Calling attemptFetch again in ${p} millis`),QR(t,y,s,a)}}function Ez(t,e){return new Promise((n,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(l),s($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Sz(t){if(!(t instanceof Pi)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class xz{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function wz(t,e,n,s,a){if(a&&a.global){t("event",n,s);return}else{const l=await e,c={...s,send_to:l};t("event",n,c)}}async function Az(t,e,n,s){if(s&&s.global){const a={};for(const l of Object.keys(n))a[`user_properties.${l}`]=n[l];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:n})}}async function Rz(){if(hA())try{await fA()}catch(t){return xn.warn($n.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return xn.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Cz(t,e,n,s,a,l,c){const f=bz(t);f.then(E=>{n[E.measurementId]=E.appId,t.options.measurementId&&E.measurementId!==t.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>xn.error(E)),e.push(f);const d=Rz().then(E=>{if(E)return s.getId()}),[p,y]=await Promise.all([f,d]);pz(l)||uz(l,p.measurementId),a("js",new Date);const T=c?.config??{};return T[iz]="firebase",T.update=!0,y!=null&&(T[nz]=y),a("config",p.measurementId,T),p.measurementId}class Iz{constructor(e){this.app=e}_delete(){return delete sl[this.app.options.appId],Promise.resolve()}}let sl={},jS=[];const LS={};let Ag="dataLayer",Dz="gtag",US,rv,zS=!1;function Mz(){const t=[];if(cA()&&t.push("This is a browser extension environment."),kk()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,a)=>`(${a+1}) ${s}`).join(" "),n=$n.create("invalid-analytics-context",{errorInfo:e});xn.warn(n.message)}}function Nz(t,e,n){Mz();const s=t.options.appId;if(!s)throw $n.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $n.create("no-api-key");if(sl[s]!=null)throw $n.create("already-exists",{id:s});if(!zS){cz(Ag);const{wrappedGtag:l,gtagCore:c}=mz(sl,jS,LS,Ag,Dz);rv=l,US=c,zS=!0}return sl[s]=Cz(t,jS,LS,e,US,Ag,n),new Iz(t)}function Vz(t=h0()){t=Xt(t);const e=Wa(t,ud);return e.isInitialized()?e.getImmediate():Oz(t)}function Oz(t,e={}){const n=Wa(t,ud);if(n.isInitialized()){const a=n.getImmediate();if(Br(e,n.getOptions()))return a;throw $n.create("already-initialized")}return n.initialize({options:e})}function Pz(t,e,n){t=Xt(t),Az(rv,sl[t.app.options.appId],e,n).catch(s=>xn.error(s))}function kz(t,e,n,s){t=Xt(t),wz(rv,sl[t.app.options.appId],e,n,s).catch(a=>xn.error(a))}const BS="@firebase/analytics",FS="0.10.19";function jz(){fs(new Ni(ud,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return Nz(s,a,n)},"PUBLIC")),fs(new Ni("analytics-internal",t,"PRIVATE")),hi(BS,FS),hi(BS,FS,"esm2020");function t(e){try{const n=e.getProvider(ud).getImmediate();return{logEvent:(s,a,l)=>kz(n,s,a,l),setUserProperties:(s,a)=>Pz(n,s,a)}}catch(n){throw $n.create("interop-component-reg-failed",{reason:n})}}}jz();const Lz={apiKey:"AIzaSyAhH3FeQ3z7bwflGX130Lv6PCDtrKVG1Gw",authDomain:"the-game-app-9e46a.firebaseapp.com",projectId:"the-game-app-9e46a",storageBucket:"the-game-app-9e46a.firebasestorage.app",messagingSenderId:"311582864830",appId:"1:311582864830:web:3a55826df416990db2f5ef",measurementId:"G-H08F2DWV6E"},av=gA(Lz),We=Z6(av),Uz=pU(av);Vz(av);function oi({isOpen:t,onConfirm:e,onCancel:n,title:s="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Yes, Confirm",cancelText:c="Cancel",isDanger:f=!1}){return v.jsx(Qa,{children:t&&v.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(5px)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:v.jsxs(tt.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"glass-panel",style:{width:"100%",maxWidth:"350px",padding:"2rem",borderRadius:"1.5rem",textAlign:"center",border:`1px solid ${f?"var(--danger)":"rgba(255,255,255,0.2)"}`,background:"var(--surface)"},children:[v.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:s}),v.jsx("div",{style:{marginBottom:"2rem",opacity:.9},children:a}),v.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[v.jsx("button",{className:"btn-ghost",onClick:n,style:{flex:1,padding:"0.8rem"},children:c}),v.jsx("button",{className:"btn-primary",onClick:e,style:{flex:1,padding:"0.8rem",background:f?"var(--danger)":"var(--success)"},children:l})]})]})})})}function zz({roomCode:t,players:e,isHost:n,onCreate:s,onJoin:a,onBack:l,onStartSetup:c,currentUser:f}){const[d,p]=M.useState("menu"),[y,T]=M.useState(""),[E,w]=M.useState(""),[V,O]=M.useState(!1);return t?v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",height:"100%",paddingBottom:"1rem"},children:[v.jsxs("div",{className:"glass-panel",style:{width:"100%",textAlign:"center",padding:"1.5rem",borderRadius:"1.5rem",background:"rgba(26, 26, 46, 0.6)",border:"1px solid rgba(255,255,255,0.1)"},children:[v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"0.8rem",letterSpacing:"1px",marginBottom:"0.5rem"},children:"ROOM CODE"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[v.jsx("h1",{className:"text-gradient",style:{fontSize:"3.5rem",letterSpacing:"8px",lineHeight:1,fontWeight:800},children:t}),v.jsx("button",{onClick:()=>navigator.clipboard.writeText(t),className:"btn-icon",style:{background:"rgba(255,255,255,0.1)",border:"none",padding:"0.5rem",borderRadius:"50%",cursor:"pointer",color:"white"},children:v.jsx(_P,{size:20})})]})]}),v.jsxs("div",{className:"glass-panel",style:{width:"100%",flex:1,overflow:"hidden",display:"flex",flexDirection:"column",padding:"1.5rem",borderRadius:"1.5rem",background:"rgba(26, 26, 46, 0.6)",border:"1px solid rgba(255,255,255,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h3",{style:{fontSize:"1.2rem"},children:"Players"}),v.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",padding:"0.2rem 0.8rem",borderRadius:"1rem",fontSize:"0.8rem"},children:[e.length," joined"]})]}),v.jsx("div",{className:"custom-scrollbar",style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(I=>v.jsxs("div",{style:{padding:"0.8rem",background:"rgba(255,255,255,0.03)",borderRadius:"0.8rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(255,255,255,0.05)"},children:[v.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1rem",boxShadow:"0 2px 5px rgba(0,0,0,0.2)"},children:I.name.charAt(0).toUpperCase()}),v.jsxs("div",{style:{flex:1},children:[v.jsx("span",{style:{fontWeight:500},children:I.name}),I.isHost&&v.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.7rem",color:"#fbbf24"},children:" HOST"})]}),I.id===f&&v.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-dim)",fontStyle:"italic"},children:"You"})]},I.id))})]}),n?v.jsxs(v.Fragment,{children:[v.jsxs(tt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn-primary",style:{width:"100%",padding:"1.2rem",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},onClick:()=>O(!0),children:[v.jsx(Xw,{size:20}),"Start Role Setup"]}),v.jsx(oi,{isOpen:V,onCancel:()=>O(!1),onConfirm:()=>{O(!1),c()},title:"Start Game Setup?",message:"This will lock the lobby and prevent new players from joining.",confirmText:"Start Setup"})]}):v.jsx("div",{style:{padding:"1rem",background:"rgba(255,255,255,0.05)",borderRadius:"1rem",textAlign:"center",border:"1px dashed rgba(255,255,255,0.2)"},children:v.jsx("p",{style:{color:"var(--text-dim)",fontStyle:"italic",fontSize:"0.9rem"},children:"Waiting for host to start setup..."})})]}):v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",marginTop:"2rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx(u0,{style:{cursor:"pointer"},onClick:l}),v.jsx("h2",{children:"Multiplayer Lobby"})]}),d==="menu"&&v.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[v.jsxs(tt.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onClick:()=>p("create"),className:"glass-panel",style:{width:"100%",padding:"2rem",display:"flex",alignItems:"center",gap:"1.5rem",cursor:"pointer",textAlign:"left",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1.5rem",position:"relative",overflow:"hidden"},whileHover:{scale:1.02,translateY:-2,backgroundColor:"rgba(255,255,255,0.08)"},whileTap:{scale:.98},children:[v.jsx("div",{style:{padding:"1.5rem",background:"rgba(34, 197, 94, 0.15)",borderRadius:"50%",color:"#4ade80",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 20px rgba(34, 197, 94, 0.2)"},children:v.jsx(Ua,{size:36})}),v.jsxs("div",{children:[v.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"0.5rem",color:"var(--text)",fontWeight:600},children:"Create Room"}),v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"0.95rem",lineHeight:1.5},children:"Start a new game lobby as host."})]})]}),v.jsxs(tt.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},onClick:()=>p("join"),className:"glass-panel",style:{width:"100%",padding:"2rem",display:"flex",alignItems:"center",gap:"1.5rem",cursor:"pointer",textAlign:"left",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1.5rem",position:"relative",overflow:"hidden"},whileHover:{scale:1.02,translateY:-2,backgroundColor:"rgba(255,255,255,0.08)"},whileTap:{scale:.98},children:[v.jsx("div",{style:{padding:"1.5rem",background:"rgba(59, 130, 246, 0.15)",borderRadius:"50%",color:"#60a5fa",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 20px rgba(59, 130, 246, 0.2)"},children:v.jsx(PP,{size:36})}),v.jsxs("div",{children:[v.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"0.5rem",color:"var(--text)",fontWeight:600},children:"Join Room"}),v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"0.95rem",lineHeight:1.5},children:"Enter a code to join friends."})]})]})]}),d==="create"&&v.jsxs("div",{className:"glass-panel",style:{padding:"2rem",borderRadius:"1.5rem",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(26, 26, 46, 0.8)"},children:[v.jsx("h3",{style:{marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Create Room"}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{style:{color:"var(--text-dim)",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Your Name"}),v.jsx("input",{type:"text",placeholder:"Enter your name",value:y,onChange:I=>T(I.target.value),style:{width:"100%",padding:"1rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1rem",color:"white",outline:"none",fontSize:"1rem"}})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[v.jsx("button",{className:"btn-ghost",style:{flex:1,borderRadius:"1rem",border:"1px solid rgba(255,255,255,0.2)"},onClick:()=>p("menu"),children:"Cancel"}),v.jsx("button",{className:"btn-primary",style:{flex:2,borderRadius:"1rem",background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},onClick:()=>s(y),children:"Create Room"})]})]}),d==="join"&&v.jsxs("div",{className:"glass-panel",style:{padding:"2rem",borderRadius:"1.5rem",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(26, 26, 46, 0.8)"},children:[v.jsx("h3",{style:{marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Join Room"}),v.jsxs("div",{className:"input-group",style:{marginBottom:"1.5rem"},children:[v.jsx("label",{style:{color:"var(--text-dim)",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Your Name"}),v.jsx("input",{type:"text",placeholder:"Enter your name",value:y,onChange:I=>T(I.target.value),style:{width:"100%",padding:"1rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1rem",color:"white",outline:"none",fontSize:"1rem"}})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{style:{color:"var(--text-dim)",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Room Code"}),v.jsx("input",{type:"text",placeholder:"6-digit code",value:E,onChange:I=>w(I.target.value),style:{width:"100%",padding:"1rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"1rem",color:"white",outline:"none",fontSize:"1rem",letterSpacing:"2px"}})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[v.jsx("button",{className:"btn-ghost",style:{flex:1,borderRadius:"1rem",border:"1px solid rgba(255,255,255,0.2)"},onClick:()=>p("menu"),children:"Cancel"}),v.jsx("button",{className:"btn-primary",style:{flex:2,borderRadius:"1rem",background:"linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%)",boxShadow:"0 4px 15px rgba(6, 182, 212, 0.4)"},onClick:()=>a(y,E),children:"Join Room"})]})]})]})}function Bz({player:t,players:e,isHost:n,onStartGame:s,roomCode:a,onResetGame:l}){const[c,f]=M.useState(!1),[d,p]=M.useState(!1),y=async()=>{if(!c){f(!0);try{a&&t?.id&&await td(et(We,"rooms",a,"players",t.id),{roleRevealed:!0})}catch(z){console.error("Error updating reveal status:",z)}}};if(!t||!t.role)return v.jsx("div",{className:"flex-col-center",style:{height:"80vh"},children:v.jsx("h2",{children:"Waiting for role..."})});let T=zu;const E=Sf.find(z=>z.id===t.role);E&&(T=E.icon);const w=T,V=t.roleData?.color||E?.color||"#fff",O=t.roleData?.label||E?.label||t.role,I=e?.filter(z=>!z.roleRevealed).length||0,P=I===0;return v.jsxs("div",{style:{minHeight:"80vh",padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2rem"},children:[v.jsx(tt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{width:"100%",maxWidth:"320px",aspectRatio:"2/3",position:"relative",perspective:"1000px"},onClick:y,children:v.jsxs(tt.div,{animate:{rotateY:c?180:0},transition:{duration:.6},style:{width:"100%",height:"100%",position:"relative",transformStyle:"preserve-3d"},children:[v.jsxs("div",{className:"card-glass",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--surface), var(--background))",border:"2px solid var(--primary)",cursor:"pointer"},children:[v.jsx(zu,{size:64,color:"var(--primary)",style:{opacity:.5}}),v.jsx("h3",{style:{marginTop:"1rem"},children:"Tap to Reveal"})]}),v.jsxs("div",{className:"card-glass",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #000, var(--surface))",border:`2px solid ${V}`,boxShadow:`0 0 30px ${V}40`},children:[v.jsx("div",{style:{color:V,marginBottom:"2rem"},children:v.jsx(w,{size:80})}),v.jsx("h2",{style:{fontSize:"2.5rem",color:V,textAlign:"center",textShadow:`0 0 20px ${V}`},children:O}),v.jsx("p",{style:{color:"var(--text-dim)",textAlign:"center",marginTop:"1rem"},children:"Don't show this to anyone!"})]})]})}),n&&v.jsxs("div",{style:{width:"100%",textAlign:"center",marginTop:"2rem"},children:[P?v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--success)",marginBottom:"1rem"},children:[v.jsx(mP,{size:16}),v.jsx("span",{children:"Everyone is ready!"})]}):v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--warning)",marginBottom:"1rem",background:"rgba(255, 193, 7, 0.1)",padding:"0.5rem 1rem",borderRadius:"1rem"},children:[v.jsx(yP,{size:16}),v.jsxs("span",{children:["Waiting for ",I," players to reveal..."]})]}),v.jsx("button",{className:"btn-primary",onClick:s,disabled:!P,style:{width:"100%",maxWidth:"300px",opacity:P?1:.5,cursor:P?"pointer":"not-allowed"},children:"Start Night Phase"}),v.jsx("button",{className:"btn-ghost",onClick:()=>p(!0),style:{display:"block",margin:"1rem auto 0",width:"100%",maxWidth:"300px",color:"var(--danger)",borderColor:"var(--danger)",opacity:.8},children:"Reset Game"}),v.jsx(oi,{isOpen:d,onCancel:()=>p(!1),onConfirm:()=>{p(!1),l()},title:"Reset Game?",message:"This will take everyone back to the lobby, clear all roles, and restart from scratch.",confirmText:"Reset Game",isDanger:!0})]}),!n&&v.jsx("p",{style:{color:"var(--text-dim)",fontStyle:"italic",marginTop:"1rem"},children:c?"Waiting for host to start...":"Tap the card to see your role!"})]})}function Fz({roomCode:t,players:e,currentUser:n,isHost:s,nightCount:a,gameId:l,onEndNight:c,onResetGame:f}){const[d,p]=M.useState("sleep"),[y,T]=M.useState({}),[E,w]=M.useState(!1),[V,O]=M.useState(!1),[I,P]=M.useState(!1),[z,F]=M.useState({title:"",msg:"",killedId:null}),[ue,Y]=M.useState(null),[ae,C]=M.useState(null),[A,N]=M.useState(!1),L=e.find(ce=>ce.id===n),j=L?.role,H=L?.isAlive;M.useEffect(()=>{const ce=et(We,"rooms",t),he=oc(ce,Ie=>{if(Ie.exists()){const de=Ie.data();de.subPhase&&p(de.subPhase)}}),Ee=et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`),Ae=oc(Ee,Ie=>{Ie.exists()&&T(Ie.data()||{})});return()=>{he(),Ae()}},[t,a]);const D=()=>e.filter(ce=>ce.isAlive&&(ce.role==="mafia"||ce.role==="godfather")),_e=()=>{const ce=[];return Object.entries(y).forEach(([he,Ee])=>{if(he.startsWith("vote_mafia_")&&he!=="vote_mafia_submitted"){const Ae=he.replace("vote_mafia_","");ce.push({voterId:Ae,targetId:Ee})}}),ce},Ne=d==="mafia"?y[`vote_mafia_${n}`]:d==="doctor"?y.action_doctor:y.action_detective,J=()=>{if(d!=="mafia")return!0;D();const ce=_e(),he=new Set(ce.map(Ee=>Ee.targetId));return!(he.size>1||he.size===0)},oe=()=>{if(d!=="mafia")return null;const ce=_e(),he=[...new Set(ce.map(Ee=>Ee.targetId))];return he.size>1?{status:"mismatch",msg:"Votes do not match! Please agree on one target."}:he.size===1?{status:"pending",msg:`Targeting [${e.find(Ae=>Ae.id===he[0])?.name||"Unknown"}]`}:{status:"empty",msg:"Discuss and select a target."}},ne=async(ce,he=!1)=>{if(!he){if(d==="mafia"&&!y.mafia_submitted){alert("Mafia has not submitted their action yet!");return}if(d==="doctor"&&!y.doctor_submitted){alert("Doctor has not submitted their action yet!");return}if(d==="detective"&&!y.detective_submitted){alert("Detective has not submitted their action yet!");return}}await td(et(We,"rooms",t),{subPhase:ce})},ye=()=>{if(d==="detective"&&!y.detective_submitted){alert("Detective has not submitted their action yet!");return}if(d==="mafia"&&!y.mafia_submitted){alert("Mafia has not submitted yet!");return}if(!y.mafia_submitted||!y.doctor_submitted||!y.detective_submitted){alert("All phases (Mafia, Doctor, Detective) must be completed first!");return}_e().length>0&&_e()[0].targetId;const ce=y.action_doctor;let he=null;const Ee=_e();Ee.length>0&&(he=Ee[0].targetId);let Ae=null,Ie="",de="Night Report";if(!he)Ie="Mafia did not select a target.";else{const Le=e.find(it=>it.id===he)?.name||"Unknown";he===ce?Ie=`Mafia targeted ${Le}, but the Doctor saved them! No one died.`:(Ie=`${Le} was killed by the Mafia.`,Ae=he)}F({title:de,msg:Ie,killedId:Ae}),P(!0)},Te=async()=>{z.killedId&&await td(et(We,"rooms",t,"players",z.killedId),{isAlive:!1}),P(!1),c()},U=async ce=>{const he=et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`),Ee=d==="mafia"?`vote_mafia_${n}`:d==="doctor"?"action_doctor":"action_detective";(d==="mafia"?y.mafia_submitted:d==="doctor"?y.doctor_submitted:y.detective_submitted)||await Dt(he,{[Ee]:ce},{merge:!0})},Z=async()=>{const ce=et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`);let he="";d==="mafia"?he="mafia_submitted":d==="doctor"?he="doctor_submitted":d==="detective"&&(he="detective_submitted"),await Dt(ce,{[he]:!0},{merge:!0}),w(!1)},le=ce=>{const he=e.filter(de=>de.isAlive&&de.role!=="presenter"&&ce(de)),Ee=_e(),Ae=d==="mafia"?y.mafia_submitted:d==="doctor"?y.doctor_submitted:y.detective_submitted;let Ie=null;return d==="mafia"?Ie=y?.[`vote_mafia_${n}`]:d==="doctor"?Ie=y?.action_doctor:d==="detective"&&(Ie=y?.action_detective),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginTop:"1rem",width:"100%",paddingBottom:"100px"},children:he.map(de=>{const Le=Ie===de.id,it=d==="mafia"?"var(--danger)":d==="doctor"?"var(--primary)":"var(--warning)",tn=d==="mafia"?"linear-gradient(90deg, rgba(220, 38, 38, 0.2), rgba(220, 38, 38, 0.1))":d==="doctor"?"linear-gradient(90deg, rgba(37, 99, 235, 0.2), rgba(37, 99, 235, 0.1))":"linear-gradient(90deg, rgba(234, 179, 8, 0.2), rgba(234, 179, 8, 0.1))",Gt=d==="mafia"?Ee.filter(wn=>wn.targetId===de.id&&wn.voterId!==n):[];return v.jsxs("button",{onClick:()=>!Ae&&U(de.id),style:{appearance:"none",border:"none",background:Le?tn:"rgba(255,255,255,0.03)",backdropFilter:"blur(10px)",borderRadius:"1.5rem",padding:"0.8rem 1.2rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:Ae?"default":"pointer",border:Le?`1px solid ${it}`:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:Le?"scale(1.02)":"scale(1)",opacity:Ae&&!Le?.5:1},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:Le?it:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:Le?"#fff":"var(--text-dim)"},children:de.name.charAt(0).toUpperCase()}),v.jsx("div",{style:{textAlign:"left"},children:v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:Le?600:400,color:Le?it:"var(--text)",display:"block"},children:de.name})})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Gt.length>0&&v.jsx("div",{style:{display:"flex",marginLeft:"auto",marginRight:Le?"0.5rem":0},children:Gt.map((wn,nn)=>{const Ks=e.find(Zr=>Zr.id===wn.voterId)?.name;return v.jsx("div",{title:`Voted by ${Ks}`,style:{width:"24px",height:"24px",borderRadius:"50%",background:"#555",border:"1px solid #222",color:"#fff",fontSize:"0.6rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:nn>0?"-8px":"0"},children:Ks?.charAt(0)},nn)})}),Le&&v.jsx("div",{style:{background:it,color:"#fff",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx(Vs,{size:16})})]})]},de.id)})})};if(s){const ce=de=>de==="mafia"?!!y.mafia_submitted:de==="doctor"?!!y.doctor_submitted:de==="detective"?!!y.detective_submitted:!1,he=ce(d),Ee=ce("mafia")&&ce("doctor")&&ce("detective"),Ie=["mafia","doctor","detective"].find(de=>!ce(de));return v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",padding:"1rem",height:"100%",justifyContent:"flex-start"},children:[v.jsxs("div",{style:{width:"100%",textAlign:"center",marginBottom:"0.5rem"},children:[v.jsxs("h2",{className:"text-gradient",style:{fontSize:"2.5rem",fontWeight:800,letterSpacing:"2px"},children:["NIGHT ",a]}),v.jsxs("p",{style:{color:"var(--text-dim)",fontSize:"1rem"},children:["Current Phase: ",v.jsx("strong",{style:{color:"var(--primary)",textTransform:"uppercase"},children:d})]}),!he&&d!=="sleep"&&v.jsxs("div",{style:{marginTop:"0.5rem",display:"inline-block",padding:"0.3rem 0.8rem",borderRadius:"1rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255,255,255,0.1)",fontSize:"0.8rem",color:"var(--warning)",display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center"},children:[v.jsx("span",{className:"spinner",style:{width:"12px",height:"12px",borderWidth:"2px"}}),"Waiting for ",d," to submit..."]})]}),v.jsx("div",{className:"glass-panel",style:{padding:"1rem",borderRadius:"1.5rem",display:"flex",gap:"0.8rem",overflowX:"auto",border:"1px solid rgba(255,255,255,0.08)",background:"rgba(26, 26, 46, 0.6)"},children:["mafia","doctor","detective"].map(de=>{const Le=d===de,it=ce(de),tn=de==="mafia"?"var(--danger)":de==="doctor"?"var(--primary)":"var(--warning)",Gt=de==="mafia"?v.jsx(Oa,{size:18}):de==="doctor"?v.jsx(Ef,{size:18}):v.jsx(Du,{size:18}),wn=e.some(nn=>nn.role===de&&nn.isAlive)||de==="mafia"&&e.some(nn=>(nn.role==="mafia"||nn.role==="godfather")&&nn.isAlive);return v.jsxs("button",{onClick:()=>{wn?ne(de):Y(de)},disabled:Le,style:{flex:1,appearance:"none",border:Le?`1px solid ${tn}`:it?`1px solid ${tn}44`:"1px solid rgba(255,255,255,0.1)",background:Le?`linear-gradient(135deg, ${tn}22, ${tn}11)`:"rgba(255,255,255,0.03)",borderRadius:"1rem",padding:"0.8rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:Le?"#fff":it?"var(--text)":"var(--text-dim)",cursor:Le?"default":"pointer",transition:"all 0.2s ease",minWidth:"80px",position:"relative",opacity:!wn&&!Le?.6:1},children:[v.jsx("div",{style:{color:Le||it?tn:"inherit"},children:Gt}),v.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:de}),!wn&&v.jsx("span",{style:{fontSize:"0.6rem",color:"var(--danger)"},children:"(DEAD)"}),it&&v.jsx("div",{style:{position:"absolute",top:"5px",right:"5px"},children:v.jsx(Vs,{size:12,color:tn})})]},de)})}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:[v.jsx("h3",{style:{fontSize:"0.9rem",color:"var(--text-dim)",textTransform:"uppercase",letterSpacing:"1px",marginLeft:"0.5rem"},children:"Live Actions"}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.2rem",borderRadius:"1.2rem",borderLeft:"4px solid var(--danger)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.8rem"},children:[v.jsxs("h4",{style:{color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[v.jsx(Oa,{size:16,color:"var(--danger)"})," Mafia Target"]}),y.mafia_submitted&&v.jsx(Vs,{size:16,color:"var(--success)"})]}),Object.keys(y).filter(de=>de.startsWith("vote_mafia_")&&de!=="vote_mafia_submitted").length===0?v.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-dim)",fontStyle:"italic"},children:"Waiting for votes..."}):v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(y).filter(([de])=>de.startsWith("vote_mafia_")&&de!=="vote_mafia_submitted").map(([de,Le])=>{const it=e.find(Gt=>Gt.id===de.replace("vote_mafia_","")),tn=e.find(Gt=>Gt.id===Le);return v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(220, 38, 38, 0.1)",padding:"0.5rem 0.8rem",borderRadius:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"0.85rem"},children:it?.name}),v.jsx(u0,{size:12,style:{opacity:.5}}),v.jsx("span",{style:{fontSize:"0.85rem",fontWeight:600,color:"var(--danger)"},children:tn?.name})]},de)})})]}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.2rem",borderRadius:"1.2rem",borderLeft:"4px solid var(--primary)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.8rem"},children:[v.jsxs("h4",{style:{color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[v.jsx(Ef,{size:16,color:"var(--primary)"})," Doctor Save"]}),y.doctor_submitted&&v.jsx(Vs,{size:16,color:"var(--success)"})]}),y.action_doctor?v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(37, 99, 235, 0.1)",padding:"0.5rem 0.8rem",borderRadius:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-dim)"},children:"Protected:"}),v.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--primary)"},children:e.find(de=>de.id===y.action_doctor)?.name})]}):v.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-dim)",fontStyle:"italic"},children:"Pending..."})]}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.2rem",borderRadius:"1.2rem",borderLeft:"4px solid var(--warning)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.8rem"},children:[v.jsxs("h4",{style:{color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[v.jsx(Du,{size:16,color:"var(--warning)"})," Investigation"]}),y.detective_submitted&&v.jsx(Vs,{size:16,color:"var(--success)"})]}),y.action_detective?v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(234, 179, 8, 0.1)",padding:"0.5rem 0.8rem",borderRadius:"0.5rem"},children:[v.jsx("div",{children:v.jsxs("span",{style:{fontSize:"0.85rem",display:"block"},children:["Subject: ",v.jsx("strong",{children:e.find(de=>de.id===y.action_detective)?.name})]})}),v.jsx("span",{style:{fontSize:"0.75rem",fontWeight:700,textTransform:"uppercase",color:"var(--warning)",border:"1px solid var(--warning)",padding:"2px 6px",borderRadius:"4px"},children:e.find(de=>de.id===y.action_detective)?.role==="godfather"?"CITIZEN":e.find(de=>de.id===y.action_detective)?.role})]}):v.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-dim)",fontStyle:"italic"},children:"Pending..."})]})]}),v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"0.9rem",color:"var(--text-dim)",textTransform:"uppercase",letterSpacing:"1px",marginLeft:"0.5rem",marginBottom:"0.5rem"},children:"Player Status"}),v.jsx("div",{className:"custom-scrollbar",style:{maxHeight:"200px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.filter(de=>de.role!=="presenter").map(de=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.8rem 1rem",background:"rgba(255,255,255,0.03)",borderRadius:"0.8rem",border:"1px solid rgba(255,255,255,0.05)",opacity:de.isAlive?1:.5},children:[v.jsx("span",{style:{fontWeight:500,fontSize:"0.95rem"},children:de.name}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"0.7rem",fontWeight:700,textTransform:"uppercase",color:de.roleData?.color||"#999"},children:de.role}),!de.isAlive&&v.jsx(Oa,{size:14,color:"var(--text-dim)"})]})]},de.id))})]}),v.jsx(Qa,{children:d==="detective"&&y.detective_submitted&&!y.detective_result&&v.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(5px)",zIndex:200,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:v.jsxs(tt.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"glass-panel",style:{width:"100%",maxWidth:"400px",padding:"2rem",borderRadius:"1.5rem",textAlign:"center",border:"1px solid var(--warning)",background:"rgba(20, 20, 30, 0.95)"},children:[v.jsx(Du,{size:48,color:"var(--warning)",style:{marginBottom:"1rem"}}),e.find(de=>de.id===y.action_detective)?.role==="godfather"?v.jsxs(v.Fragment,{children:[v.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:"Godfather Investigated!"}),v.jsxs("p",{style:{marginBottom:"2rem",opacity:.8},children:["The Detective has chosen the Godfather. ",v.jsx("br",{}),"What result should they see?"]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsxs("button",{className:"btn-glass",onClick:()=>Dt(et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`),{detective_result:"thumbs_up"},{merge:!0}),style:{border:"1px solid var(--danger)",padding:"1.5rem",flexDirection:"column",gap:"0.5rem"},children:[v.jsx(hg,{size:32,color:"var(--danger)"}),v.jsx("span",{style:{color:"var(--danger)",fontWeight:600},children:"Show Guilty"})]}),v.jsxs("button",{className:"btn-glass",onClick:()=>Dt(et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`),{detective_result:"thumbs_down"},{merge:!0}),style:{border:"1px solid var(--success)",padding:"1.5rem",flexDirection:"column",gap:"0.5rem"},children:[v.jsx(cg,{size:32,color:"var(--success)"}),v.jsx("span",{style:{color:"var(--success)",fontWeight:600},children:"Show Innocent"})]})]})]}):v.jsxs(v.Fragment,{children:[v.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:"Standard Investigation"}),v.jsxs("p",{style:{marginBottom:"2rem",opacity:.8},children:["Detective chose: ",v.jsx("strong",{children:e.find(de=>de.id===y.action_detective)?.name})]}),(()=>{const de=e.find(it=>it.id===y.action_detective),Le=de?.role==="mafia";return v.jsx("div",{style:{marginBottom:"2rem"},children:v.jsxs("div",{style:{background:Le?"rgba(220, 38, 38, 0.2)":"rgba(34, 197, 94, 0.2)",padding:"1rem",borderRadius:"1rem",border:Le?"1px solid var(--danger)":"1px solid var(--success)"},children:[v.jsxs("h4",{style:{margin:0,color:Le?"var(--danger)":"var(--success)",textTransform:"uppercase"},children:["Actual Role: ",de?.role]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginTop:"1rem"},children:[Le?v.jsx(hg,{size:32}):v.jsx(cg,{size:32}),v.jsxs("span",{children:["Show ",Le?"THUMBS UP":"THUMBS DOWN"]})]})]})})})(),v.jsx("button",{className:"btn-primary",onClick:()=>{const Le=e.find(it=>it.id===y.action_detective)?.role==="mafia"?"thumbs_up":"thumbs_down";Dt(et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`),{detective_result:Le},{merge:!0})},style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:"Confirm Signal Shown"})]})]})})}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem",marginTop:"auto"},children:[Ee?v.jsx("button",{className:"btn-primary",onClick:()=>O(!0),style:{width:"100%",background:"linear-gradient(135deg, var(--success), var(--primary))",fontSize:"1.1rem",padding:"1rem"},children:"End Night Phase"}):v.jsxs("button",{className:"btn-primary",onClick:()=>{Ie&&ne(Ie)},style:{width:"100%",background:"linear-gradient(135deg, var(--secondary), var(--primary))",fontSize:"1.1rem",padding:"1rem"},children:["Go to ",Ie?Ie.toUpperCase():"Next"," Phase"]}),v.jsx("button",{className:"btn-ghost",onClick:()=>N(!0),style:{display:"block",margin:"1rem auto 0",width:"100%",color:"var(--danger)",borderColor:"var(--danger)",opacity:.8,padding:"0.8rem"},children:"Reset Game"}),v.jsx(oi,{isOpen:V,onCancel:()=>O(!1),onConfirm:()=>{O(!1),ye()},title:d==="detective"?"End Night Phase?":"Next Phase?",message:`Proceed to ${d==="detective"?"Night Report":"next action"}?`,confirmText:"Proceed"}),v.jsx(oi,{isOpen:I,onCancel:()=>P(!1),onConfirm:Te,title:z.title,message:z.msg,confirmText:"Start Day"}),v.jsx(oi,{isOpen:!!ue,onCancel:()=>Y(null),onConfirm:()=>{ne(ue,!0),Y(null),C(ue)},title:`Start ${ue?.toUpperCase()} Phase?`,message:`The ${ue} is eliminated. Do you want to start a "Ghost Phase" to bluff the players?`,confirmText:"Start Ghost Phase"}),v.jsx(oi,{isOpen:!!ae,onCancel:()=>{},onConfirm:async()=>{const de=ae,Le=et(We,"rooms",t,"actions",`night_${a}_${l||"legacy"}`);let it="";de==="mafia"?it="mafia_submitted":de==="doctor"?it="doctor_submitted":de==="detective"&&(it="detective_submitted"),await Dt(Le,{[it]:!0},{merge:!0}),C(null)},title:`Bluffing ${ae?.toUpperCase()}...`,message:"The players are waiting. Pretend to manage the phase...",confirmText:"Conclude Bluff",isDanger:!1}),v.jsx(oi,{isOpen:A,onCancel:()=>N(!1),onConfirm:()=>{N(!1),f()},title:"Reset Game?",message:"This will take everyone back to the lobby, clear all roles, and restart from scratch.",confirmText:"Reset Game",isDanger:!0})]})]})}if((d==="mafia"&&(j==="mafia"||j==="godfather")||d==="doctor"&&j==="doctor"||d==="detective"&&j==="detective")&&H){const ce=oe(),he=Ne&&(d!=="mafia"||J()),Ee=d==="mafia"?y.mafia_submitted:d==="doctor"?y.doctor_submitted:y.detective_submitted;return v.jsxs("div",{className:"flex-col-center",style:{padding:"2rem",paddingBottom:"120px"},children:[v.jsx("h2",{className:"text-gradient",children:"Wake Up!"}),v.jsx("p",{style:{marginBottom:"1rem"},children:"It's your turn to act."}),d==="mafia"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[v.jsx(Oa,{size:32,color:"var(--danger)"}),v.jsx("h3",{style:{margin:0},children:"Eliminate Target"})]}),ce&&!Ee&&v.jsxs("div",{style:{width:"100%",padding:"0.8rem",marginBottom:"1rem",borderRadius:"1rem",background:ce.status==="mismatch"?"rgba(220, 38, 38, 0.2)":"rgba(255,255,255,0.05)",border:ce.status==="mismatch"?"1px solid var(--danger)":"1px solid rgba(255,255,255,0.1)",color:ce.status==="mismatch"?"var(--danger)":"var(--text)",textAlign:"center",fontSize:"0.9rem",fontWeight:600},children:[ce.status==="mismatch"&&v.jsx(gc,{size:16,style:{verticalAlign:"middle",marginRight:"5px"}}),ce.msg]}),le(Ae=>Ae.id!==n)]}),d==="doctor"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[v.jsx(Ef,{size:32,color:"var(--primary)"}),v.jsx("h3",{style:{margin:0},children:"Save Player"})]}),le(()=>!0)]}),d==="detective"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[v.jsx(Du,{size:32,color:"var(--warning)"}),v.jsx("h3",{style:{margin:0},children:"Investigate Validity"})]}),le(Ae=>Ae.id!==n)]}),Ee&&d!=="detective"&&v.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"1rem",background:"rgba(34, 197, 94, 0.1)",border:"1px solid var(--success)",color:"var(--success)",display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx(Vs,{size:24}),v.jsxs("div",{children:[v.jsx("strong",{children:"Decision Submitted"}),v.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.8},children:"Waiting for night to end..."})]})]}),Ee&&d==="detective"&&v.jsx("div",{style:{marginTop:"2rem",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:(()=>{if(e.find(Ie=>Ie.id===Ne),!y.detective_result)return v.jsxs("div",{className:"glass-panel",style:{padding:"2rem",textAlign:"center",width:"100%"},children:[v.jsx("div",{className:"spinner",style:{margin:"0 auto 1rem",width:"30px",height:"30px"}}),v.jsx("p",{style:{fontWeight:600},children:"Analyzing Evidence..."}),v.jsx("p",{style:{fontSize:"0.8rem",opacity:.6,marginTop:"0.5rem"},children:"(The Host is verifying...)"})]});let Ae="innocent";return y.detective_result==="thumbs_up"&&(Ae="guilty"),y.detective_result==="thumbs_down"&&(Ae="innocent"),v.jsx(tt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"glass-panel",style:{padding:"2rem",textAlign:"center",width:"100%",border:Ae==="guilty"?"2px solid var(--danger)":"2px solid var(--success)",background:Ae==="guilty"?"rgba(220, 38, 38, 0.1)":"rgba(34, 197, 94, 0.1)"},children:Ae==="guilty"?v.jsxs(v.Fragment,{children:[v.jsx(hg,{size:64,color:"var(--danger)",style:{marginBottom:"1rem"}}),v.jsx("h3",{style:{color:"var(--danger)",fontSize:"1.5rem",marginBottom:"0.5rem",textTransform:"uppercase"},children:"IS MAFIA"})]}):v.jsxs(v.Fragment,{children:[v.jsx(cg,{size:64,color:"var(--success)",style:{marginBottom:"1rem"}}),v.jsx("h3",{style:{color:"var(--success)",fontSize:"1.5rem",marginBottom:"0.5rem",textTransform:"uppercase"},children:"NOT MAFIA"})]})})})()}),!Ee&&v.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,padding:"1.5rem",background:"rgba(15, 15, 26, 0.95)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center",zIndex:100},children:v.jsx("button",{className:"btn-primary",disabled:!he,onClick:()=>w(!0),style:{width:"100%",maxWidth:"400px",background:he?"linear-gradient(135deg, var(--secondary), var(--primary))":"#333",opacity:he?1:.5,cursor:he?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},children:"Confirm Decision"})}),v.jsx(oi,{isOpen:E,onCancel:()=>w(!1),onConfirm:Z,title:"Confirm Action?",message:d==="mafia"?`Are you sure you want to eliminate ${e.find(Ae=>Ae.id===Ne)?.name}?`:d==="doctor"?`Are you sure you want to save ${e.find(Ae=>Ae.id===Ne)?.name}?`:`Are you sure you want to investigate ${e.find(Ae=>Ae.id===Ne)?.name}?`,confirmText:"Yes, Confirm"})]})}return v.jsxs("div",{className:"flex-col-center",style:{height:"80vh"},children:[v.jsx(FP,{size:64,style:{color:"var(--text-dim)",marginBottom:"2rem"}}),v.jsx("h2",{style:{color:"var(--text-dim)"},children:"Night Phase"}),v.jsx("p",{children:"Close your eyes..."})]})}function Hz({roomCode:t,players:e,currentUser:n,isHost:s,dayCount:a,gameId:l,onEndDay:c,onResetGame:f}){const[d,p]=M.useState({}),[y,T]=M.useState(null),[E,w]=M.useState(!1),[V,O]=M.useState(!1),[I,P]=M.useState(!1),[z,F]=M.useState({title:"",msg:"",eliminatedId:null}),[ue,Y]=M.useState(!1),[ae,C]=M.useState({title:"",msg:""});M.useEffect(()=>{const ne=et(We,"rooms",t,"actions",`day_${a}_${l||"legacy"}`),ye=oc(ne,Te=>{Te.exists()&&p(Te.data())});return()=>ye()},[t,a]);const N=e.find(ne=>ne.id===n)?.isAlive,L=d[`${n}_submitted`],j=ne=>{L||!N||T(ne)},H=async()=>{if(!y)return;const ne=et(We,"rooms",t,"actions",`day_${a}_${l||"legacy"}`);await Dt(ne,{[n]:y,[`${n}_submitted`]:!0},{merge:!0}),w(!1)},D=()=>{const ne={};Object.keys(d).forEach(le=>{if(!le.endsWith("_submitted")){const me=d[le];ne[me]=(ne[me]||0)+1}});let ye=0,Te=null,U=!1;Object.entries(ne).forEach(([le,me])=>{me>ye?(ye=me,Te=le,U=!1):me===ye&&(U=!0)});const Z=e.find(le=>le.id===Te)?.name||"Unknown";C(U||!Te?{title:"No Elimination?",msg:"Vote result is a TIE or EMPTY. No one will be eliminated. End Day?"}:{title:"Eliminate Player?",msg:`Player ${Z} has the most votes (${ye}). Eliminate them?`}),O(!0)},_e=()=>{const ne={};Object.keys(d).forEach(ce=>{if(!ce.endsWith("_submitted")){const he=d[ce];ne[he]=(ne[he]||0)+1}});let ye=0,Te=null,U=!1;Object.entries(ne).sort((ce,he)=>he[1]-ce[1]).forEach(([ce,he],Ee)=>{Ee===0?(ye=he,Te=ce):he===ye&&(U=!0)});let Z="Day Report",le="",me=null;U||!Te?le="Vote result is a TIE or EMPTY. No one eliminated.":(le=`Town has voted to eliminate ${e.find(he=>he.id===Te)?.name||"Unknown"}.`,me=Te),F({title:Z,msg:le,eliminatedId:me}),O(!1),P(!0)},Ne=()=>{c(z.eliminatedId),P(!1)},J=()=>{const ne={};return Object.keys(d).forEach(ye=>{if(!ye.endsWith("_submitted")){const Te=d[ye];ne[Te]=(ne[Te]||0)+1}}),ne},oe=()=>{const ne=e.filter(U=>U.isAlive&&U.role!=="presenter"),ye=J(),Te=L?d[n]:y;return v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginTop:"1rem",width:"100%",paddingBottom:"100px"},children:ne.map(U=>{const Z=Te===U.id,le=ye[U.id]||0;return v.jsxs("button",{onClick:()=>!s&&j(U.id),disabled:!N||s||L,style:{appearance:"none",border:"none",background:Z?"linear-gradient(90deg, rgba(var(--primary-rgb), 0.2), rgba(var(--primary-rgb), 0.1))":"rgba(255,255,255,0.03)",backdropFilter:"blur(10px)",borderRadius:"1.5rem",padding:"0.8rem 1.2rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:N&&!s&&!L?"pointer":"default",border:Z?"1px solid var(--primary)":"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:Z?"scale(1.02)":"scale(1)",opacity:N?1:.6},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:Z?"var(--primary)":"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:Z?"#fff":"var(--text-dim)"},children:U.name.charAt(0).toUpperCase()}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:Z?600:400,color:Z?"var(--primary)":"var(--text)"},children:U.name})]}),s&&le>0&&v.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",color:"var(--text)",borderRadius:"1rem",padding:"0.2rem 0.6rem",fontSize:"0.8rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.3rem"},children:[v.jsx(Kw,{size:12})," ",le]}),!s&&Z&&v.jsx("div",{style:{background:"var(--primary)",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:L?v.jsx(Vs,{size:14}):v.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#fff"}})})]},U.id)})})};if(s){const ne=e.filter(Te=>Te.isAlive&&Te.role!=="presenter").length,ye=Object.keys(d).filter(Te=>Te.endsWith("_submitted")).length;return v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",padding:"1rem",height:"100%",justifyContent:"flex-start"},children:[v.jsxs("div",{style:{width:"100%",textAlign:"center",marginBottom:"0.5rem"},children:[v.jsxs("h2",{className:"text-gradient",style:{fontSize:"2.5rem",fontWeight:800,letterSpacing:"2px"},children:["DAY ",a]}),v.jsx("p",{style:{color:"var(--text-dim)",fontSize:"1rem"},children:"Town Hall Voting"})]}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.5rem",borderRadius:"1.5rem",textAlign:"center"},children:[v.jsx("h3",{style:{fontSize:"0.9rem",color:"var(--text-dim)",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"1rem"},children:"Live Status"}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"2rem"},children:[v.jsxs("div",{children:[v.jsxs("span",{style:{fontSize:"2rem",fontWeight:800,display:"block",lineHeight:1},children:[ye,"/",ne]}),v.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-dim)"},children:"Votes Cast"})]}),v.jsx("div",{style:{width:"1px",height:"40px",background:"rgba(255,255,255,0.1)"}}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"2rem",fontWeight:800,display:"block",lineHeight:1},children:ne}),v.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-dim)"},children:"Alive"})]})]})]}),v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"0.9rem",color:"var(--text-dim)",textTransform:"uppercase",letterSpacing:"1px",marginLeft:"0.5rem",marginBottom:"0.5rem"},children:"Votes & Roles"}),v.jsx("div",{className:"custom-scrollbar",style:{maxHeight:"300px",overflowY:"auto"},children:oe()})]}),v.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem",marginTop:"auto"},children:[v.jsx("button",{className:"btn-primary",onClick:D,style:{width:"100%",background:"linear-gradient(135deg, var(--secondary), var(--primary))",fontSize:"1.1rem",padding:"1rem"},children:"Resolve & End Day"}),v.jsx("p",{style:{textAlign:"center",fontSize:"0.8rem",color:"var(--text-dim)",marginTop:"0.5rem"},children:"Clicking this will automatically eliminate the most voted player."}),v.jsx("button",{className:"btn-ghost",onClick:()=>Y(!0),style:{display:"block",margin:"1rem auto 0",width:"100%",color:"var(--danger)",borderColor:"var(--danger)",opacity:.8,padding:"0.8rem"},children:"Reset Game"}),v.jsx(oi,{isOpen:V,onCancel:()=>O(!1),onConfirm:_e,title:ae.title,message:ae.msg,confirmText:"Resolve & End Day"}),v.jsx(oi,{isOpen:I,onCancel:()=>P(!1),onConfirm:Ne,title:z.title,message:z.msg,confirmText:"Start Night"}),v.jsx(oi,{isOpen:ue,onCancel:()=>Y(!1),onConfirm:()=>{Y(!1),f()},title:"Reset Game?",message:"This will take everyone back to the lobby, clear all roles, and restart from scratch.",confirmText:"Reset Game",isDanger:!0})]})]})}return v.jsxs("div",{className:"flex-col-center",style:{padding:"1rem",height:"100%",justifyContent:"flex-start"},children:[v.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[v.jsx(nk,{size:48,color:"var(--warning)",style:{marginBottom:"1rem"}}),v.jsxs("h2",{className:"text-gradient",children:["Day ",a]}),v.jsx("p",{style:{color:"var(--text-dim)"},children:"Discuss and vote to eliminate a suspect."}),!N&&v.jsx("span",{style:{color:"var(--danger)",fontWeight:"bold"},children:"(You are dead)"})]}),oe(),L&&v.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",borderRadius:"1rem",background:"rgba(34, 197, 94, 0.1)",border:"1px solid var(--success)",color:"var(--success)",display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx(Vs,{size:24}),v.jsxs("div",{children:[v.jsx("strong",{children:"Vote Submitted"}),v.jsx("p",{style:{margin:0,fontSize:"0.8rem",opacity:.8},children:"Waiting for others..."})]})]}),!L&&N&&v.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,padding:"1.5rem",background:"rgba(15, 15, 26, 0.95)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center",zIndex:100},children:v.jsx("button",{className:"btn-primary",disabled:!y,onClick:()=>w(!0),style:{width:"100%",maxWidth:"400px",background:y?"linear-gradient(135deg, var(--secondary), var(--primary))":"#333",opacity:y?1:.5,cursor:y?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},children:"Confirm Vote"})}),v.jsx(oi,{isOpen:E,onCancel:()=>w(!1),onConfirm:H,title:"Confirm Vote?",message:`Are you sure you want to vote for ${e.find(ne=>ne.id===y)?.name}? This cannot be changed later.`,confirmText:"Yes, Vote"})]})}function qz({onBack:t,autoConnect:e=!1}){const[n,s]=M.useState("lobby"),[a,l]=M.useState(null),[c,f]=M.useState(!1),[d,p]=M.useState(null),[y,T]=M.useState(""),[E,w]=M.useState([]),[V,O]=M.useState({night:1,day:0}),[I,P]=M.useState(null);M.useEffect(()=>{if(ZL(Uz).then(D=>{p(D.user.uid)}).catch(D=>console.error("Auth failed",D)),e){const D=localStorage.getItem("mafia_room_code");D&&l(D)}},[e]);const z=async D=>{if(!D)return;const _e=Math.floor(1e5+Math.random()*9e5).toString();try{await Dt(et(We,"rooms",_e),{createdAt:new Date,hostId:d,status:"lobby",phaseData:{},gameId:Date.now(),settings:{detailedMode:!1}}),await Dt(et(We,"rooms",_e,"players",d),{name:D,isHost:!0,role:null,isAlive:!0,joinedAt:new Date}),l(_e),T(D),f(!0),s("lobby"),localStorage.setItem("mafia_room_code",_e),localStorage.setItem("active_session_type","mafia_multi")}catch(Ne){console.error("Error creating room:",Ne),alert("Failed to create room: "+Ne.message)}},F=async(D,_e)=>{if(!(!D||!_e))try{const Ne=et(We,"rooms",_e);if(!(await gL(Ne)).exists()){alert("Room not found!");return}await Dt(et(We,"rooms",_e,"players",d),{name:D,isHost:!1,role:null,isAlive:!0,joinedAt:new Date}),l(_e),T(D),f(!1),s("lobby"),localStorage.setItem("mafia_room_code",_e),localStorage.setItem("active_session_type","mafia_multi")}catch(Ne){console.error("Error joining room:",Ne),alert("Failed to join: "+Ne.message)}},ue=async()=>{await Dt(et(We,"rooms",a),{status:"setup"},{merge:!0})},Y=async D=>{await Dt(et(We,"rooms",a),{"settings.detailedMode":D.detailedMode},{merge:!0});const _e=D.assignments.find(ne=>ne.role==="presenter"),Ne=_e?_e.player.id:null,oe=D.assignments.map(ne=>{const{icon:ye,...Te}=ne.roleData;return{pid:ne.player.id,role:ne.role,roleData:Te}}).map(ne=>{const ye=ne.pid===Ne;return Dt(et(We,"rooms",a,"players",ne.pid),{role:ne.role,roleData:ne.roleData,isHost:ye},{merge:!0})});Ne&&oe.push(Dt(et(We,"rooms",a),{hostId:Ne},{merge:!0})),await Promise.all(oe),await Dt(et(We,"rooms",a),{status:"reveal"},{merge:!0})},ae=async()=>{const D=n==="day"?Number(V.night||1)+1:1;await Dt(et(We,"rooms",a),{status:"night",nightCount:D,subPhase:"sleep"},{merge:!0})},C=async()=>{const D=(V.day||0)+1;await Dt(et(We,"rooms",a),{status:"day",dayCount:D},{merge:!0})},A=async D=>{if(D){console.log("Processing Elimination:",D);try{await td(et(We,"rooms",a,"players",D),{isAlive:!1}),console.log("Elimination successful")}catch(_e){console.error("Failed to eliminate player:",_e),await Dt(et(We,"rooms",a,"players",D),{isAlive:!1},{merge:!0})}}ae()},N=async()=>{try{await Dt(et(We,"rooms",a),{status:"lobby",nightCount:1,dayCount:0,phaseData:{},gameId:Date.now(),actions:{}},{merge:!0});const D=E.map(_e=>!_e.isAlive&&!_e.isHost?yL(et(We,"rooms",a,"players",_e.id)):Dt(et(We,"rooms",a,"players",_e.id),{role:null,roleData:{},isAlive:!0,isHost:_e.isHost},{merge:!0}));await Promise.all(D)}catch(D){console.error("Error resetting game:",D),alert("Failed to reset game.")}};M.useEffect(()=>{if(!a)return;const D=fL(J6(We,"rooms",a,"players")),_e=oc(D,oe=>{const ne=[];oe.forEach(ye=>{ne.push({id:ye.id,...ye.data()})}),w(ne)}),Ne=et(We,"rooms",a),J=oc(Ne,oe=>{if(oe.exists()){const ne=oe.data();s(ne.status),O({night:Number(ne.nightCount)||1,day:Number(ne.dayCount)||0}),P(ne.gameId||"legacy")}});return()=>{_e(),J()}},[a]),M.useEffect(()=>{if(d&&E.length>0){const D=E.find(_e=>_e.id===d);D&&(f(D.isHost||!1),D.isAlive||localStorage.removeItem("active_session_type"))}},[E,d]);const j=E.find(D=>D.id===d)?.role==="presenter",H=()=>{a&&(localStorage.removeItem("mafia_room_code"),localStorage.removeItem("active_session_type")),t()};return v.jsxs("div",{style:{padding:"1rem",height:"100%"},children:[n==="lobby"&&v.jsx(zz,{roomCode:a,players:E,isHost:c,onCreate:z,onJoin:F,onBack:H,onStartSetup:ue,currentUser:d}),n==="setup"&&(c?v.jsx(Gz,{players:E,onNext:Y,onBack:()=>Dt(et(We,"rooms",a),{status:"lobby"},{merge:!0})}):v.jsxs("div",{className:"flex-col-center",style:{height:"70vh"},children:[v.jsx("h2",{className:"text-gradient",children:"Setup In Progress"}),v.jsxs("p",{style:{color:"var(--text-dim)",textAlign:"center",marginTop:"1rem"},children:["The host is assigning roles...",v.jsx("br",{}),"Stay tuned!"]})]})),n==="reveal"&&v.jsx(Bz,{player:E.find(D=>D.id===d),players:E,roomCode:a,isHost:c||j,onStartGame:ae,onResetGame:N}),n==="night"&&v.jsx(Fz,{roomCode:a,players:E,currentUser:d,isHost:j,nightCount:V.night,gameId:I,onEndNight:C,onResetGame:N}),n==="day"&&v.jsx(Hz,{roomCode:a,players:E,currentUser:d,isHost:j,dayCount:V.day,gameId:I,onEndDay:A,onResetGame:N})]})}function Gz({players:t,onNext:e,onBack:n}){return v.jsx(tA,{players:t,onNext:e,onBack:n})}function $z(){const[t,e]=M.useState("landing"),[n,s]=M.useState(null),[a,l]=M.useState(!1),[c,f]=M.useState([]),[d,p]=M.useState({}),[y,T]=M.useState([]),E=z=>{s(z),e(z==="single"?"setup":"multiplayer")},w=z=>{f(z),e("config")},V=z=>{p(z.counts),T(z.assignments),e("reveal")},O=()=>{const z=localStorage.getItem("mafia_single_session");if(z)try{const F=JSON.parse(z);F.gameMode==="single"&&(s("single"),f(F.players||[]),p(F.roleCounts||{}),T(F.assignments||[]),e(F.stage||"landing"))}catch(F){console.error("Failed to restore session",F),localStorage.removeItem("mafia_single_session")}},I=Oi();M.useEffect(()=>{if(new URLSearchParams(I.search).get("resume")==="true"){const F=localStorage.getItem("active_session_type");F==="mafia_multi"?(l(!0),s("multi"),e("multiplayer")):F==="mafia_single"&&O()}},[I]),M.useEffect(()=>{if(n==="single"&&t!=="landing"){const z={gameMode:n,stage:t,players:c,roleCounts:d,assignments:y};localStorage.setItem("mafia_single_session",JSON.stringify(z)),localStorage.setItem("active_session_type","mafia_single")}},[n,t,c,d,y]);const P=()=>{e("dashboard")};return v.jsx("div",{style:{width:"100%",maxWidth:"600px",margin:"0 auto",paddingBottom:"2rem"},children:v.jsxs(Qa,{mode:"wait",children:[t==="landing"&&v.jsx(gk,{onSelectMode:E,onResume:O},"landing"),t==="setup"&&v.jsx(dk,{onNext:w},"setup"),t==="config"&&v.jsx(tA,{players:c,onNext:V,onBack:()=>e("setup")},"config"),t==="reveal"&&v.jsx(mk,{assignments:y,onComplete:P},"reveal"),t==="dashboard"&&v.jsx(pk,{assignments:y,onNewGame:()=>{localStorage.removeItem("mafia_single_session"),localStorage.removeItem("mafia_timer_state"),localStorage.removeItem("active_session_type"),e("setup"),s("single")}},"dashboard"),t==="multiplayer"&&v.jsx(qz,{onBack:()=>{e("landing"),l(!1)},autoConnect:a})]})})}function Kz({onStart:t}){const[e,n]=M.useState(["Player 1","Player 2"]),[s,a]=M.useState("prepend"),[l,c]=M.useState({prependVal:1,appendVal:0}),[f,d]=M.useState([{id:"h",text:"Hearts"},{id:"d",text:"Diamonds"},{id:"c",text:"Clubs"},{id:"s",text:"Spades"},{id:"n",text:"No Trump"}]),p=()=>{const P=Math.random().toString(36).substr(2,9);d([...f,{id:P,text:"New Trump"}])},y=P=>{d(f.filter(z=>z.id!==P))},T=(P,z)=>{d(f.map(F=>F.id===P?{...F,text:z}:F))},E=()=>{const P=e.map(F=>F.trim()).filter(F=>F.length>0);if(P.length<2)return;const z={type:s,prependVal:parseInt(l.prependVal)||1,appendVal:parseInt(l.appendVal)||0,trumps:f.map(F=>F.text)};t(P,z)},w=()=>n([...e,`Player ${e.length+1}`]),V=(P,z)=>{const F=[...e];F[P]=z,n(F)},O=P=>n(e.filter((z,F)=>F!==P)),I=P=>P.target.select();return v.jsxs(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:-20},className:"setup-screen",children:[v.jsxs("header",{style:{marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h2",{className:"text-gradient",style:{fontSize:"2.5rem"},children:"Judgement Setup"}),v.jsx("p",{style:{color:"var(--text-dim)"},children:"Add players and configure rules"})]}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.5rem",borderRadius:"1rem",marginBottom:"2rem",display:"flex",flexDirection:"column"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"Players"}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",maxHeight:"200px",overflowY:"auto",paddingRight:"0.5rem"},children:e.map((P,z)=>v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("input",{value:P,onChange:F=>V(z,F.target.value),onFocus:I,style:{flex:1,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",padding:"0.8rem",borderRadius:"0.5rem",color:"white"}}),e.length>2&&v.jsx("button",{onClick:()=>O(z),className:"btn-icon",style:{color:"var(--danger)",background:"transparent",border:"none",cursor:"pointer"},children:v.jsx(gc,{})})]},z))}),v.jsxs("button",{onClick:w,className:"btn-ghost",style:{marginTop:"1rem",borderStyle:"dashed",width:"100%"},children:[v.jsx(Ua,{size:18,style:{marginRight:"0.5rem"}})," Add Player"]})]}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.5rem",borderRadius:"1rem",marginBottom:"2rem"},children:[v.jsxs("h3",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Xw,{size:18})," Scoring Rules"]}),v.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:[{id:"prepend",label:"Prepend Mode"},{id:"append",label:"Append Mode"}].map(P=>v.jsx("button",{onClick:()=>a(P.id),style:{background:s===P.id?"var(--primary)":"transparent",border:`1px solid ${s===P.id?"var(--primary)":"var(--surface-highlight)"}`,color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",flex:1},children:P.label},P.id))}),v.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"1rem",borderRadius:"0.5rem"},children:[s==="prepend"&&v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{fontWeight:"bold"},children:"Prepend Value"}),v.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-dim)"},children:"Adds this digit before score (e.g. 1 - 13)"})]}),v.jsx("input",{type:"number",value:l.prependVal,onChange:P=>c({...l,prependVal:P.target.value}),style:{width:"60px",padding:"0.5rem",borderRadius:"0.3rem",border:"none",textAlign:"center"}})]}),s==="append"&&v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{fontWeight:"bold"},children:"Append Value"}),v.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-dim)"},children:"Appends this digit (e.g. 0 - 30)"})]}),v.jsx("input",{type:"number",value:l.appendVal,onChange:P=>c({...l,appendVal:P.target.value}),style:{width:"60px",padding:"0.5rem",borderRadius:"0.3rem",border:"none",textAlign:"center"}})]})]}),v.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"var(--text-dim)"},children:[s==="prepend"&&`Formula: ${l.prependVal}0 + Bid. (Example: Bid 3 = ${parseInt(l.prependVal||0)*10+3})`,s==="append"&&`Formula: Bid  10 + ${l.appendVal}. (Example: Bid 3 = ${30+parseInt(l.appendVal||0)})`]})]}),v.jsxs("div",{className:"glass-panel",style:{padding:"1.5rem",borderRadius:"1rem",marginBottom:"2rem"},children:[v.jsx("h3",{style:{marginBottom:"1rem"},children:"Trump Order"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-dim)",marginBottom:"1rem"},children:"Drag to reorder. These will cycle automatically each round."}),v.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",paddingRight:"0.5rem"},children:v.jsx(ZO,{axis:"y",values:f,onReorder:d,style:{listStyle:"none",padding:0,display:"flex",flexDirection:"column",gap:"0.5rem"},children:f.map(P=>v.jsx(Yz,{trump:P,updateTrump:T,removeTrump:y,handleFocus:I},P.id))})}),v.jsxs("button",{onClick:p,className:"btn-ghost",style:{marginTop:"1rem",borderStyle:"dashed",width:"100%"},children:[v.jsx(Ua,{size:18,style:{marginRight:"0.5rem"}})," Add Trump Card"]})]}),v.jsxs("button",{onClick:E,className:"btn-primary",style:{width:"100%",fontSize:"1.2rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:["Start Game ",v.jsx(yd,{})]})]})}function Yz({trump:t,updateTrump:e,removeTrump:n,handleFocus:s}){const a=XO();return v.jsxs(iP,{value:t,dragListener:!1,dragControls:a,style:{background:"rgba(255,255,255,0.05)",borderRadius:"0.5rem",display:"flex",alignItems:"center",padding:"0.5rem"},children:[v.jsx("div",{onPointerDown:l=>a.start(l),style:{cursor:"grab",marginRight:"0.5rem",touchAction:"none",padding:"0.5rem"},children:v.jsx(NP,{size:20,style:{color:"var(--text-dim)"}})}),v.jsx("input",{value:t.text,onChange:l=>e(t.id,l.target.value),onFocus:s,style:{flex:1,background:"transparent",border:"none",color:"white",fontSize:"1rem",outline:"none"}}),v.jsx("button",{onClick:()=>n(t.id),className:"btn-icon",style:{color:"var(--danger)",background:"transparent",border:"none",cursor:"pointer"},children:v.jsx(Jw,{size:18})})]})}function XR({players:t,rounds:e,settings:n,onNextRound:s,onEndGame:a,isOverlay:l=!1}){const c=(E,w)=>w?n.type==="prepend"?n.prependVal*10+E:n.type==="append"?E*10+n.appendVal:E:0,f=E=>e.reduce((w,V)=>{const O=V.players[E];return w+c(O.bid,O.won)},0),d=t.map((E,w)=>({name:E,score:f(w),index:w})).sort((E,w)=>w.score-E.score),p=d.slice(0,3),T=(E=>E.length===1?[E[0]]:E.length===2?[E[1],E[0]]:[E[1],E[0],E[2]])(p).filter(Boolean);return v.jsxs("div",{className:"scorepad",style:{paddingBottom:l?"1rem":"5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h2",{className:"text-gradient",children:l?"Scoreboard Overlay":"Scoreboard"}),v.jsx("button",{onClick:a,className:"btn-ghost",style:{padding:"0.4rem"},children:v.jsx(gc,{size:20})})]}),v.jsx("div",{style:{marginBottom:"2rem",display:"flex",justifyContent:"center",alignItems:"flex-end",gap:"1rem",minHeight:"160px"},children:T.map((E,w)=>{const V=E===d[0],O=E===d[1];d[2];let I=V?"140px":O?"110px":"90px",P=V?"#fbbf24":O?"#94a3b8":"#b45309";return v.jsxs(tt.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1*w},style:{display:"flex",flexDirection:"column",alignItems:"center",width:"80px",textAlign:"center"},children:[v.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:600,fontSize:"0.9rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},children:E.name}),v.jsxs("div",{style:{width:"100%",height:I,background:`linear-gradient(to top, var(--surface) 0%, ${P}40 100%)`,border:`1px solid ${P}`,borderRadius:"0.5rem 0.5rem 0 0",display:"flex",flexDirection:"column",justifyContent:"flex-end",padding:"1rem 0",position:"relative"},children:[V&&v.jsx(jP,{size:24,color:P,style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",background:"var(--background)",borderRadius:"50%"}}),v.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:E.score})]})]},E.name)})}),v.jsx("h3",{style:{marginBottom:"1rem",borderBottom:"1px solid var(--surface-highlight)",paddingBottom:"0.5rem"},children:"Detailed Scores"}),v.jsx("div",{style:{overflowX:"auto",borderRadius:"1rem",border:"1px solid rgba(255,255,255,0.1)"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",textAlign:"center",fontSize:"0.9rem"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"var(--surface)"},children:[v.jsx("th",{style:{padding:"0.8rem",minWidth:"60px",position:"sticky",left:0,background:"var(--surface)",zIndex:2},children:"#"}),t.map((E,w)=>v.jsx("th",{style:{padding:"0.8rem",minWidth:"100px",color:"var(--primary)"},children:v.jsx("div",{style:{fontWeight:"bold"},children:E})},w))]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{style:{background:"var(--surface-highlight)",fontWeight:"bold"},children:[v.jsx("td",{style:{padding:"0.8rem",position:"sticky",left:0,background:"var(--surface-highlight)"},children:"Total"}),t.map((E,w)=>v.jsx("td",{style:{padding:"0.8rem",color:"var(--secondary)"},children:f(w)},w))]}),e.map((E,w)=>v.jsxs(tt.tr,{initial:{opacity:0},animate:{opacity:1},style:{borderTop:"1px solid rgba(255,255,255,0.05)"},children:[v.jsxs("td",{style:{padding:"0.8rem",fontWeight:"bold",position:"sticky",left:0,background:"var(--background)"},children:[v.jsx("div",{children:E.id}),v.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-dim)",fontWeight:"normal"},children:E.trump})]}),t.map((V,O)=>{const I=E.players[O],P=c(I?.bid,I?.won);return v.jsx("td",{style:{padding:"0.8rem"},children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:I.won?"var(--success)":"var(--danger)"},children:P}),v.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-dim)"},children:["Target: ",I?.bid]})]})},O)})]},E.id))]})]})}),!l&&v.jsx("div",{style:{position:"fixed",bottom:"2rem",left:0,right:0,padding:"0 2rem",display:"flex",justifyContent:"center"},children:v.jsxs("button",{onClick:s,className:"btn-primary",style:{width:"100%",maxWidth:"400px",fontSize:"1.2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 20px var(--primary-glow)"},children:["Start Next Game ",v.jsx(yd,{size:20})]})})]})}function Qz({roundNum:t,players:e,onSubmit:n,initialTrump:s,rounds:a,settings:l}){const[c,f]=M.useState(s||""),[d,p]=M.useState({}),[y,T]=M.useState(!1);M.useEffect(()=>{const O={};e.forEach((I,P)=>{O[P]={prediction:"",won:!1}}),p(O)},[e]);const E=(O,I)=>{p(P=>({...P,[O]:{...P[O],prediction:I}}))},w=O=>{p(I=>({...I,[O]:{...I[O],won:!I[O].won}}))},V=()=>{n({trump:c,inputs:d})};return v.jsxs(v.Fragment,{children:[v.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},style:{height:"100%",display:"flex",flexDirection:"column",maxHeight:"calc(100vh - 40px)"},children:[v.jsxs("header",{style:{flex:"none",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[v.jsxs("h2",{className:"text-gradient",children:["Game ",t]}),v.jsxs("button",{onClick:()=>T(!0),className:"btn-ghost",style:{padding:"0.5rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[v.jsx(Kw,{size:20})," Scoreboard"]})]}),v.jsxs("div",{className:"glass-panel",style:{flex:"none",padding:"1rem",borderRadius:"0.8rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("span",{style:{fontWeight:"bold",color:"var(--text-dim)"},children:"Trump Card:"}),v.jsx("input",{type:"text",placeholder:"e.g. Hearts",value:c,onChange:O=>f(O.target.value),style:{background:"transparent",border:"none",borderBottom:"1px solid var(--surface-highlight)",color:"white",flex:1,padding:"0.5rem",outline:"none"}})]}),v.jsx("div",{style:{flex:1,overflowY:"auto",paddingRight:"0.5rem",display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((O,I)=>{const P=d[I]||{prediction:"",won:!1};return v.jsxs("div",{className:"glass-panel",style:{padding:"1rem",borderRadius:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:v.jsx("span",{style:{fontWeight:600,fontSize:"1.1rem"},children:O})}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[v.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-dim)",marginBottom:"0.2rem"},children:"Predict"}),v.jsx("input",{type:"number",value:P.prediction,placeholder:"0",onChange:z=>E(I,z.target.value),onFocus:z=>z.target.select(),style:{width:"50px",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)",color:"white",textAlign:"center",fontSize:"1.2rem",fontWeight:"bold"}})]}),v.jsxs("div",{onClick:()=>w(I),style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",opacity:P.prediction===""?.5:1},children:[v.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-dim)",marginBottom:"0.4rem"},children:P.won?"Won":"Fail"}),v.jsx("div",{style:{width:"50px",height:"28px",background:P.won?"var(--success)":"var(--surface-highlight)",borderRadius:"99px",position:"relative",transition:"background 0.3s"},children:v.jsx(tt.div,{animate:{x:P.won?24:2},style:{width:"24px",height:"24px",background:"white",borderRadius:"50%",position:"absolute",top:"2px",display:"flex",alignItems:"center",justifyContent:"center"},children:P.won?v.jsx(Vs,{size:14,color:"var(--success)"}):v.jsx(gc,{size:14,color:"var(--text-dim)"})})})]})]})]},I)})}),v.jsx("div",{style:{flex:"none",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:v.jsxs("button",{onClick:V,className:"btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.2rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:["Finish Game ",v.jsx(ok,{size:20})]})})]}),v.jsx(Qa,{children:y&&v.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,background:"var(--background)"},children:v.jsx("div",{style:{height:"100%",overflowY:"auto",padding:"2rem"},children:v.jsx(XR,{players:e,rounds:a,settings:l,onEndGame:()=>T(!1),isOverlay:!0})})})})]})}function Xz(){const[t,e]=M.useState("setup"),[n,s]=M.useState([]),[a,l]=M.useState({}),[c,f]=M.useState([]),[d,p]=M.useState(1),[y,T]=M.useState(""),E=(I,P)=>{s(I),l(P),f([]),p(1),P.trumps&&P.trumps.length>0?T(P.trumps[0]):T("Hearts"),e("roundInput")},w=I=>{const P=n.map((F,ue)=>{const Y=I.inputs[ue];return{bid:parseInt(Y?.prediction)||0,won:Y?.won||!1,actual:Y?.won?parseInt(Y?.prediction)||0:-1}}),z={id:d,trump:I.trump,players:P};f([...c,z]),e("scorepad")},V=Oi();M.useEffect(()=>{new URLSearchParams(V.search)},[V]),M.useEffect(()=>{const I=localStorage.getItem("judgement_session");if(I)try{const P=JSON.parse(I);s(P.players||[]),l(P.settings||{}),f(P.rounds||[]),p(P.currentRoundNum||1),T(P.currentTrump||""),e(P.stage||"setup")}catch(P){console.error("Failed to restore Judgement session",P),localStorage.removeItem("judgement_session")}},[]),M.useEffect(()=>{if(t!=="setup"){const I={stage:t,players:n,settings:a,rounds:c,currentRoundNum:d,currentTrump:y};localStorage.setItem("judgement_session",JSON.stringify(I)),localStorage.setItem("active_session_type","judgement")}},[t,n,a,c,d,y]);const O=()=>{const I=d+1;if(p(I),a.trumps&&a.trumps.length>0){const P=(I-1)%a.trumps.length;T(a.trumps[P])}e("roundInput")};return v.jsx("div",{style:{width:"100%",maxWidth:"800px",margin:"0 auto",paddingBottom:"2rem"},children:v.jsxs(Qa,{mode:"wait",children:[t==="setup"&&v.jsx(Kz,{onStart:E},"setup"),t==="roundInput"&&v.jsx(Qz,{roundNum:d,initialTrump:y,players:n,rounds:c,settings:a,onSubmit:w},"roundInput"),t==="scorepad"&&v.jsx(XR,{players:n,rounds:c,settings:a,onNextRound:O,onEndGame:()=>{localStorage.removeItem("judgement_session"),localStorage.removeItem("active_session_type"),e("setup")}},"scorepad")]})})}function Wz(){const[t,e]=M.useState(null),[n,s]=M.useState(!1),[a,l]=M.useState(localStorage.getItem("pwaInstalled")==="true"),[c,f]=M.useState(!1),d=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;return M.useEffect(()=>{const y=navigator.userAgent,T=/iPhone|iPad|iPod/i.test(y);if(T){d()?(l(!0),localStorage.setItem("pwaInstalled","true")):l(!1);return}if(!T){if(d()){l(!0),s(!1);return}(async()=>{try{"getInstalledRelatedApps"in navigator&&(await navigator.getInstalledRelatedApps()).some(P=>P.platform==="webapp")&&(l(!0),localStorage.setItem("pwaInstalled","true"))}catch{}})();const w=O=>{O.preventDefault(),e(O),s(!0)};window.addEventListener("beforeinstallprompt",w);const V=()=>{l(!0),s(!1),f(!1),localStorage.setItem("pwaInstalled","true")};return window.addEventListener("appinstalled",V),()=>{window.removeEventListener("beforeinstallprompt",w),window.removeEventListener("appinstalled",V)}}},[]),{isInstallable:n,isInstalled:a,isInstalling:c,promptInstall:async()=>{if(t){f(!0);try{await t.prompt(),await t.userChoice}catch(y){console.error(y)}e(null),f(!1),s(!1)}}}}function Jz({isOpen:t,isInstalled:e,isInstalling:n,instruction:s,isInstallable:a,onInstall:l,onOpenApp:c}){if(!t)return null;const f=e||a;return v.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:v.jsxs(tt.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"glass-panel",style:{width:"100%",maxWidth:"350px",borderRadius:"1.5rem",padding:0,overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 40px rgba(0,0,0,0.5)"},children:[v.jsxs("div",{style:{padding:"1.5rem",background:"rgba(255,255,255,0.03)",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[v.jsx("div",{style:{background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)",padding:"1rem",borderRadius:"50%",boxShadow:"0 8px 16px var(--primary-glow)"},children:v.jsx(Ww,{size:32,color:"white"})}),v.jsx("h2",{className:"text-gradient",style:{fontSize:"1.5rem",textAlign:"center",margin:0},children:e?"Open App":"Install This App"})]}),v.jsx("div",{style:{padding:"1.5rem",textAlign:"center"},children:e?v.jsxs(v.Fragment,{children:[v.jsx("p",{style:{margin:0,fontSize:"1.1rem",marginBottom:"1rem"},children:"App is already installed!"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-dim)",lineHeight:1.5},children:"You can open it directly. If it's not opening, try clearing your browser cache and reinstalling."})]}):v.jsx("p",{style:{margin:0,fontSize:"1rem",color:"var(--text-dim)",lineHeight:1.6},children:s})}),f&&v.jsx("div",{style:{padding:"1rem",paddingTop:0},children:e?v.jsxs("button",{onClick:c,className:"btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem"},children:["Open App ",v.jsx(wP,{size:18})]}):a&&v.jsxs("button",{onClick:l,disabled:n,className:"btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",opacity:n?.7:1},children:[v.jsx(SP,{size:20}),n?"Installing":"Install App"]})})]})})}function Zz(){const t=nx();return Oi().pathname==="/"?null:v.jsx(Qa,{children:v.jsx(tt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t("/"),style:{position:"fixed",top:"1rem",left:"1rem",zIndex:50,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},"aria-label":"Go Home",children:v.jsx(Qw,{size:20})})})}function e8(){const{pathname:t}=Oi();return M.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function t8(){const{isInstallable:t,isInstalled:e,isInstalling:n,promptInstall:s}=Wz(),[a,l]=M.useState(!0),c=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,f=navigator.userAgent,d=/Android/i.test(f),p=/iPhone|iPad|iPod/i.test(f),y=window.location.search.includes("test-install"),T=(d||p||y)&&!c&&a,E=d?"On Android, use the browser menu and tap Install app / Add to Home screen.":p?"On iOS (iPhones and iPads), open the share menu and tap Add to Home Screen.":"Look for Install app or Add to Home screen in your browser menu.",w=async()=>{const O=`${window.location.origin}/?source=pwa`;if(p){window.location.href=O;return}if(d){window.location.href="web+thegameapp://start",setTimeout(()=>{window.location.href=O},1500);return}window.location.href=O};return v.jsxs(iD,{children:[v.jsx(e8,{}),v.jsx(Zz,{}),T&&v.jsx(Jz,{isOpen:T,isInstalled:e,isInstallable:t,isInstalling:n,instruction:E,onInstall:s,onOpenApp:w}),v.jsx("div",{className:"app-container",children:v.jsxs(V5,{children:[v.jsx(pf,{path:"/",element:v.jsx(fk,{})}),v.jsx(pf,{path:"/mafia/*",element:v.jsx($z,{})}),v.jsx(pf,{path:"/judgement/*",element:v.jsx(Xz,{})})]})})]})}kI.createRoot(document.getElementById("root")).render(v.jsx(M.StrictMode,{children:v.jsx(t8,{})}));
